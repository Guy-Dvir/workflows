!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){"use strict";var a,b=Function.call.bind(Function.apply),c=Function.call.bind(Function.call),d=Array.isArray,e=function(a){return function(){return!b(a,this,arguments)}},f=function(a){try{return a(),!1}catch(a){return!0}},g=function(a){try{return a()}catch(a){return!1}},h=e(f),i=function(){return!f(function(){Object.defineProperty({},"x",{get:function(){}})})},j=!!Object.defineProperty&&i(),k="foo"===function(){}.name,l=Function.call.bind(Array.prototype.forEach),m=Function.call.bind(Array.prototype.reduce),n=Function.call.bind(Array.prototype.filter),o=Function.call.bind(Array.prototype.some),p=function(a,b,c,d){!d&&b in a||(j?Object.defineProperty(a,b,{configurable:!0,enumerable:!1,writable:!0,value:c}):a[b]=c)},q=function(a,b){l(Object.keys(b),function(c){var d=b[c];p(a,c,d,!1)})},r=Object.create||function(a,b){var c=function(){};c.prototype=a;var d=new c;return void 0!==b&&Object.keys(b).forEach(function(a){W.defineByDescriptor(d,a,b[a])}),d},s=function(a,b){return!!Object.setPrototypeOf&&g(function(){var c=function b(c){var d=new a(c);return Object.setPrototypeOf(d,b.prototype),d};return Object.setPrototypeOf(c,a),c.prototype=r(a.prototype,{constructor:{value:c}}),b(c)})},t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")},u=t(),v=u.isFinite,w=Function.call.bind(String.prototype.indexOf),x=Function.call.bind(Object.prototype.toString),y=Function.call.bind(Array.prototype.concat),z=Function.call.bind(String.prototype.slice),A=Function.call.bind(Array.prototype.push),B=Function.apply.bind(Array.prototype.push),C=Function.call.bind(Array.prototype.shift),D=Math.max,E=Math.min,F=Math.floor,G=Math.abs,H=Math.log,I=Math.sqrt,J=Function.call.bind(Object.prototype.hasOwnProperty),K=function(){},L=u.Symbol||{},M=L.species||"@@species",N=Number.isNaN||function(a){return a!==a},O=Number.isFinite||function(a){return"number"==typeof a&&v(a)},P=function(a){return"[object Arguments]"===x(a)},Q=function(a){return null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Array]"!==x(a)&&"[object Function]"===x(a.callee)},R=P(arguments)?P:Q,S={primitive:function(a){return null===a||"function"!=typeof a&&"object"!=typeof a},object:function(a){return null!==a&&"object"==typeof a},string:function(a){return"[object String]"===x(a)},regex:function(a){return"[object RegExp]"===x(a)},symbol:function(a){return"function"==typeof u.Symbol&&"symbol"==typeof a}},T=S.symbol(L.iterator)?L.iterator:"_es6-shim iterator_";u.Set&&"function"==typeof(new u.Set)["@@iterator"]&&(T="@@iterator"),u.Reflect||p(u,"Reflect",{});var U=u.Reflect,V={Call:function(a,c){var d=arguments.length>2?arguments[2]:[];if(!V.IsCallable(a))throw new TypeError(a+" is not a function");return b(a,c,d)},RequireObjectCoercible:function(a,b){if(null==a)throw new TypeError(b||"Cannot call method on "+a)},TypeIsObject:function(a){return null!=a&&Object(a)===a},ToObject:function(a,b){return V.RequireObjectCoercible(a,b),Object(a)},IsCallable:function(a){return"function"==typeof a&&"[object Function]"===x(a)},IsConstructor:function(a){return V.IsCallable(a)},ToInt32:function(a){return V.ToNumber(a)>>0},ToUint32:function(a){return V.ToNumber(a)>>>0},ToNumber:function(a){if("[object Symbol]"===x(a))throw new TypeError("Cannot convert a Symbol value to a number");return+a},ToInteger:function(a){var b=V.ToNumber(a);return N(b)?0:0!==b&&O(b)?(b>0?1:-1)*F(G(b)):b},ToLength:function(a){var b=V.ToInteger(a);return b<=0?0:b>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:b},SameValue:function(a,b){return a===b?0!==a||1/a==1/b:N(a)&&N(b)},SameValueZero:function(a,b){return a===b||N(a)&&N(b)},IsIterable:function(a){return V.TypeIsObject(a)&&(void 0!==a[T]||R(a))},GetIterator:function(b){if(R(b))return new a(b,"value");var d=V.GetMethod(b,T);if(!V.IsCallable(d))throw new TypeError("value is not an iterable");var e=c(d,b);if(!V.TypeIsObject(e))throw new TypeError("bad iterator");return e},GetMethod:function(a,b){var c=V.ToObject(a)[b];if(void 0!==c&&null!==c){if(!V.IsCallable(c))throw new TypeError("Method not callable: "+b);return c}},IteratorComplete:function(a){return!!a.done},IteratorClose:function(a,b){var d=V.GetMethod(a,"return");if(void 0!==d){var e,f;try{e=c(d,a)}catch(a){f=a}if(!b){if(f)throw f;if(!V.TypeIsObject(e))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(a){var b=arguments.length>1?a.next(arguments[1]):a.next();if(!V.TypeIsObject(b))throw new TypeError("bad iterator");return b},IteratorStep:function(a){var b=V.IteratorNext(a);return!V.IteratorComplete(b)&&b},Construct:function(a,b,c,d){var e=void 0===c?a:c;if(!d)return U.construct(a,b,e);var f=e.prototype;V.TypeIsObject(f)||(f=Object.prototype);var g=r(f),h=V.Call(a,g,b);return V.TypeIsObject(h)?h:g},SpeciesConstructor:function(a,b){var c=a.constructor;if(void 0===c)return b;if(!V.TypeIsObject(c))throw new TypeError("Bad constructor");var d=c[M];if(void 0===d||null===d)return b;if(!V.IsConstructor(d))throw new TypeError("Bad @@species");return d},CreateHTML:function(a,b,c,d){var e=String(a),f="<"+b;if(""!==c){f+=" "+c+'="'+String(d).replace(/"/g,"&quot;")+'"'}return f+">"+e+"</"+b+">"}},W={getter:function(a,b,c){if(!j)throw new TypeError("getters require true ES5 support");Object.defineProperty(a,b,{configurable:!0,enumerable:!1,get:c})},proxy:function(a,b,c){if(!j)throw new TypeError("getters require true ES5 support");var d=Object.getOwnPropertyDescriptor(a,b);Object.defineProperty(c,b,{configurable:d.configurable,enumerable:d.enumerable,get:function(){return a[b]},set:function(c){a[b]=c}})},redefine:function(a,b,c){if(j){var d=Object.getOwnPropertyDescriptor(a,b);d.value=c,Object.defineProperty(a,b,d)}else a[b]=c},defineByDescriptor:function(a,b,c){j?Object.defineProperty(a,b,c):"value"in c&&(a[b]=c.value)},preserveToString:function(a,b){b&&V.IsCallable(b.toString)&&p(a,"toString",b.toString.bind(b),!0)}},X=function(a,b,c){W.preserveToString(b,a),Object.setPrototypeOf&&Object.setPrototypeOf(a,b),j?l(Object.getOwnPropertyNames(a),function(d){d in K||c[d]||W.proxy(a,d,b)}):l(Object.keys(a),function(d){d in K||c[d]||(b[d]=a[d])}),b.prototype=a.prototype,W.redefine(a.prototype,"constructor",b)},Y=function(){return this},Z=function(a){j&&!J(a,M)&&W.getter(a,M,Y)},$=function(a,b,c){var d=a[b];p(a,b,c,!0),W.preserveToString(a[b],d)},_=function(a,b){var c=b||function(){return this};p(a,T,c),!a[T]&&S.symbol(T)&&(a[T]=c)},aa=function(a,b,c){j?Object.defineProperty(a,b,{configurable:!0,enumerable:!0,writable:!0,value:c}):a[b]=c},ba=function(a,b,c){if(aa(a,b,c),!V.SameValue(a[b],c))throw new TypeError("property is nonconfigurable")},ca=function(a,b,c,d){if(!V.TypeIsObject(a))throw new TypeError("Constructor requires `new`: "+b.name);var e=b.prototype;V.TypeIsObject(e)||(e=c);var f=r(e);for(var g in d)if(J(d,g)){var h=d[g];p(f,g,h,!0)}return f};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var da=String.fromCodePoint;$(String,"fromCodePoint",function(a){return b(da,this,arguments)})}var ea={fromCodePoint:function(a){for(var b,c=[],d=0,e=arguments.length;d<e;d++){if(b=Number(arguments[d]),!V.SameValue(b,V.ToInteger(b))||b<0||b>1114111)throw new RangeError("Invalid code point "+b);b<65536?A(c,String.fromCharCode(b)):(b-=65536,A(c,String.fromCharCode(55296+(b>>10))),A(c,String.fromCharCode(b%1024+56320)))}return c.join("")},raw:function(a){var b=V.ToObject(a,"bad callSite"),c=V.ToObject(b.raw,"bad raw value"),d=c.length,e=V.ToLength(d);if(e<=0)return"";for(var f,g,h,i,j=[],k=0;k<e&&(f=String(k),h=String(c[f]),A(j,h),!(k+1>=e));)g=k+1<arguments.length?arguments[k+1]:"",i=String(g),A(j,i),k+=1;return j.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&$(String,"raw",ea.raw),q(String,ea);var fa=function a(b,c){if(c<1)return"";if(c%2)return a(b,c-1)+b;var d=a(b,c/2);return d+d},ga=1/0,ha={repeat:function(a){V.RequireObjectCoercible(this);var b=String(this),c=V.ToInteger(a);if(c<0||c>=ga)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return fa(b,c)},startsWith:function(a){V.RequireObjectCoercible(this);var b=String(this);if(S.regex(a))throw new TypeError('Cannot call method "startsWith" with a regex');var c=String(a),d=arguments.length>1?arguments[1]:void 0,e=D(V.ToInteger(d),0);return z(b,e,e+c.length)===c},endsWith:function(a){V.RequireObjectCoercible(this);var b=String(this);if(S.regex(a))throw new TypeError('Cannot call method "endsWith" with a regex');var c=String(a),d=b.length,e=arguments.length>1?arguments[1]:void 0,f=void 0===e?d:V.ToInteger(e),g=E(D(f,0),d);return z(b,g-c.length,g)===c},includes:function(a){if(S.regex(a))throw new TypeError('"includes" does not accept a RegExp');var b;return arguments.length>1&&(b=arguments[1]),-1!==w(this,a,b)},codePointAt:function(a){V.RequireObjectCoercible(this);var b=String(this),c=V.ToInteger(a),d=b.length;if(c>=0&&c<d){var e=b.charCodeAt(c),f=c+1===d;if(e<55296||e>56319||f)return e;var g=b.charCodeAt(c+1);return g<56320||g>57343?e:1024*(e-55296)+(g-56320)+65536}}};if(String.prototype.includes&&!1!=="a".includes("a",1/0)&&$(String.prototype,"includes",ha.includes),String.prototype.startsWith&&String.prototype.endsWith){var ia=f(function(){"/a/".startsWith(/a/)}),ja=!1==="abc".startsWith("a",1/0);ia&&ja||($(String.prototype,"startsWith",ha.startsWith),$(String.prototype,"endsWith",ha.endsWith))}q(String.prototype,ha);var ka=["\t\n\v\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),la=new RegExp("(^["+ka+"]+)|(["+ka+"]+$)","g"),ma=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(la,"")},na=["","​","￾"].join(""),oa=new RegExp("["+na+"]","g"),pa=/^[\-+]0x[0-9a-f]+$/i,qa=na.trim().length!==na.length;p(String.prototype,"trim",ma,qa);var ra=function(a){V.RequireObjectCoercible(a),this._s=String(a),this._i=0};ra.prototype.next=function(){var a=this._s,b=this._i;if(void 0===a||b>=a.length)return this._s=void 0,{value:void 0,done:!0};var c,d,e=a.charCodeAt(b);return e<55296||e>56319||b+1===a.length?d=1:(c=a.charCodeAt(b+1),d=c<56320||c>57343?1:2),this._i=b+d,{value:a.substr(b,d),done:!1}},_(ra.prototype),_(String.prototype,function(){return new ra(this)});var sa={from:function(a){var b,d,e=this,f=arguments.length>1?arguments[1]:void 0;if(void 0===f)b=!1;else{if(!V.IsCallable(f))throw new TypeError("Array.from: when provided, the second argument must be a function");d=arguments.length>2?arguments[2]:void 0,b=!0}var g,h,i,j=void 0!==(R(a)||V.GetMethod(a,T));if(j){h=V.IsConstructor(e)?Object(new e):[];var k,l,m=V.GetIterator(a);for(i=0;;){if(!1===(k=V.IteratorStep(m)))break;l=k.value;try{b&&(l=void 0===d?f(l,i):c(f,d,l,i)),h[i]=l}catch(a){throw V.IteratorClose(m,!0),a}i+=1}g=i}else{var n=V.ToObject(a);g=V.ToLength(n.length),h=V.IsConstructor(e)?Object(new e(g)):new Array(g);var o;for(i=0;i<g;++i)o=n[i],b&&(o=void 0!==d?c(f,d,o,i):f(o,i)),h[i]=o}return h.length=g,h},of:function(){for(var a=arguments.length,b=this,c=d(b)||!V.IsCallable(b)?new Array(a):V.Construct(b,[a]),e=0;e<a;++e)ba(c,e,arguments[e]);return c.length=a,c}};q(Array,sa),Z(Array);var ta=function(a){return{value:a,done:0===arguments.length}};a=function(a,b){this.i=0,this.array=a,this.kind=b},q(a.prototype,{next:function(){var b=this.i,c=this.array;if(!(this instanceof a))throw new TypeError("Not an ArrayIterator");if(void 0!==c)for(var d=V.ToLength(c.length);b<d;b++){var e,f=this.kind;return"key"===f?e=b:"value"===f?e=c[b]:"entry"===f&&(e=[b,c[b]]),this.i=b+1,{value:e,done:!1}}return this.array=void 0,{value:void 0,done:!0}}}),_(a.prototype);var ua=function(a){var b=[];for(var c in a)A(b,c);return b},va=function(a,b){q(this,{object:a,array:ua(a),kind:b})};q(va.prototype,{next:function(){var a,b=this.array;if(!(this instanceof va))throw new TypeError("Not an ObjectIterator");for(;b.length>0;)if((a=C(b))in this.object)return ta("key"===this.kind?a:"value"===this.kind?this.object[a]:[a,this.object[a]]);return ta()}}),_(va.prototype),Array.of===sa.of||function(){var a=function(a){this.length=a};a.prototype=[];var b=Array.of.apply(a,[1,2]);return b instanceof a&&2===b.length}()||$(Array,"of",sa.of);var wa={copyWithin:function(a,b){var c=arguments[2],d=V.ToObject(this),e=V.ToLength(d.length),f=V.ToInteger(a),g=V.ToInteger(b),h=f<0?D(e+f,0):E(f,e),i=g<0?D(e+g,0):E(g,e);c=void 0===c?e:V.ToInteger(c);var j=c<0?D(e+c,0):E(c,e),k=E(j-i,e-h),l=1;for(i<h&&h<i+k&&(l=-1,i+=k-1,h+=k-1);k>0;)J(d,i)?d[h]=d[i]:delete d[i],i+=l,h+=l,k-=1;return d},fill:function(a){var b=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,d=V.ToObject(this),e=V.ToLength(d.length);b=V.ToInteger(void 0===b?0:b),c=V.ToInteger(void 0===c?e:c);for(var f=b<0?D(e+b,0):E(b,e),g=c<0?e+c:c,h=f;h<e&&h<g;++h)d[h]=a;return d},find:function(a){var b=V.ToObject(this),d=V.ToLength(b.length);if(!V.IsCallable(a))throw new TypeError("Array#find: predicate must be a function");for(var e,f=arguments.length>1?arguments[1]:null,g=0;g<d;g++)if(e=b[g],f){if(c(a,f,e,g,b))return e}else if(a(e,g,b))return e},findIndex:function(a){var b=V.ToObject(this),d=V.ToLength(b.length);if(!V.IsCallable(a))throw new TypeError("Array#findIndex: predicate must be a function");for(var e=arguments.length>1?arguments[1]:null,f=0;f<d;f++)if(e){if(c(a,e,b[f],f,b))return f}else if(a(b[f],f,b))return f;return-1},keys:function(){return new a(this,"key")},values:function(){return new a(this,"value")},entries:function(){return new a(this,"entry")}};if(Array.prototype.keys&&!V.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!V.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[T]&&(q(Array.prototype,{values:Array.prototype[T]}),S.symbol(L.unscopables)&&(Array.prototype[L.unscopables].values=!0)),k&&Array.prototype.values&&"values"!==Array.prototype.values.name){var xa=Array.prototype.values;$(Array.prototype,"values",function(){return c(xa,this)}),p(Array.prototype,T,Array.prototype.values,!0)}q(Array.prototype,wa),_(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&_(Object.getPrototypeOf([].values()));var ya=function(){return g(function(){return 0===Array.from({length:-1}).length})}(),za=function(){var a=Array.from([0].entries());return 1===a.length&&d(a[0])&&0===a[0][0]&&0===a[0][1]}();if(ya&&za||$(Array,"from",sa.from),!function(){return g(function(){return Array.from([0],void 0)})}()){var Aa=Array.from;$(Array,"from",function(a){return arguments.length>0&&void 0!==arguments[1]?b(Aa,this,arguments):c(Aa,this,a)})}var Ba=function(a,b){var d={length:-1};return d[b?4294967294:0]=!0,g(function(){c(a,d,function(){throw new RangeError("should not reach here")},[])})};if(!Ba(Array.prototype.forEach)){var Ca=Array.prototype.forEach;$(Array.prototype,"forEach",function(a){return b(Ca,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.map)){var Da=Array.prototype.map;$(Array.prototype,"map",function(a){return b(Da,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.filter)){var Ea=Array.prototype.filter;$(Array.prototype,"filter",function(a){return b(Ea,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.some)){var Fa=Array.prototype.some;$(Array.prototype,"some",function(a){return b(Fa,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.every)){var Ga=Array.prototype.every;$(Array.prototype,"every",function(a){return b(Ga,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.reduce)){var Ha=Array.prototype.reduce;$(Array.prototype,"reduce",function(a){return b(Ha,this.length>=0?this:[],arguments)},!0)}if(!Ba(Array.prototype.reduceRight,!0)){var Ia=Array.prototype.reduceRight;$(Array.prototype,"reduceRight",function(a){return b(Ia,this.length>=0?this:[],arguments)},!0)}var Ja=8!==Number("0o10"),Ka=2!==Number("0b10"),La=o(na,function(a){return 0===Number(a+0+a)});if(Ja||Ka||La){var Ma=Number,Na=/^0b[01]+$/i,Oa=/^0o[0-7]+$/i,Pa=Na.test.bind(Na),Qa=Oa.test.bind(Oa),Ra=function(a){var b;if("function"==typeof a.valueOf&&(b=a.valueOf(),S.primitive(b)))return b;if("function"==typeof a.toString&&(b=a.toString(),S.primitive(b)))return b;throw new TypeError("No default value")},Sa=oa.test.bind(oa),Ta=pa.test.bind(pa),Ua=function(){var a=function(b){var d;"string"==typeof(d=arguments.length>0?S.primitive(b)?b:Ra(b,"number"):0)&&(d=c(ma,d),Pa(d)?d=parseInt(z(d,2),2):Qa(d)?d=parseInt(z(d,2),8):(Sa(d)||Ta(d))&&(d=NaN));var e=this,f=g(function(){return Ma.prototype.valueOf.call(e),!0});return e instanceof a&&!f?new Ma(d):Ma(d)};return a}();X(Ma,Ua,{}),Number=Ua,W.redefine(u,"Number",Ua)}var Va=Math.pow(2,53)-1;q(Number,{MAX_SAFE_INTEGER:Va,MIN_SAFE_INTEGER:-Va,EPSILON:2.220446049250313e-16,parseInt:u.parseInt,parseFloat:u.parseFloat,isFinite:O,isInteger:function(a){return O(a)&&V.ToInteger(a)===a},isSafeInteger:function(a){return Number.isInteger(a)&&G(a)<=Number.MAX_SAFE_INTEGER},isNaN:N}),p(Number,"parseInt",u.parseInt,Number.parseInt!==u.parseInt),[,1].find(function(a,b){return 0===b})||$(Array.prototype,"find",wa.find),0!==[,1].findIndex(function(a,b){return 0===b})&&$(Array.prototype,"findIndex",wa.findIndex);var Wa=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Xa=function(){for(var a=Number(this),b=arguments.length,c=b-a,d=new Array(c<0?0:c),e=a;e<b;++e)d[e-a]=arguments[e];return d},Ya=function(a){return function(b,c){return b[c]=a[c],b}},Za=function(a,b){var c,d=Object.keys(Object(b));return V.IsCallable(Object.getOwnPropertySymbols)&&(c=n(Object.getOwnPropertySymbols(Object(b)),Wa(b))),m(y(d,c||[]),Ya(b),a)},$a={assign:function(a,c){var d=V.ToObject(a,"Cannot convert undefined or null to object");return m(b(Xa,1,arguments),Za,d)},is:function(a,b){return V.SameValue(a,b)}};if(Object.assign&&Object.preventExtensions&&function(){var a=Object.preventExtensions({1:2});try{Object.assign(a,"xy")}catch(b){return"y"===a[1]}}()&&$(Object,"assign",$a.assign),q(Object,$a),j){var _a={setPrototypeOf:function(a,b){var d,e=function(a,b){if(!V.TypeIsObject(a))throw new TypeError("cannot set prototype on a non-object");if(null!==b&&!V.TypeIsObject(b))throw new TypeError("can only set prototype to an object or null"+b)},f=function(a,b){return e(a,b),c(d,a,b),a};try{d=a.getOwnPropertyDescriptor(a.prototype,b).set,c(d,{},null)}catch(c){if(a.prototype!=={}[b])return;d=function(a){this[b]=a},f.polyfill=f(f({},null),a.prototype)instanceof a}return f}(Object,"__proto__")};q(Object,_a)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&function(){var a=Object.create(null),b=Object.getPrototypeOf,c=Object.setPrototypeOf;Object.getPrototypeOf=function(c){var d=b(c);return d===a?null:d},Object.setPrototypeOf=function(b,d){return c(b,null===d?a:d)},Object.setPrototypeOf.polyfill=!1}(),!!f(function(){Object.keys("foo")})){var ab=Object.keys;$(Object,"keys",function(a){return ab(V.ToObject(a))})}if(Object.getOwnPropertyNames){if(!!f(function(){Object.getOwnPropertyNames("foo")})){var bb="object"==typeof window?Object.getOwnPropertyNames(window):[],cb=Object.getOwnPropertyNames;$(Object,"getOwnPropertyNames",function(a){var b=V.ToObject(a);if("[object Window]"===x(b))try{return cb(b)}catch(a){return y([],bb)}return cb(b)})}}if(Object.getOwnPropertyDescriptor){if(!!f(function(){Object.getOwnPropertyDescriptor("foo","bar")})){var db=Object.getOwnPropertyDescriptor;$(Object,"getOwnPropertyDescriptor",function(a,b){return db(V.ToObject(a),b)})}}if(Object.seal){if(!!f(function(){Object.seal("foo")})){var eb=Object.seal;$(Object,"seal",function(a){return S.object(a)?eb(a):a})}}if(Object.isSealed){if(!!f(function(){Object.isSealed("foo")})){var fb=Object.isSealed;$(Object,"isSealed",function(a){return!S.object(a)||fb(a)})}}if(Object.freeze){if(!!f(function(){Object.freeze("foo")})){var gb=Object.freeze;$(Object,"freeze",function(a){return S.object(a)?gb(a):a})}}if(Object.isFrozen){if(!!f(function(){Object.isFrozen("foo")})){var hb=Object.isFrozen;$(Object,"isFrozen",function(a){return!S.object(a)||hb(a)})}}if(Object.preventExtensions){if(!!f(function(){Object.preventExtensions("foo")})){var ib=Object.preventExtensions;$(Object,"preventExtensions",function(a){return S.object(a)?ib(a):a})}}if(Object.isExtensible){if(!!f(function(){Object.isExtensible("foo")})){var jb=Object.isExtensible;$(Object,"isExtensible",function(a){return!!S.object(a)&&jb(a)})}}if(Object.getPrototypeOf){if(!!f(function(){Object.getPrototypeOf("foo")})){var kb=Object.getPrototypeOf;$(Object,"getPrototypeOf",function(a){return kb(V.ToObject(a))})}}var lb=j&&function(){var a=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return a&&V.IsCallable(a.get)}();if(j&&!lb){var mb=function(){if(!V.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var a="";return this.global&&(a+="g"),this.ignoreCase&&(a+="i"),this.multiline&&(a+="m"),this.unicode&&(a+="u"),this.sticky&&(a+="y"),a};W.getter(RegExp.prototype,"flags",mb)}if(!g(function(){return"/a/i"===String(new RegExp(/a/g,"i"))})&&j){var nb=RegExp,ob=function(){return function a(b,c){return this instanceof a||!(S.regex(b)||b&&b.constructor===a)?S.regex(b)&&S.string(c)?new a(b.source,c):new nb(b,c):b}}();X(nb,ob,{$input:!0}),RegExp=ob,W.redefine(u,"RegExp",ob)}if(j){var pb={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(Object.keys(pb),function(a){a in RegExp&&!(pb[a]in RegExp)&&W.getter(RegExp,pb[a],function(){return RegExp[a]})})}Z(RegExp);var qb=1/Number.EPSILON,rb=function(a){return a+qb-qb},sb=Math.pow(2,-23),tb=Math.pow(2,127)*(2-sb),ub=Math.pow(2,-126),vb=Number.prototype.clz;delete Number.prototype.clz;var wb={acosh:function(a){var b=Number(a);return Number.isNaN(b)||a<1?NaN:1===b?0:b===1/0?b:H(b/Math.E+I(b+1)*I(b-1)/Math.E)+1},asinh:function(a){var b=Number(a);return 0!==b&&v(b)?b<0?-Math.asinh(-b):H(b+I(b*b+1)):b},atanh:function(a){var b=Number(a);return Number.isNaN(b)||b<-1||b>1?NaN:-1===b?-1/0:1===b?1/0:0===b?b:.5*H((1+b)/(1-b))},cbrt:function(a){var b=Number(a);if(0===b)return b;var c,d=b<0;return d&&(b=-b),b===1/0?c=1/0:(c=Math.exp(H(b)/3),c=(b/(c*c)+2*c)/3),d?-c:c},clz32:function(a){var b=Number(a),d=V.ToUint32(b);return 0===d?32:vb?c(vb,d):31-F(H(d+.5)*Math.LOG2E)},cosh:function(a){var b=Number(a);return 0===b?1:Number.isNaN(b)?NaN:v(b)?(b<0&&(b=-b),b>21?Math.exp(b)/2:(Math.exp(b)+Math.exp(-b))/2):1/0},expm1:function(a){var b=Number(a);if(b===-1/0)return-1;if(!v(b)||0===b)return b;if(G(b)>.5)return Math.exp(b)-1;for(var c=b,d=0,e=1;d+c!==d;)d+=c,e+=1,c*=b/e;return d},hypot:function(a,b){for(var c=0,d=0,e=0;e<arguments.length;++e){var f=G(Number(arguments[e]));d<f?(c*=d/f*(d/f),c+=1,d=f):c+=f>0?f/d*(f/d):f}return d===1/0?1/0:d*I(c)},log2:function(a){return H(a)*Math.LOG2E},log10:function(a){return H(a)*Math.LOG10E},log1p:function(a){var b=Number(a);return b<-1||Number.isNaN(b)?NaN:0===b||b===1/0?b:-1===b?-1/0:1+b-1==0?b:b*(H(1+b)/(1+b-1))},sign:function(a){var b=Number(a);return 0===b?b:Number.isNaN(b)?b:b<0?-1:1},sinh:function(a){var b=Number(a);return v(b)&&0!==b?G(b)<1?(Math.expm1(b)-Math.expm1(-b))/2:(Math.exp(b-1)-Math.exp(-b-1))*Math.E/2:b},tanh:function(a){var b=Number(a);if(Number.isNaN(b)||0===b)return b;if(b===1/0)return 1;if(b===-1/0)return-1;var c=Math.expm1(b),d=Math.expm1(-b);return c===1/0?1:d===1/0?-1:(c-d)/(Math.exp(b)+Math.exp(-b))},trunc:function(a){var b=Number(a);return b<0?-F(-b):F(b)},imul:function(a,b){var c=V.ToUint32(a),d=V.ToUint32(b),e=c>>>16&65535,f=65535&c,g=d>>>16&65535,h=65535&d;return f*h+(e*h+f*g<<16>>>0)|0},fround:function(a){var b=Number(a);if(0===b||b===1/0||b===-1/0||N(b))return b;var c=Math.sign(b),d=G(b);if(d<ub)return c*rb(d/ub/sb)*ub*sb;var e=(1+sb/Number.EPSILON)*d,f=e-(e-d);return f>tb||N(f)?c*(1/0):c*f}};q(Math,wb),p(Math,"log1p",wb.log1p,-1e-17!==Math.log1p(-1e-17)),p(Math,"asinh",wb.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),p(Math,"tanh",wb.tanh,-2e-17!==Math.tanh(-2e-17)),p(Math,"acosh",wb.acosh,Math.acosh(Number.MAX_VALUE)===1/0),p(Math,"cbrt",wb.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),p(Math,"sinh",wb.sinh,-2e-17!==Math.sinh(-2e-17));var xb=Math.expm1(10);p(Math,"expm1",wb.expm1,xb>22025.465794806718||xb<22025.465794806718);var yb=Math.round,zb=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(Number.EPSILON/3.99-.5),Ab=qb+1,Bb=2*qb-1,Cb=[Ab,Bb].every(function(a){return Math.round(a)===a});p(Math,"round",function(a){var b=F(a),c=-1===b?-0:b+1;return a-b<.5?b:c},!zb||!Cb),W.preserveToString(Math.round,yb);var Db=Math.imul;-5!==Math.imul(4294967295,5)&&(Math.imul=wb.imul,W.preserveToString(Math.imul,Db)),2!==Math.imul.length&&$(Math,"imul",function(a,c){return b(Db,Math,arguments)});var Eb=function(){var a=u.setTimeout;if("function"==typeof a||"object"==typeof a){V.IsPromise=function(a){return!!V.TypeIsObject(a)&&void 0!==a._promise};var b,d=function(a){if(!V.IsConstructor(a))throw new TypeError("Bad promise constructor");var b=this,c=function(a,c){if(void 0!==b.resolve||void 0!==b.reject)throw new TypeError("Bad Promise implementation!");b.resolve=a,b.reject=c};if(b.promise=new a(c),!V.IsCallable(b.resolve)||!V.IsCallable(b.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&V.IsCallable(window.postMessage)&&(b=function(){var a=[],b="zero-timeout-message",c=function(c){A(a,c),window.postMessage(b,"*")},d=function(c){if(c.source===window&&c.data===b){if(c.stopPropagation(),0===a.length)return;C(a)()}};return window.addEventListener("message",d,!0),c});var e,f=function(){var a=u.Promise;return a&&a.resolve&&function(b){return a.resolve().then(b)}},g=V.IsCallable(u.setImmediate)?u.setImmediate.bind(u):"object"==typeof process&&process.nextTick?process.nextTick:f()||(V.IsCallable(b)?b():function(b){a(b,0)}),h=1,i=2,j=3,k=4,m=5,n=function(a,b){var c,d,e=a.capabilities,f=a.handler,g=!1;if(f===h)c=b;else if(f===i)c=b,g=!0;else try{c=f(b)}catch(a){c=a,g=!0}(d=g?e.reject:e.resolve)(c)},o=function(a,b){l(a,function(a){g(function(){n(a,b)})})},p=function(a,b){var c=a._promise,d=c.fulfillReactions;c.result=b,c.fulfillReactions=void 0,c.rejectReactions=void 0,c.state=k,o(d,b)},r=function(a,b){var c=a._promise,d=c.rejectReactions;c.result=b,c.fulfillReactions=void 0,c.rejectReactions=void 0,c.state=m,o(d,b)},s=function(a){var b=!1;return{resolve:function(c){var d;if(!b){if(b=!0,c===a)return r(a,new TypeError("Self resolution"));if(!V.TypeIsObject(c))return p(a,c);try{d=c.then}catch(b){return r(a,b)}if(!V.IsCallable(d))return p(a,c);g(function(){t(a,c,d)})}},reject:function(c){if(!b)return b=!0,r(a,c)}}},t=function(a,b,d){var e=s(a),f=e.resolve,g=e.reject;try{c(d,b,f,g)}catch(a){g(a)}},v=function(a){if(!V.TypeIsObject(a))throw new TypeError("Promise is not object");var b=a[M];return void 0!==b&&null!==b?b:a},w=function(){var a=function(b){if(!(this instanceof a))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!V.IsCallable(b))throw new TypeError("not a valid resolver");var c=ca(this,a,e,{_promise:{result:void 0,state:j,fulfillReactions:[],rejectReactions:[]}}),d=s(c),f=d.reject;try{b(d.resolve,f)}catch(a){f(a)}return c};return a}();e=w.prototype;var x=function(a,b,c,d){var e=!1;return function(f){if(!e&&(e=!0,b[a]=f,0==--d.count)){(0,c.resolve)(b)}}},y=function(a,b,c){for(var d,e,f=a.iterator,g=[],h={count:1},i=0;;){try{if(!1===(d=V.IteratorStep(f))){a.done=!0;break}e=d.value}catch(b){throw a.done=!0,b}g[i]=void 0;var j=b.resolve(e),k=x(i,g,c,h);h.count+=1,j.then(k,c.reject),i+=1}if(0==--h.count){(0,c.resolve)(g)}return c.promise},z=function(a,b,c){for(var d,e,f,g=a.iterator;;){try{if(!1===(d=V.IteratorStep(g))){a.done=!0;break}e=d.value}catch(b){throw a.done=!0,b}f=b.resolve(e),f.then(c.resolve,c.reject)}return c.promise};return q(w,{all:function(a){var b,c,e=v(this),f=new d(e);try{return b=V.GetIterator(a),c={iterator:b,done:!1},y(c,e,f)}catch(a){var g=a;if(c&&!c.done)try{V.IteratorClose(b,!0)}catch(a){g=a}var h=f.reject;return h(g),f.promise}},race:function(a){var b,c,e=v(this),f=new d(e);try{return b=V.GetIterator(a),c={iterator:b,done:!1},z(c,e,f)}catch(a){var g=a;if(c&&!c.done)try{V.IteratorClose(b,!0)}catch(a){g=a}var h=f.reject;return h(g),f.promise}},reject:function(a){var b=this,c=new d(b);return(0,c.reject)(a),c.promise},resolve:function(a){var b=this;if(V.IsPromise(a)){var c=a.constructor;if(c===b)return a}var e=new d(b);return(0,e.resolve)(a),e.promise}}),q(e,{catch:function(a){return this.then(void 0,a)},then:function(a,b){var c=this;if(!V.IsPromise(c))throw new TypeError("not a promise");var e,f=V.SpeciesConstructor(c,w),l=new d(f),o={capabilities:l,handler:V.IsCallable(a)?a:h},p={capabilities:l,handler:V.IsCallable(b)?b:i},q=c._promise;if(q.state===j)A(q.fulfillReactions,o),A(q.rejectReactions,p);else if(q.state===k)e=q.result,g(function(){n(o,e)});else{if(q.state!==m)throw new TypeError("unexpected Promise state");e=q.result,g(function(){n(p,e)})}return l.promise}}),w}}();if(u.Promise&&(delete u.Promise.accept,delete u.Promise.defer,delete u.Promise.prototype.chain),"function"==typeof Eb){q(u,{Promise:Eb});var Fb=s(u.Promise,function(a){return a.resolve(42).then(function(){})instanceof a}),Gb=!f(function(){u.Promise.reject(42).then(null,5).then(null,K)}),Hb=f(function(){u.Promise.call(3,K)}),Ib=function(a){var b=a.resolve(5);return b.constructor={},b===a.resolve(b)}(u.Promise);Fb&&Gb&&Hb&&!Ib||(Promise=Eb,$(u,"Promise",Eb)),Z(Promise)}var Jb=function(a){var b=Object.keys(m(a,function(a,b){return a[b]=!0,a},{}));return a.join(":")===b.join(":")},Kb=Jb(["z","a","bb"]),Lb=Jb(["z",1,"a","3",2]);if(j){var Mb=function(a){if(!Kb)return null;var b=typeof a;return"undefined"===b||null===a?"^"+String(a):"string"===b?"$"+a:"number"===b?Lb?a:"n"+a:"boolean"===b?"b"+a:null},Nb=function(){return Object.create?Object.create(null):{}},Ob=function(a,b,e){if(d(e)||S.string(e))l(e,function(a){b.set(a[0],a[1])});else if(e instanceof a)c(a.prototype.forEach,e,function(a,c){b.set(c,a)});else{var f,g;if(null!==e&&void 0!==e){if(g=b.set,!V.IsCallable(g))throw new TypeError("bad map");f=V.GetIterator(e)}if(void 0!==f)for(;;){var h=V.IteratorStep(f);if(!1===h)break;var i=h.value;try{if(!V.TypeIsObject(i))throw new TypeError("expected iterable of pairs");c(g,b,i[0],i[1])}catch(a){throw V.IteratorClose(f,!0),a}}}},Pb=function(a,b,e){if(d(e)||S.string(e))l(e,function(a){b.add(a)});else if(e instanceof a)c(a.prototype.forEach,e,function(a){b.add(a)});else{var f,g;if(null!==e&&void 0!==e){if(g=b.add,!V.IsCallable(g))throw new TypeError("bad set");f=V.GetIterator(e)}if(void 0!==f)for(;;){var h=V.IteratorStep(f);if(!1===h)break;var i=h.value;try{c(g,b,i)}catch(a){throw V.IteratorClose(f,!0),a}}}},Qb={Map:function(){var a={},b=function(a,b){this.key=a,this.value=b,this.next=null,this.prev=null};b.prototype.isRemoved=function(){return this.key===a};var d=function(a){return!!a._es6map},e=function(a,b){if(!V.TypeIsObject(a)||!d(a))throw new TypeError("Method Map.prototype."+b+" called on incompatible receiver "+String(a))},f=function(a,b){e(a,"[[MapIterator]]"),this.head=a._head,this.i=this.head,this.kind=b};f.prototype={next:function(){var a,b=this.i,c=this.kind,d=this.head;if(void 0===this.i)return{value:void 0,done:!0};for(;b.isRemoved()&&b!==d;)b=b.prev;for(;b.next!==d;)if(b=b.next,!b.isRemoved())return a="key"===c?b.key:"value"===c?b.value:[b.key,b.value],this.i=b,{value:a,done:!1};return this.i=void 0,{value:void 0,done:!0}}},_(f.prototype);var g,h=function a(){if(!(this instanceof a))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction")
;var c=ca(this,a,g,{_es6map:!0,_head:null,_storage:Nb(),_size:0}),d=new b(null,null);return d.next=d.prev=d,c._head=d,arguments.length>0&&Ob(a,c,arguments[0]),c};return g=h.prototype,W.getter(g,"size",function(){if(void 0===this._size)throw new TypeError("size method called on incompatible Map");return this._size}),q(g,{get:function(a){e(this,"get");var b=Mb(a);if(null!==b){var c=this._storage[b];return c?c.value:void 0}for(var d=this._head,f=d;(f=f.next)!==d;)if(V.SameValueZero(f.key,a))return f.value},has:function(a){e(this,"has");var b=Mb(a);if(null!==b)return void 0!==this._storage[b];for(var c=this._head,d=c;(d=d.next)!==c;)if(V.SameValueZero(d.key,a))return!0;return!1},set:function(a,c){e(this,"set");var d,f=this._head,g=f,h=Mb(a);if(null!==h){if(void 0!==this._storage[h])return this._storage[h].value=c,this;d=this._storage[h]=new b(a,c),g=f.prev}for(;(g=g.next)!==f;)if(V.SameValueZero(g.key,a))return g.value=c,this;return d=d||new b(a,c),V.SameValue(-0,a)&&(d.key=0),d.next=this._head,d.prev=this._head.prev,d.prev.next=d,d.next.prev=d,this._size+=1,this},delete:function(b){e(this,"delete");var c=this._head,d=c,f=Mb(b);if(null!==f){if(void 0===this._storage[f])return!1;d=this._storage[f].prev,delete this._storage[f]}for(;(d=d.next)!==c;)if(V.SameValueZero(d.key,b))return d.key=d.value=a,d.prev.next=d.next,d.next.prev=d.prev,this._size-=1,!0;return!1},clear:function(){e(this,"clear"),this._size=0,this._storage=Nb();for(var b=this._head,c=b,d=c.next;(c=d)!==b;)c.key=c.value=a,d=c.next,c.next=c.prev=b;b.next=b.prev=b},keys:function(){return e(this,"keys"),new f(this,"key")},values:function(){return e(this,"values"),new f(this,"value")},entries:function(){return e(this,"entries"),new f(this,"key+value")},forEach:function(a){e(this,"forEach");for(var b=arguments.length>1?arguments[1]:null,d=this.entries(),f=d.next();!f.done;f=d.next())b?c(a,b,f.value[1],f.value[0],this):a(f.value[1],f.value[0],this)}}),_(g,g.entries),h}(),Set:function(){var a,b=function(a){return a._es6set&&void 0!==a._storage},d=function(a,c){if(!V.TypeIsObject(a)||!b(a))throw new TypeError("Set.prototype."+c+" called on incompatible receiver "+String(a))},e=function b(){if(!(this instanceof b))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var c=ca(this,b,a,{_es6set:!0,"[[SetData]]":null,_storage:Nb()});if(!c._es6set)throw new TypeError("bad set");return arguments.length>0&&Pb(b,c,arguments[0]),c};a=e.prototype;var f=function(a){if(!a["[[SetData]]"]){var b=a["[[SetData]]"]=new Qb.Map;l(Object.keys(a._storage),function(a){var c=a;if("^null"===c)c=null;else if("^undefined"===c)c=void 0;else{var d=c.charAt(0);c="$"===d?z(c,1):"n"===d?+z(c,1):"b"===d?"btrue"===c:+c}b.set(c,c)}),a._storage=null}};return W.getter(e.prototype,"size",function(){return d(this,"size"),f(this),this["[[SetData]]"].size}),q(e.prototype,{has:function(a){d(this,"has");var b;return this._storage&&null!==(b=Mb(a))?!!this._storage[b]:(f(this),this["[[SetData]]"].has(a))},add:function(a){d(this,"add");var b;return this._storage&&null!==(b=Mb(a))?(this._storage[b]=!0,this):(f(this),this["[[SetData]]"].set(a,a),this)},delete:function(a){d(this,"delete");var b;if(this._storage&&null!==(b=Mb(a))){var c=J(this._storage,b);return delete this._storage[b]&&c}return f(this),this["[[SetData]]"].delete(a)},clear:function(){d(this,"clear"),this._storage?this._storage=Nb():this["[[SetData]]"].clear()},values:function(){return d(this,"values"),f(this),this["[[SetData]]"].values()},entries:function(){return d(this,"entries"),f(this),this["[[SetData]]"].entries()},forEach:function(a){d(this,"forEach");var b=arguments.length>1?arguments[1]:null,e=this;f(e),this["[[SetData]]"].forEach(function(d,f){b?c(a,b,f,f,e):a(f,f,e)})}}),p(e.prototype,"keys",e.prototype.values,!0),_(e.prototype,e.prototype.values),e}()};if(u.Map||u.Set){if(!g(function(){return 2===new Map([[1,2]]).get(1)})){var Rb=u.Map;u.Map=function a(){if(!(this instanceof a))throw new TypeError('Constructor Map requires "new"');var b=new Rb;return arguments.length>0&&Ob(a,b,arguments[0]),Object.setPrototypeOf(b,u.Map.prototype),p(b,"constructor",a,!0),b},u.Map.prototype=r(Rb.prototype),W.preserveToString(u.Map,Rb)}var Sb=new Map,Tb=function(a){return a.delete(0),a.delete(-0),a.set(0,3),a.get(-0,4),3===a.get(0)&&4===a.get(-0)}(Sb),Ub=Sb.set(1,2)===Sb;if(!Tb||!Ub){var Vb=Map.prototype.set;$(Map.prototype,"set",function(a,b){return c(Vb,this,0===a?0:a,b),this})}if(!Tb){var Wb=Map.prototype.get,Xb=Map.prototype.has;q(Map.prototype,{get:function(a){return c(Wb,this,0===a?0:a)},has:function(a){return c(Xb,this,0===a?0:a)}},!0),W.preserveToString(Map.prototype.get,Wb),W.preserveToString(Map.prototype.has,Xb)}var Yb=new Set,Zb=function(a){return a.delete(0),a.add(-0),!a.has(0)}(Yb),$b=Yb.add(1)===Yb;if(!Zb||!$b){var _b=Set.prototype.add;Set.prototype.add=function(a){return c(_b,this,0===a?0:a),this},W.preserveToString(Set.prototype.add,_b)}if(!Zb){var ac=Set.prototype.has;Set.prototype.has=function(a){return c(ac,this,0===a?0:a)},W.preserveToString(Set.prototype.has,ac);var bc=Set.prototype.delete;Set.prototype.delete=function(a){return c(bc,this,0===a?0:a)},W.preserveToString(Set.prototype.delete,bc)}var cc=s(u.Map,function(a){var b=new a([]);return b.set(42,42),b instanceof a}),dc=Object.setPrototypeOf&&!cc,ec=function(){try{return!(u.Map()instanceof u.Map)}catch(a){return a instanceof TypeError}}();if(0!==u.Map.length||dc||!ec){var fc=u.Map;u.Map=function a(){if(!(this instanceof a))throw new TypeError('Constructor Map requires "new"');var b=new fc;return arguments.length>0&&Ob(a,b,arguments[0]),Object.setPrototypeOf(b,a.prototype),p(b,"constructor",a,!0),b},u.Map.prototype=fc.prototype,W.preserveToString(u.Map,fc)}var gc=s(u.Set,function(a){var b=new a([]);return b.add(42,42),b instanceof a}),hc=Object.setPrototypeOf&&!gc,ic=function(){try{return!(u.Set()instanceof u.Set)}catch(a){return a instanceof TypeError}}();if(0!==u.Set.length||hc||!ic){var jc=u.Set;u.Set=function a(){if(!(this instanceof a))throw new TypeError('Constructor Set requires "new"');var b=new jc;return arguments.length>0&&Pb(a,b,arguments[0]),Object.setPrototypeOf(b,a.prototype),p(b,"constructor",a,!0),b},u.Set.prototype=jc.prototype,W.preserveToString(u.Set,jc)}var kc=!g(function(){return(new Map).keys().next().done});if(("function"!=typeof u.Map.prototype.clear||0!==(new u.Set).size||0!==(new u.Map).size||"function"!=typeof u.Map.prototype.keys||"function"!=typeof u.Set.prototype.keys||"function"!=typeof u.Map.prototype.forEach||"function"!=typeof u.Set.prototype.forEach||h(u.Map)||h(u.Set)||"function"!=typeof(new u.Map).keys().next||kc||!cc)&&(delete u.Map,delete u.Set,q(u,{Map:Qb.Map,Set:Qb.Set},!0)),u.Set.prototype.keys!==u.Set.prototype.values&&p(u.Set.prototype,"keys",u.Set.prototype.values,!0),_(Object.getPrototypeOf((new u.Map).keys())),_(Object.getPrototypeOf((new u.Set).keys())),k&&"has"!==u.Set.prototype.has.name){var lc=u.Set.prototype.has;$(u.Set.prototype,"has",function(a){return c(lc,this,a)})}}q(u,Qb),Z(u.Map),Z(u.Set)}var mc=function(a){if(!V.TypeIsObject(a))throw new TypeError("target must be an object")},nc={apply:function(){return b(V.Call,null,arguments)},construct:function(a,b){if(!V.IsConstructor(a))throw new TypeError("First argument must be a constructor.");var c=arguments.length<3?a:arguments[2];if(!V.IsConstructor(c))throw new TypeError("new.target must be a constructor.");return V.Construct(a,b,c,"internal")},deleteProperty:function(a,b){if(mc(a),j){var c=Object.getOwnPropertyDescriptor(a,b);if(c&&!c.configurable)return!1}return delete a[b]},enumerate:function(a){return mc(a),new va(a,"key")},has:function(a,b){return mc(a),b in a}};Object.getOwnPropertyNames&&Object.assign(nc,{ownKeys:function(a){mc(a);var b=Object.getOwnPropertyNames(a);return V.IsCallable(Object.getOwnPropertySymbols)&&B(b,Object.getOwnPropertySymbols(a)),b}});var oc=function(a){return!f(a)};if(Object.preventExtensions&&Object.assign(nc,{isExtensible:function(a){return mc(a),Object.isExtensible(a)},preventExtensions:function(a){return mc(a),oc(function(){Object.preventExtensions(a)})}}),j){var pc=function(a,b,d){var e=Object.getOwnPropertyDescriptor(a,b);if(!e){var f=Object.getPrototypeOf(a);if(null===f)return;return pc(f,b,d)}return"value"in e?e.value:e.get?c(e.get,d):void 0},qc=function(a,b,d,e){var f=Object.getOwnPropertyDescriptor(a,b);if(!f){var g=Object.getPrototypeOf(a);if(null!==g)return qc(g,b,d,e);f={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in f){if(!f.writable)return!1;if(!V.TypeIsObject(e))return!1;return Object.getOwnPropertyDescriptor(e,b)?U.defineProperty(e,b,{value:d}):U.defineProperty(e,b,{value:d,writable:!0,enumerable:!0,configurable:!0})}return!!f.set&&(c(f.set,e,d),!0)};Object.assign(nc,{defineProperty:function(a,b,c){return mc(a),oc(function(){Object.defineProperty(a,b,c)})},getOwnPropertyDescriptor:function(a,b){return mc(a),Object.getOwnPropertyDescriptor(a,b)},get:function(a,b){mc(a);var c=arguments.length>2?arguments[2]:a;return pc(a,b,c)},set:function(a,b,c){mc(a);var d=arguments.length>3?arguments[3]:a;return qc(a,b,c,d)}})}if(Object.getPrototypeOf){var rc=Object.getPrototypeOf;nc.getPrototypeOf=function(a){return mc(a),rc(a)}}if(Object.setPrototypeOf&&nc.getPrototypeOf){var sc=function(a,b){for(var c=b;c;){if(a===c)return!0;c=nc.getPrototypeOf(c)}return!1};Object.assign(nc,{setPrototypeOf:function(a,b){if(mc(a),null!==b&&!V.TypeIsObject(b))throw new TypeError("proto must be an object or null");return b===U.getPrototypeOf(a)||!(U.isExtensible&&!U.isExtensible(a))&&(!sc(a,b)&&(Object.setPrototypeOf(a,b),!0))}})}var tc=function(a,b){if(V.IsCallable(u.Reflect[a])){g(function(){return u.Reflect[a](1),u.Reflect[a](NaN),u.Reflect[a](!0),!0})&&$(u.Reflect,a,b)}else p(u.Reflect,a,b)};if(Object.keys(nc).forEach(function(a){tc(a,nc[a])}),k&&"getPrototypeOf"!==u.Reflect.getPrototypeOf.name){var uc=u.Reflect.getPrototypeOf;$(u.Reflect,"getPrototypeOf",function(a){return c(uc,u.Reflect,a)})}if(u.Reflect.setPrototypeOf&&g(function(){return u.Reflect.setPrototypeOf(1,{}),!0})&&$(u.Reflect,"setPrototypeOf",nc.setPrototypeOf),u.Reflect.defineProperty&&(g(function(){var a=!u.Reflect.defineProperty(1,"test",{value:1}),b="function"!=typeof Object.preventExtensions||!u.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return a&&b})||$(u.Reflect,"defineProperty",nc.defineProperty)),u.Reflect.construct&&(g(function(){var a=function(){};return u.Reflect.construct(function(){},[],a)instanceof a})||$(u.Reflect,"construct",nc.construct)),"Invalid Date"!==String(new Date(NaN))){var vc=Date.prototype.toString,wc=function(){var a=+this;return a!==a?"Invalid Date":c(vc,this)};$(Date.prototype,"toString",wc)}var xc={anchor:function(a){return V.CreateHTML(this,"a","name",a)},big:function(){return V.CreateHTML(this,"big","","")},blink:function(){return V.CreateHTML(this,"blink","","")},bold:function(){return V.CreateHTML(this,"b","","")},fixed:function(){return V.CreateHTML(this,"tt","","")},fontcolor:function(a){return V.CreateHTML(this,"font","color",a)},fontsize:function(a){return V.CreateHTML(this,"font","size",a)},italics:function(){return V.CreateHTML(this,"i","","")},link:function(a){return V.CreateHTML(this,"a","href",a)},small:function(){return V.CreateHTML(this,"small","","")},strike:function(){return V.CreateHTML(this,"strike","","")},sub:function(){return V.CreateHTML(this,"sub","","")},sup:function(){return V.CreateHTML(this,"sup","","")}};l(Object.keys(xc),function(a){var b=String.prototype[a],d=!1;if(V.IsCallable(b)){var e=c(b,"",' " '),f=y([],e.match(/"/g)).length;d=e!==e.toLowerCase()||f>2}else d=!0;d&&$(String.prototype,a,xc[a])});var yc=function(){if(!S.symbol(L.iterator))return!1;var a="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!a)return!1;if(void 0!==a(L()))return!0;if("[null]"!==a([L()]))return!0;var b={a:L()};return b[L()]=!0,"{}"!==a(b)}(),zc=g(function(){return!S.symbol(L.iterator)||"{}"===JSON.stringify(Object(L()))&&"[{}]"===JSON.stringify([Object(L())])});if(yc||!zc){var Ac=JSON.stringify;$(JSON,"stringify",function(a){if("symbol"!=typeof a){var b;arguments.length>1&&(b=arguments[1]);var e=[a];if(d(b))e.push(b);else{var f=(V.IsCallable(b),function(a,d){var e=b?c(b,this,a,d):d;if("symbol"!=typeof e)return S.symbol(e)?Ya({})(e):e});e.push(f)}return arguments.length>2&&e.push(arguments[2]),Ac.apply(this,e)}})}return u});var invoices;!function(a){var b=function(){function a(a){var b=a.street,c=void 0===b?"":b,d=a.city,e=void 0===d?"":d,f=a.zip,g=void 0===f?"":f,h=a.state,i=void 0===h?"":h,j=a.country,k=void 0===j?"":j;this.street=null,this.city=null,this.zip=null,this.state=null,this.country=null,this.street=c||null,this.city=e||null,this.zip=g||null,this.state=i||null,this.country=k||null}return a.prototype.isSameAddress=function(a){return this.street===a.street&&this.city===a.city&&this.zip===a.zip&&this.state===a.state&&this.country===a.country},a.prototype.getDescription=function(){return this.iterateFields().filter(function(a){return a}).join(", ")},a.isEmpty=function(b){var c=!!b;if(c){var d=new a(b);return this.fieldsHaveValue(d)}return!c},a.fieldsHaveValue=function(a){return!_.some(a.iterateFields(),function(a){return!!a})},a.prototype.iterateFields=function(){return[this.street,this.city,this.state,this.zip,this.country]},a}();a.Address=b;var c=function(){function a(){this.businessAddress=new b({})}return a}();a.BusinessInfo=c;var d=function(){function b(a){this.name="",a&&(this.name=a.name,this.rate=a.rate,a.taxId&&(this.taxId=a.taxId))}return b.prototype.serialize=function(){return new a.TaxDTO(this)},b.prototype.copy=function(){return angular.copy(this)},b}();a.Tax=d;var e=function(){function c(a){this.contactId="",this.email="",this.name="",this.allContactEmails=[],this.allContactAddresses=[],a&&(this.contactId=a.contactId,this.email=a.email,this.name=a.name,this.companyName=a.company,this.phone=a.phone,this.fullAddress=new b(a.address?a.address:{}))}return Object.defineProperty(c.prototype,"addressString",{get:function(){return this.fullAddress&&this.fullAddress.getDescription()},enumerable:!0,configurable:!0}),c.prototype.updateFromFullDto=function(a){a?(this.contactId=a.id,this.name=this.getNameString(a),this.email=this.getEmailString(a.emails),this.companyName=a.company&&a.company.name,this.phone=a.phones&&a.phones[0]&&a.phones[0].phone,this.updateAvailableListsFromFullDto(a),this.updateAddressFromDto(a)):(this.contactId=void 0,this.email=void 0,this.fullAddress=null)},c.prototype.updateAddressFromDto=function(a){this.fullAddress=this.allContactAddresses&&this.allContactAddresses.length>0?this.allContactAddresses[0]:null},c.prototype.migrateAddressDto=function(a){return new b(void 0===a.address?a:{street:a.address,city:a.city,state:a.region,zip:a.postalCode,country:a.country})},c.prototype.updateAvailableListsFromFullDto=function(a){var b=this;this.allContactEmails=_.uniq(_.map(a.emails,function(a){return a.email})),this.allContactAddresses=_.map(a.addresses,this.migrateAddressDto),this.fullAddress&&(this.fullAddress=_.find(this.allContactAddresses,function(a){return b.fullAddress.isSameAddress(a)})||this.fullAddress)},c.prototype.getEmailString=function(a){return a&&a.length>0?a[0].email:""},c.prototype.getNameString=function(a){var b=a.name,c=a.emails;return a.title?a.title:b&&(b.first||b.middle||b.last)?[b.first,b.middle,b.last].filter(function(a){return!!a}).join(" "):this.getEmailString(c)},c.prototype.serialize=function(){return new a.ContactDTO(this)},c}();a.Contact=e}(invoices||(invoices={}));var invoices;!function(a){angular.module("quoteCommon",["isoCurrency.common","wix.common.bi","locale.data","ngCookies"]).config(["wixBiLoggerProvider","quotesBiEvents",function(a,b){a.setConfig({adapter:"dash",eventMap:b.getEventMap(),defaultEventArgs:{src:5},removeUndefinedValues:!0})}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("wixCashierSettings",[]),angular.module("quotesRoute",["ngRoute","builtinAppsAdapter"]),angular.module("quotesAppInternal",["wixAngularStorage","quotesRoute"]);var b=Boolean(window.__IS_BUSINESS_MANAGER__)?["matchmedia-ng"]:["wixCashierSettings","cashierSettingsComponentApp"];angular.module("quotesApp",["quotesAppInternal","quotesTranslations","wixAngular","wixAngularStorage","wix.common.bi","quoteCommon","wixStyleMaterial","editContact","editContactTranslations","isoCurrency","ngMaterial","angular-md5","ngMessages","angularViewportWatch","ngSanitize","ui.bootstrap.2.2.0","fedops"].concat(b)).constant("localeDataRef",{lang:"en"}).config(["$mdDateLocaleProvider","localeDataRef",function(a,b){a.formatDate=function(a){var c={year:"numeric",month:"short",day:"numeric"};return a.toLocaleDateString(b.lang,c)}}]).config(["wixBiLoggerProvider","quotesBiEvents",function(a,b){function c(a){return a.getInstalledAppInstanceId(a.wixAppIds.quotes||a.wixAppIds.invoices)}c.$inject=["frameworkFacade"],a.setConfig({eventMap:b.getEventMap(),defaultEventArgs:{src:5,instance_id:c},removeUndefinedValues:!0})}]).config(["$provide",function(a){a.decorator("wixModal",["$delegate","$q","DIALOG_REASONS",function(a,b,c){var d=function(a){var d=b.defer();return[c.ERROR,c.CANCEL,c.BLUR,c.CLOSE].indexOf(a)>-1?d.reject(a):d.resolve(a),d.promise},e=a.open;return a.open=function(){return e.apply(this,arguments).then(d)},a}])}]).config(["quotesRouteProvider",function(a){a.configureRoutes()}]).config(["$animateProvider",function(a){a.classNameFilter(/^((?!(no-animate)).)*$/)}]).config(["wixStyleConfigProvider",function(a){a.useNewWixInput(!0)}]).config(["$httpProvider",function(a){a.interceptors.push("instanceInterceptor")}]).config(["nrNgClientProvider","clientTopology",function(a,b){var c=b.quotes||b.invoicesStaticsUrl;if(c){var d=c.split("/"),e=d[d.length-2];a.tag("version",e)}a.tag("widgetName","quotes-statics")}]).config(["fedopsLoggerProvider","IS_BUSINESS_MANAGER",function(a,b){a.setDisableAutoLoadFinish();var c="invoices",d="settings",e=b&&location.pathname.split("/").filter(function(a){return a}).pop()===d?c+"-"+d:c;a.setAppName(e)}]).run(["fedopsLoggerFactory","IS_BUSINESS_MANAGER",function(a,b){b||a.createWidget("invoices").appLoadStarted()}]).run(["frameworkFacade",function(a){window.ModuleRegistry.notifyListeners("businessManager.viewStartLoading"),a.initializeBuiltinAppForDashboardSdk("quotes"),a.setHelpArticle("/article/about-wix-invoices")}]).run(["$rootScope","$mdDialog","mutationObserver",function(a,b,c){a.$on("$destroy",function(){return $(".wix-modal").remove()}),a.$on("$routeChangeSuccess",function(){b.cancel()});var d=angular.element("[data-hook=shared-toast]")[0];d&&new c(function(b){b.some(function(a){return a.removedNodes.length>0})&&a.$broadcast("offsetChange")}).observe(d,{childList:!0})}]).run(["$rootScope","$location","wixBiLogger","IS_BUSINESS_MANAGER",function(a,b,c,d){a.$on("$routeChangeSuccess",function(a,d,e){var f=d.$$route.biPageName;if((!e||e.$$route.biPageName!==f)&&f){var g={name:f,origin:e&&e.$$route.biPageName,place:b.search().referrer};c.log("PAGE_VIEW",g)}})}]).run(["$locale","localeDataRef",function(a,b){b.lang=a.id,"ja"===a.id&&angular.extend(a.DATETIME_FORMATS,{"MMMM yyyy":"y年M月"})}]).run(["$route",function(a){a.reload()}]).run(["$$testability","fedopsLogger","$injector",function(a,b,c){var d=!(c.has("IS_PREVIEW")&&c.get("IS_PREVIEW"));a.whenStable(function(){window.ModuleRegistry.notifyListeners("businessManager.viewFinishedLoading"),d&&b&&b.isDisableAutoLoadFinish()&&b.appLoaded()})}])}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$document=a,a.find("body").attr("app","quotes"),b.$on("$destroy",function(){a.find("body").removeAttr("app")})}return a.$inject=["$document","$rootScope"],a}();angular.module("quotesAppInternal").component("invoicesApp",{templateUrl:"modules/quotes/main/main.html",controller:b})}(invoices||(invoices={}));try{angular.module("quoteCommon")}catch(a){angular.module("quoteCommon",[])}angular.module("quoteCommon").run(["$templateCache",function(a){"use strict";a.put("modules/quotes/main/main.html","<div class='wrapper' fixed-offset='{&quot;height&quot;: &quot;calc(100vh - $y)&quot;}' ng-controller='MainController as main' wix-dashboard-app>\n<nav class='wix-nav custom is-skin-blue' data-hook='quotes-left-nav'>\n<header>\n<div class='icon'>\n<a data-hook='sidebar-ft' ng-href='{{main.buildLink(&#39;&#39;)}}?referrer=logo'>\n<div class='quotes-svg-font-icons-app-icon'></div>\n</a>\n&nbsp;\n</div>\n<div class='app-name'></div>\n</header>\n<ul>\n<a data-hook='sidebar-quotes' ng-href='{{main.buildLink(&#39;quotes/list&#39;)}}?referrer=sidebar'>\n<li ng-class='{ selected: main.isActive(&#39;quotes/&#39;) }'>{{ 'nav.quotes' | translate }}</li>\n</a>\n<a data-hook='sidebar-products' ng-href='{{main.buildLink(&#39;products/list&#39;)}}?referrer=sidebar'>\n<li ng-class='{ selected: main.isActive(&#39;products/list&#39;) }'>{{ 'nav.products' | translate }}</li>\n</a>\n<a data-hook='sidebar-reports' ng-href='{{main.buildLink(&#39;reports&#39;)}}?referrer=sidebar'>\n<li ng-class='{ selected: main.isActive(&#39;reports&#39;)}'>{{ 'nav.reports' | translate }}</li>\n</a>\n<a data-hook='sidebar-settings' ng-href='{{main.buildLink(&#39;settings&#39;)}}?referrer=sidebar'>\n<li ng-class='{ selected: main.isActive(&#39;settings&#39;) }'>{{ 'nav.settings' | translate }}</li>\n</a>\n<a data-hook='sidebar-payments' ng-href='{{main.buildLink(&#39;payments&#39;) + &#39;?referrer=sidebar&#39; | isPermitted:&#39;maPermissionPayments&#39;: &#39;&#39;}}'>\n<li ng-class='{ selected: main.isActive(&#39;payment&#39;)}'>\n<span append-to-body='true' class='add-width' max-width='200px' placement='right' tooltip-enable='{{false |  isPermitted:&#39;maPermissionPayments&#39;: true}}' wix-tooltip='{{&#39;quotes_contributor_disable_payments&#39; | translate}}'>{{ 'nav.payments' | translate }}</span>\n</li>\n</a>\n</ul>\n<footer>\n<div class='wix-nav-footer-item'>\n<div class='footer-item'>\n<a data-hook='help-link' ng-href='{{main.supportLink()}}' target='_blank'>\n<i class='quotes-svg-font-icons-help'></i>\n{{ 'nav.help' | translate }}\n</a>\n</div>\n</div>\n<div class='wix-nav-footer-item'>\n<div class='footer-item feedback'>\n<a append-to-body='true' data-hook='feedback-link' ng-href='https://docs.google.com/forms/d/1Hxg_2nid2Y3XdeCVx5uD_dljXLxL2s6kyFOUUOXHj5w/viewform' target='_blank' wix-tooltip='{{&#39;nav.feedback_tooltip&#39; | translate}}'>\n{{ 'nav.feedback' | translate }}\n</a>\n</div>\n</div>\n</footer>\n</nav>\n<div breakpoint-header='30' class='content-wrapper' ng-if='!main.IS_BUSINESS_MANAGER' on-near-bottom='main.onScrollNearBottom()' scroll-breakpoint scroll-content-top>\n<banner-container banner-key='{{main.BANNER_KEYS.PAYMENTS}}' class='payments-banner' dismissal-bi-params='main.paymentsBannerDismissalBiParams' show-bi-params='main.paymentsBannerShowBiParams'>\n<payments-banner></payments-banner>\n</banner-container>\n<banner-container banner-key='{{main.BANNER_KEYS.MOBILE}}' class='mobile-banner'>\n<mobile-banner></mobile-banner>\n</banner-container>\n<article class='content no-animate' ng-view></article>\n</div>\n<div breakpoint-header='30' breakpoint-products='84' breakpoint-quotes='221' class='content-wrapper is-business-manager' experiment-values='{&#39;true&#39;: &#39;sticky-experiment&#39;}' fixed-offset='{&quot;height&quot; : &quot;calc(100vh - 20px - $y)&quot;}' ng-if='main.IS_BUSINESS_MANAGER' on-near-bottom='main.onScrollNearBottom()' scroll-breakpoint scroll-content-top wix-experiment-class='specs.wos.businessManagerPhase4'>\n<banner-container banner-key='{{main.BANNER_KEYS.PAYMENTS}}' class='payments-banner' dismissal-bi-params='main.paymentsBannerDismissalBiParams' show-bi-params='main.paymentsBannerShowBiParams'>\n<payments-banner></payments-banner>\n</banner-container>\n<banner-container banner-key='{{main.BANNER_KEYS.MOBILE}}' class='mobile-banner'>\n<mobile-banner></mobile-banner>\n</banner-container>\n<article class='content no-animate' ng-view></article>\n</div>\n</div>\n")}]),angular.module("quotesAppInternal").value("COMMANDS",{CREATE_QUOTE:"CreateQuote",SEND_QUOTE:"SendQuoteToCustomer",UPDATE_QUOTE:"UpdateQuote",DELETE_QUOTE:"DeleteQuote",VOID_QUOTE:"VoidQuote",MARK_QUOTE_AS_PAID:"MarkQuoteAsPaid",CREATE_PRODUCT:"CreateProduct",UPDATE_PRODUCT:"UpdateProduct",DELETE_PRODUCT:"DeleteProduct",CREATE_TAX:"CreateTax",UPDATE_TAX:"UpdateTax",DELETE_TAX:"DeleteTax",ADD_PARTIAL_PAYMENT:"AddPartialPayment"}),angular.module("quoteCommon").constant("quoteNumberMaxLength",10).constant("quoteNumberPadding",7).constant("quotesPageSize",30).constant("quotesInstanceTTL",6e5).constant("maximumProductPrice",1e12).factory("defaultRoundingMode",function(){return Decimal.ROUND_HALF_DOWN}),angular.module("quotesAppInternal").value("SERVER_ERRORS",{DUPLICATE_QUOTE_ID:5}),angular.module("quoteCommon").value("QUOTE_STATUS",{VOID:"Void",DRAFT:"Draft",SENT:"Sent",PAID:"Paid",OVERDUE:"Overdue",PROCESSING:"Processing",PARTIALLYPAID:"PartiallyPaid",PARTIAL_AND_OVERDUE:"PartialAndOverdue"}),angular.module("quotesAppInternal").constant("DIALOG_REASONS",{CANCEL:"CANCEL",BLUR:"BLUR",ERROR:"ERROR",CONFIRM:"CONFIRM",CLOSE:"CLOSE"}),angular.module("quotesAppInternal").value("ON_BOARDING_PROGRESS",{FIRST_TIME:0,BASIC_INFO:1,PAYMENT:2,EMPTY_EXPERIENCE:3,DONE:-1});var invoices;!function(a){var b=function(){function a(){this.eventMap={};var b;for(b in a.eventCodes)"number"==typeof a.eventCodes[b]&&this.defineBIEvent(b,a.eventCodes[b])}return a.prototype.defineBIEvent=function(a,b){this[a]=a,this.eventMap[a]={evid:b}},a.prototype.getEventMap=function(){return this.eventMap},a.prototype.buildEvent=function(b,c){return _.merge({src:a.src,evid:a.eventCodes[b]},c)},a.src=5,a.eventCodes={PAGE_VIEW:400,ON_BOARDING:401,PAYMENT_SELECT:402,INVOICE_NEW:403,INVOICE_SEND_BUTTON:404,INVOICE_SEND_CANCEL:405,INVOICE_VIEW:406,CHANGE_VALUE:407,INVOICE_SAVE_DRAFT_BUTTON:408,INVOICE_DRAFT_SAVE_COMPLETE:409,INVOICE_DRAFT_SAVE_FAILED:410,INVOICE_EDIT_CANCEL:411,INVOICE_ADD_LINE:412,INVOICE_REMOVE_LINE:413,PRODUCT_NEW:414,PRODUCT_SAVE:415,PRODUCT_CANCEL:416,PRODUCT_EDIT:417,PRODUCT_DELETE_DIALOG:418,PRODUCT_DELETE_DIALOG_CONFIRM:419,PRODUCT_DELETE_DIALOG_CANCEL:420,INVOICE_EDIT:421,INVOICE_PREVIEW:422,INVOICE_PRINT:423,INVOICE_ADD_PAYMENT_DIALOG:424,INVOICE_ADD_PAYMENT_DIALOG_CONFIRM:425,INVOICE_ADD_PAYMENT_DIALOG_CANCEL:426,INVOICE_VOID_DIALOG:427,INVOICE_VOID_DIALOG_CONFIRM:428,INVOICE_VOID_DIALOG_CANCEL:429,INVOICE_DELETE_DIALOG:430,INVOICE_DELETE_DIALOG_CONFIRM:431,INVOICE_DELETE_DIALOG_CANCEL:432,TAX_NEW:433,TAX_SAVE:434,TAX_CANCEL:435,TAX_EDIT:436,TAX_DELETE:437,TAX_DELETE_CONFIRM:438,TAX_DELETE_CANCEL:439,PAYMENT_ACTIONS_POPUP:440,PAYMENT_ACCOUNT_CONNECT:441,PAYMENT_ACCOUNT_CREATE:442,INVALID_PAYPAL_ACCOUNT_POPUP:443,INVALID_PAYPAL_ACCOUNT_POPUP_CLOSE:444,INVALID_PAYPAL_ACCOUNT_POPUP_LINK:445,INVOICES_SORT:446,INVOICES_FILTER:447,INVOICES_SEARCH:448,DOWNLOAD_PDF:449,RUN_REPORT:451,PRINT_REPORT:452,EXPORT_REPORT:453,MANAGE_PAYMENTS:455,DISMISS_MANAGE_PAYMENTS:456,CLICK_MANAGE_PAYMENTS:457,INVOICE_VIEW_SOURCE:458},a}();a.QuotesBiEvents=b,angular.module("quoteCommon").constant("quotesBiEvents",new b)}(invoices||(invoices={})),angular.module("quotesRoute").constant("routes",{MY_QUOTES:"quotes/list",PRODUCTS:"products/list",SETTINGS:"settings",PAYMENTS:"payments",EDIT_QUOTE:"quotes/:quoteId/edit",CREATE_QUOTE:"quotes/create",DUPLICATE_QUOTE:"quotes/:quoteId/duplicate",PAYPAL_SUCCESS:"paypal-success",PREVIEW:"quotes/:quoteId/preview",REPORTS:"reports",TAX_SUMMARY:"reports/taxsummary",REVENUE_SUMMARY:"reports/revenuesummary"}),angular.module("quotesAppInternal").factory("STORAGE_OPTIONS",["frameworkFacade",function(a){return{siteId:a.getSiteId(),namespace:"wix-invoices",noCache:!0}}]),angular.module("quotesAppInternal").value("EDIT_CONTACT_MODAL_OPTIONS",{createHeader:"quote.customer.create",editHeader:"quote.customer.edit",includedFields:["address","phone"],excludedFields:["groups","note"],requiredFields:["email"],atMinimumFields:[],origin:"quotes"});var invoices;!function(a){var b=function(){function a(){}return a.EDIT="edit",a.PREVIEW="preview",a.SEND="send",a.PRINT="print",a.REMOVE="remove",a.RESEND="resend",a.VOID="void",a.ADD_PAYMENT="pay",a.DOWNLOAD_PDF="pdf",a.DUPLICATE="duplicate",a.VIEW_SOURCE="viewSource",a}();a.ActionNames=b}(invoices||(invoices={})),angular.module("quoteCommon").factory("commonsValidator",["$window",function(a){return a.CommonsValidator}]),angular.module("quotesAppInternal").factory("jsondiffpatch",["$window",function(a){return a.jsondiffpatch}]).factory("saveAs",["$window",function(a){return a.saveAs}]).factory("papa",["$window",function(a){return a.Papa}]).factory("mutationObserver",["$window",function(a){return a.MutationObserver||a.WebKitMutationObserver||a.MozMutationObserver}]),angular.module("quotesAppInternal").factory("BZM_NAV",["frameworkFacade",function(a){return{HOME:{moduleId:a.wixAppIds.wixECommerce,contextData:{appState:"dashboard"}},BUSINESS_INFO:{moduleId:a.wixAppIds.generalInfo},PAYMENTS:{moduleId:a.wixAppIds.cashier},SETTINGS:{moduleId:a.wixAppIds.invoices,contextData:{appState:"settings?referrer=top more actions"}},STORE_SETTINGS:{moduleId:a.wixAppIds.wixECommerce,contextData:{appState:"settings"}},INVOICES:{moduleId:a.wixAppIds.invoices},BACK_TO_INVOICES:{text:"",buttonText:"nav.back_to_invoices.button_text"}}}]),angular.module("quotesAppInternal").value("BANNER_KEYS",{MOBILE:"showMobileBanner",PAYMENTS:"showPaymentsBanner"});var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},invoices;!function(a){var b=function(a){return a.replace(/quotes/g,"invoices")},c=function(a){return"string"==typeof a?b(a):Object.keys(a).reduce(function(c,d){var e;return __assign({},c,(e={},e[d]=b(a[d]),e))},{})};angular.module("quotesRoute").constant("routeMigrator",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.$scope=a,this.$timeout=b,this.quotesRoute=c,this.$location=d,this.frameworkFacade=e,this.$locale=f,this.IS_BUSINESS_MANAGER=g,this.BANNER_KEYS=h,this.banners=i,this.paymentsBannerDismissalBiParams=["DISMISS_MANAGE_PAYMENTS",{name:"manage payments"}],this.paymentsBannerShowBiParams=["MANAGE_PAYMENTS",{name:"manage payments"}]}return a.$inject=["$scope","$timeout","quotesRoute","$location","frameworkFacade","$locale","IS_BUSINESS_MANAGER","BANNER_KEYS","banners"],a.prototype.isActive=function(a){return this.$location.path().indexOf(this.quotesRoute.getPagePostfix(a))>-1},a.prototype.buildLink=function(a){return this.quotesRoute.buildLink(a)},a.prototype.navigateTo=function(a){return this.quotesRoute.navigateToQuote(a)},a.prototype.mobileView=function(){return this.frameworkFacade.isMobileUser()},a.prototype.supportLink=function(){var a=this.$locale.id;return"https://support.wix.com/en/articles/id/84e2f182-99e9-4756-b3de-8be15f41c50f"+(-1!==["de","es","fr","it","ja","ko","pt","ru"].indexOf(a)?"?locale="+a:"")},a.prototype.onScrollNearBottom=function(){this.$scope.$broadcast("scroll-near-bottom")},a}();a.MainController=b,angular.module("quotesAppInternal").controller("MainController",b)}(invoices||(invoices={}));var invoices;!function(a){var b="0.00%",c="percentage",d="fixed",e=function(){function e(e,f){this.isoCurrencyFilter=e,this.$timeout=f,this.placeholder=b,this.discount instanceof a.PercentageDiscount?(this.type=c,this.amount=this.discount.rate):(this.type=d,this.amount=this.discount.amount)}return e.$inject=["isoCurrencyFilter","$timeout"],e.prototype.setPercentActive=function(){this.type=c,this.placeholder=b,this.notifyParent()},e.prototype.setCurrencyActive=function(){this.type=d,this.placeholder=this.isoCurrencyFilter(0,this.currency),this.notifyParent()},e.prototype.onChange=function(){this.notifyParent()},e.prototype.notifyParent=function(){var a=this
;this.$timeout(function(){a.isValid()&&(a.absoluteDiscount(),a.setDiscount({val:a.getDiscount()}))})},e.prototype.getMax=function(){return this.type===c?100:null},e.prototype.getMin=function(){return this.type===c?0:null},e.prototype.absoluteDiscount=function(){null===this.amount||isNaN(this.amount)||(this.amount=Math.abs(this.amount))},e.prototype.isValid=function(){var a=this.getMin()<=this.amount&&this.amount<=this.getMax();return"fixed"===this.type||a},e.prototype.getDiscount=function(){var b=this,d=b.amount;return b.type===c?new a.PercentageDiscount(d):new a.FixedDiscount(d)},e}();a.Discount=e,angular.module("quotesAppInternal").component("discount",{templateUrl:"modules/quotes/quote/discount/discount.preload.html",controller:e,bindings:{currency:"<",discount:"<",setDiscount:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E){var F=this;this.originalQuoteId=d,this.$translate=e,this.$scope=f,this.$rootScope=g,this.$location=h,this.quote=i,this.quotesApi=j,this.routes=k,this.quotesRoute=l,this.actions=m,this.productsApi=n,this.taxesApi=o,this.taxDialog=p,this.taxes=q,this.comparator=r,this.productDialog=s,this.dialogs=t,this.notifications=u,this.wixBiLogger=v,this.onBeforeUnload=w,this.LineItem=x,this.wixDebounce=y,this.emailValidator=z,this.QUOTE_STATUS=A,this.selectedProductsForQuote=B,this.delay=C,this.IS_BUSINESS_MANAGER=D,this.experimentManager=E,this._cachedTaxes={},this.redirectToList=function(){F.locationChangeListenerDisabler(),F.$location.url(F.quotesRoute.getPagePostfix(F.routes.MY_QUOTES))},this.addDayClass=function(a){var b=a.date;return b?"day-"+b.getDate()+b.getMonth()+b.getYear():""},this.isCreate="create"===a,b&&(i.customer.contactId=b),this.setValidators(),this.isCreate?(c&&(this.quote.quoteNumber=c),this.quoteSave=this.quoteCreator()):this.quoteSave=this.quoteUpdater(),this.save=this.wixDebounce(this.save,1e3,!0),this.oldQuote=this.quote.copy(),this.fetchTaxes(),f.$on("$routeChangeSuccess",function(a,b,c){if(F.selectedProductsForQuote.get()&&(F.quote.lineItems.pop(),F.selectedProductsForQuote.get().forEach(function(a){var b=F.createLineItemFromProduct(a);F.quote.addLine(b)}),F.selectedProductsForQuote.delete()),F.isCreate){var d=F.getBiOrigin(c);F.biLogCreate(d)}}),this.locationChangeListenerDisabler=f.$on("$locationChangeStart",function(a,b){F.isDirty()&&(F.confirmationDialog().then(function(){w.beforeUnload(angular.noop),F.locationChangeListenerDisabler(),F.$location.$$parse(b),F.biLogCancelEdit()}),a.preventDefault())});var G=window.ModuleRegistry.addListener("businessManager.onNavigation",function(a,b){F.isDirty()&&(a(),F.confirmationDialog().then(function(){F.unregisteronNavigation(),F.onBeforeUnload.beforeUnload(angular.noop),F.locationChangeListenerDisabler(),b(),F.biLogCancelEdit()}))}).remove;this.unregisteronNavigation=G,w.beforeUnload(function(){if(F.isDirty())return F.$translate("quote.leavepage.note_alert")})}return b.$inject=["action","customerId","nextNumber","originalQuoteId","$translate","$scope","$rootScope","$location","quote","quotesApi","routes","quotesRoute","actions","productsApi","taxesApi","taxDialog","taxes","comparator","productDialog","dialogs","notifications","wixBiLogger","onBeforeUnload","LineItem","wixDebounce","emailValidator","QUOTE_STATUS","selectedProductsForQuote","delay","IS_BUSINESS_MANAGER","experimentManager"],b.prototype.$onDestroy=function(){this.unregisteronNavigation(),this.onBeforeUnload.beforeUnload(angular.noop),this.locationChangeListenerDisabler()},b.prototype.confirmationDialog=function(){return this.dialogs.openConfirmNavigationDialog()},b.prototype.updateQuoteNumber=function(a){this.quote.quoteNumber=a},b.prototype.isDirty=function(){return 0!==this.lineItemsLengthDiff()||this.$scope.quoteForm&&this.$scope.quoteForm.$dirty},b.prototype.lineItemsLengthDiff=function(){return this.quote.lineItems.length-this.oldQuote.lineItems.length},b.prototype.setValidators=function(){var a=this;this.validators=[function(){return a.getTotal().toDecimal().lt(0)?"invalid_total_error":null},function(){return a.getBalance().toDecimal().lt(0)?"invalid_balance_error":null},function(){if(a.quote.customer.contactId)return a.emailValidator.validateEmail(a.quote.customer.email)?null:"invalid_email_error"}]},b.prototype.setLineItemProduct=function(a,b){a.name=b.name,a.description=b.description&&b.description.replace(/(?:\r\n|\r|\n)/g," "),a.setPrice(b.price)},b.prototype.createLineItemFromProduct=function(a){var b=new this.LineItem;return this.setLineItemProduct(b,a),b.quantity=1,b},b.prototype.quoteUpdater=function(){var a=this;return function(){a.prepareForSaving();var b=a.comparator.compare(a.oldQuote,a.quote);return a.quotesApi.updateQuote(a.quote.quoteId,a.quote.version,b)}},b.prototype.quoteCreator=function(){var a=this;return function(){a.prepareForSaving();var b=a.quote.serialize();return a.quotesApi.createQuote(b)}},b.prototype.prepareForSaving=function(){this.quote.dueDate.setHours(23,59,0,0)},b.prototype.filterProductsByName=function(a,b){return void 0===a&&(a=""),b.filter(function(b){return b.name.toLowerCase().indexOf(a.toLowerCase())>-1})},b.prototype.fetchTaxes=function(){var b=this;this.taxesApi.listTaxes().then(function(c){b.taxesList=c.map(function(b){return delete b.taxId,new a.Tax(b)})})},b.prototype.setAction=function(a){this.formAction=a},b.prototype.notifyError=function(a){var b=this,c="error";switch(a){case"invalid_balance_error":this.notifications.showTranslated("quote.form.invalid_balance_error",{type:c,withCloseButton:!0,action:function(){return b.undo()}});break;case"invalid_email_error":this.notifications.showTranslated("quote.form.invalid_email_error_edit_customer",{type:c,withCloseButton:!0,action:function(){return b.openEditContactDialog()}});break;default:this.notifications.showTranslated("quote.form."+a,{type:c})}},b.prototype.submitForm=function(){var a=this.validators.map(function(a){return a()}).find(function(a){return null!=a});a?this.notifyError(a):this.isFormValid()&&this.formAction&&this.formAction()},b.prototype.isFormValid=function(){return this.$scope.quoteForm.$valid},b.prototype.addLine=function(){return this.biLogAddLine(),this.quote.addLine()},b.prototype.removeLine=function(a){this.biLogRemoveLine(),this.quote.removeLine(a)},b.prototype.getLineItemTotal=function(a){return this.quote.getLineItemTotal(a)},b.prototype.getTotal=function(){return this.quote.getTotal()},b.prototype.getBalance=function(){return this.getTotal().minus(this.quote.getAmountPaid())},b.prototype.onSetDiscount=function(a){this.quote.discount=a},b.prototype.getTaxes=function(){var a=this.quote.getTaxesByName();return angular.equals(this._cachedTaxes,a)||(this._cachedTaxes=a),this._cachedTaxes},b.prototype.getSubtotal=function(){return this.quote.getSubtotal()},b.prototype.showSubtotal=function(){var a=this.showDiscount(),b=!angular.equals(this.quote.getTaxesByName(),[]),c=this.quote.lineItems.length>1;return a||b||c},b.prototype.discountAmount=function(){return this.quote.getDiscount()},b.prototype.showDiscount=function(){return this.experimentManager.isExperimentEnabled("specs.crm.InvoicesFixedDiscount")?this.quote.discount instanceof a.PercentageDiscount?this.quote.discount.rate>0:this.quote.discount instanceof a.FixedDiscount?this.quote.discount.amount>0:void 0:this.quote.discountRate>0},b.prototype.showPercentageDiscount=function(){return this.quote.discount instanceof a.PercentageDiscount},b.prototype.showFixedDiscount=function(){return this.quote.discount instanceof a.FixedDiscount},b.prototype.save=function(){var a=this;this.biLogSaveDraft(),this.quoteSave().then(this.dialogs.showNotificationSuccess("save_quote_notification.success")).then(this.delay).then(function(){a.redirectToList(),a.biLogSaveComplete(!0)}).catch(function(b){return a.biLogSaveComplete(!1,b),a.dialogs.showNotificationOnError("send_dialog.notification.error")(b)})},b.prototype.saveAndSend=function(a){var b=this;this.biLogSaveDraft(),this.isAnyModalOpen||(this.isAnyModalOpen=!0,this.biLogSend(a),this.actions.saveAndSend(this.quote,this.quoteSave).then(this.delay).then(function(){b.redirectToList(),b.biLogSaveComplete(!0)}).catch(function(){b.isAnyModalOpen=!1,b.biLogCancelSend(a)}))},b.prototype.preview=function(){var a=this;if(!this.isAnyModalOpen){this.isAnyModalOpen=!0;var b=this.comparator.compare(this.oldQuote,this.quote);this.quotesApi.simulateUpdate(this.quote.quoteId,b).then(function(b){return a.actions.preview(b,!0)}).then(function(b){return a.isAnyModalOpen=!1,"send"===b?a.saveAndSend("preview"):"print"===b?a.print():void 0}).catch(function(){a.isAnyModalOpen=!1})}},b.prototype.print=function(){this.actions.print(this.quote.serialize())},b.prototype.searchProducts=function(a){var b=this;return this.productsApi.listProducts().then(function(c){return b.filterProductsByName(a,c)})},b.prototype.setCurrentProduct=function(a,b){b?(this.setLineItemProduct(a,b),a.quantity=1):(a.description=void 0,a.setPrice(0),a.quantity=1)},b.prototype.setCurrentTax=function(a,b,c){b&&(a.taxes[c]=b)},b.prototype.createTax=function(b,c){var d=this;return this.biLogNewTaxClick(),this.taxDialog.open(new a.Tax).then(function(a){return d.taxes.save(a).then(function(){d.setCurrentTax(b,a,c),d.fetchTaxes()})})},b.prototype.createNewProduct=function(a){var b=this,c=this.productFromLineItem(a);return this.biLogNewProductClick(),this.productDialog.open(this.quote.currency,c,!0).then(function(a){return b.productsApi.create(a.serialize()),b.wixBiLogger.log("PRODUCT_SAVE",{origin:"create"}),a}).then(function(c){return b.setCurrentProduct(a,c)}).catch(function(){b.wixBiLogger.log("PRODUCT_CANCEL",{origin:"create"})})},b.prototype.undo=function(){var a=this.quote.customer;angular.extend(this.quote,this.oldQuote.copy()),this.quote.customer=a},b.prototype.openEditContactDialog=function(){this.$rootScope.$broadcast("openEditContactDialog")},b.prototype.isCustomerLocked=function(){var a=this;return[this.QUOTE_STATUS.PARTIALLYPAID,this.QUOTE_STATUS.PARTIAL_AND_OVERDUE].some(function(b){return b===a.quote.status})},b.prototype.productFromLineItem=function(b){var c=new a.Product;return b.name&&(c.name=b.name),b.description&&(c.description=b.description),b.price&&!b.price.isZero()&&(c.price=b.price.toString()),c},b.prototype.biLogCreate=function(a){var b=angular.extend({originalInvoiceId:this.originalQuoteId},this.getSaveBiParams(a));this.wixBiLogger.log("INVOICE_NEW",b)},b.prototype.biLogCancelEdit=function(){this.wixBiLogger.log("INVOICE_EDIT_CANCEL",this.getSaveBiParams())},b.prototype.biLogSaveDraft=function(){this.wixBiLogger.log("INVOICE_SAVE_DRAFT_BUTTON",this.getSaveBiParams())},b.prototype.biLogSaveComplete=function(a,b){var c;c=a?"INVOICE_DRAFT_SAVE_COMPLETE":"INVOICE_DRAFT_SAVE_FAILED";var d=this.getSaveBiParams();b&&b.statusText&&(d.reason=b.statusText),this.wixBiLogger.log(c,d)},b.prototype.biLogSend=function(a){this.wixBiLogger.log("INVOICE_SEND_BUTTON",this.getSendBiParams(a))},b.prototype.biLogCancelSend=function(a){this.wixBiLogger.log("INVOICE_SEND_CANCEL",this.getSendBiParams(a))},b.prototype.biLogAddLine=function(){this.wixBiLogger.log("INVOICE_ADD_LINE",this.getSaveBiParams())},b.prototype.biLogRemoveLine=function(){this.wixBiLogger.log("INVOICE_REMOVE_LINE",this.getSaveBiParams())},b.prototype.biLogNewProductClick=function(){this.wixBiLogger.log("PRODUCT_NEW",{origin:this.getBiPageState()})},b.prototype.biLogNewTaxClick=function(){this.wixBiLogger.log("TAX_NEW",{origin:this.getBiPageState()})},b.prototype.getSendBiParams=function(a){return{origin:a||this.getBiPageState(),invoice_id:this.quote.quoteId,resend:"Sent"===this.quote.status}},b.prototype.getSaveBiParams=function(a){return{invoice_id:this.quote.quoteId,origin:a||this.getBiPageState()}},b.prototype.getBiOrigin=function(a){var b=a&&a.$$route.biPageName,c=this.$location.search().referrer,d=c||b;return"ex"===c&&void 0===b&&"wizard"===a.$$route.controllerAs&&(d="onboarding"),d},b.prototype.getBiPageState=function(){return(this.isCreate?"create":"edit")+" invoice"},b}();a.QuoteController=b,angular.module("quotesAppInternal").controller("QuoteController",b)}(invoices||(invoices={}));var __assign=this&&this.__assign||Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a},invoices;!function(a){var b=function(){function a(a){this.configuration=__assign({},a.getCashierConfig(),{appCurrency:this.userCurrency,customPaymentsTitle:this.optionalTitle})}return a.$inject=["paymentsApi"],a}();a.PaymentsController=b,angular.module("quotesAppInternal").controller("PaymentsController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j,k){var l=this;this.productsList=a,this.products=b,this.productDialog=c,this.$route=d,this.settings=e,this.onBoarding=f,this.dialogs=g,this.wixBiLogger=h,this.selectedProductsForQuote=i,this.IS_BUSINESS_MANAGER=j,this.delay=k,this.selectedProducts=new Set,f.isOnboardingComplete().then(function(a){l.isOnboardingComplete=a})}return b.$inject=["productsList","products","productDialog","$route","settings","onBoarding","dialogs","wixBiLogger","selectedProductsForQuote","IS_BUSINESS_MANAGER","delay"],b.prototype.openProductDialog=function(b){var c=this,d=!b,e=new a.Product;e.deserialize(b);var f=e.copy();return this.biLogProductDialog(d),this.productDialog.open(this.settings.currency,e,d).then(function(a){return c.products.save(a,f)}).then(this.delay).then(function(){return c.$route.reload()}).catch(function(){c.wixBiLogger.log("PRODUCT_CANCEL",{origin:d?"create":"edit"})})},b.prototype.openProductDelete=function(b){var c=this,d=new a.Product;return d.deserialize(b),this.dialogs.openDeleteProductDialog().then(function(){return c.products.deleteProduct(d)}).then(this.delay).then(function(){return c.$route.reload()}).then(function(){return c.wixBiLogger.log("PRODUCT_DELETE_DIALOG_CONFIRM",{})}).catch(function(b){return c.wixBiLogger.log("PRODUCT_DELETE_DIALOG_CANCEL",{}),c.dialogs.showNotificationOnError(a.DeleteProductDialog.errorKey)(b)})},b.prototype.toggle=function(a){this.selectedProducts.has(a)?this.selectedProducts.delete(a):this.selectedProducts.add(a)},b.prototype.createQuoteWithProducts=function(){this.selectedProductsForQuote.set(this.selectedProducts)},b.prototype.biLogProductDialog=function(a){a?this.wixBiLogger.log("PRODUCT_NEW",{origin:this.productsList.length?"product page":"empty experience"}):this.wixBiLogger.log("PRODUCT_EDIT",{})},b}();a.ProductListController=b,angular.module("quotesAppInternal").controller("ProductListController",b)}(invoices||(invoices={}));var ProductController=function(){function a(a,b,c,d,e){this.$mdDialog=a,this.product=b,this.currency=c,this.isNewProduct=d,this.maximumProductPrice=e}return a.$inject=["$mdDialog","product","currency","isNewProduct","maximumProductPrice"],a.prototype.save=function(){return this.$mdDialog.hide(this.product)},a.prototype.cancel=function(){return this.$mdDialog.cancel()},a}();angular.module("quotesAppInternal").controller("ProductController",ProductController);var invoices;!function(a){var b=function(){function a(b,c,d,e,f){this.$mdDialog=c,this.customerEmail=d;var g=f||e,h=f?f+"\n"+e:""+e,i=b(a.EMAIL_BODY,{contact:g}),j=b(a.EMAIL_SIGNATURE,{contactDetails:h});this.emailBody=i+"\n\n"+j,this.emailSubject=b(a.EMAIL_SUBJECT,{contact:g})}return a.$inject=["$translate","$mdDialog","customerEmail","companyEmail","companyName"],a.prototype.send=function(){return this.$mdDialog.hide({emailSubject:this.emailSubject,emailMessage:this.emailBody})},a.prototype.cancel=function(){return this.$mdDialog.cancel()},a.EMAIL_BODY="send_dialog.content.body",a.EMAIL_SIGNATURE="send_dialog.content.best_regards",a.EMAIL_SUBJECT="send_dialog.content.subject",a}();a.SendDialogController=b,angular.module("quotesAppInternal").controller("SendDialogController",b)}(invoices||(invoices={}));var ConfirmDialog=function(){function a(a){this.$mdDialog=a}return a.$inject=["$mdDialog"],a.prototype.cancel=function(){return this.$mdDialog.cancel()},a.prototype.confirm=function(){return this.$mdDialog.hide()},a}();angular.module("quotesAppInternal").controller("ConfirmDialogController",ConfirmDialog);var invoices;!function(a){var b=function(){function a(a){this.$mdDialog=a}return a.$inject=["$mdDialog"],a.prototype.close=function(){return this.$mdDialog.hide()},a}();a.SimpleDialogController=b,angular.module("quotesAppInternal").controller("SimpleDialogController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i,j){var k=this;this.wixModal=a,this.$window=b,this.$scope=c,this.quote=d,this.editMode=e,this.quotesRoute=f,this.actions=g,this.DIALOG_REASONS=h,this.wixBiLogger=i,this.experimentManager=j,c.$on("$routeChangeStart",function(){k.cancel()})}return b.$inject=["wixModal","$window","$scope","quote","editMode","quotesRoute","actions","DIALOG_REASONS","wixBiLogger","experimentManager"],b.prototype.send=function(){return this.wixModal.close("send")},b.prototype.paid=function(){return this.wixModal.close("paid")},b.prototype.pay=function(){return this.wixModal.close("pay")},b.prototype.cancel=function(){return this.wixModal.close(this.DIALOG_REASONS.CANCEL)},b.prototype.print=function(){this.wixBiLogger.log("INVOICE_PRINT",{invoice_id:this.quote.quoteId,origin:"preview"}),this.$window.print()},b.prototype.edit=function(){var a=this.quote.quoteId;this.quotesRoute.navigateToQuote(a),this.cancel(),this.wixBiLogger.log("INVOICE_EDIT",{invoice_id:a,origin:"preview"})},b.prototype.isEditButtonShown=function(b){return!this.editMode&&this.actions.isActionShown(b,a.ActionNames.EDIT)},b.prototype.isPaidButtonShown=function(b){return!this.editMode&&this.actions.isActionShown(b,a.ActionNames.ADD_PAYMENT)},b.prototype.shouldDisplayButtonStrip=function(){return!0},b}();a.UserQuotePreviewDialogController=b,angular.module("quotesAppInternal").controller("UserQuotePreviewDialogController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f){var g=this;this.wixModal=a,this.quote=b,this.printService=e,this.matchmedia=f,this.afterPrinting(function(){return g.closeModal()}),window.onafterprint=function(){return g.closeModal()},c.$on("QUOTE_PREVIEW_LOADED",function(){d(function(){e.print()},0)})}return a.$inject=["wixModal","quote","$scope","$timeout","printService","matchmedia"],a.prototype.afterPrinting=function(a){var b=!1,c=this.matchmedia.onPrint(function(d){var e=d.matches;e&&(b=e),!e&&b&&(c(),a())})},a.prototype.closeModal=function(){this.wixModal.close("printed")},a.prototype.shouldDisplayButtonStrip=function(){return!1},a}();angular.module("quotesAppInternal").controller("PrintDialogController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f){this.$document=a,this.$rootScope=b,this.$translate=c,this.$compile=d,this.$timeout=e,this.IS_BUSINESS_MANAGER=f,this.wrapperSelector="app=quotes",this.waitBeforeAppend=50,this.animationDuration=300,this.defaultProps={type:"success",withCloseButton:!1,hideAfter:4500}}return b.$inject=["$document","$rootScope","$translate","$compile","$timeout","IS_BUSINESS_MANAGER"],b.prototype.showTranslated=function(a,b){var c=this.$translate(a);return this.show(c,b)},b.prototype.show=function(a,b){var c=Object.assign({},this.defaultProps,b);this.$document.find("wix-notification").remove();var d=this.createNotificationElement(a,c);return this.IS_BUSINESS_MANAGER&&d.addClass("is-business-manager"),this.addWithAnimations(d,c)},b.prototype.addWithAnimations=function(b,c){var d=this;return this.$timeout(function(){return b.addClass(a.BannerContainer.ShowingClass)},this.waitBeforeAppend),!c.withCloseButton&&c.hideAfter>0&&this.animateBeforeRemove(b,c),function(){return d.removeWithAnimations(b,c)}},b.prototype.animateBeforeRemove=function(b,c){return this.$timeout(function(){return b.removeClass(a.BannerContainer.ShowingClass)},c.hideAfter-this.animationDuration)},b.prototype.removeWithAnimations=function(b,c){var d=this;return this.$timeout(function(){return b.removeClass(a.BannerContainer.ShowingClass)}).then(function(){return d.$timeout(function(){return b.remove()},d.animationDuration)})},b.prototype.createNotificationElement=function(b,c){var d=this,e=c.type,f=c.withCloseButton,g=c.hideAfter,h=c.cssClass,i=c.action,j=angular.element('<wix-notification class="quote-notification">'+b+"</wix-notification>"),k=this.$rootScope.$new();if(j.attr("type",e),j.addClass(h),j.attr("template","with-shadow"),j.attr("auto-hide",g),f){j.attr("template","with-close-button");var l=this.$rootScope.$on("$routeChangeSuccess",function(){j.remove(),l()})}i&&(k.action=function(){i(),d.$timeout(function(){return j.removeClass(a.BannerContainer.ShowingClass)}).then(function(){return d.$timeout(function(){return j.remove()},d.animationDuration)})}),j.attr("fixed-offset-parent",".content-wrapper"),j.attr("fixed-offset",JSON.stringify({width:"calc(100vw - $x)",left:"$x",top:"$y"}));var m=this.$document.find("["+this.wrapperSelector+"] article.content");return j.insertBefore(m),this.$compile(j)(k)},b}();a.Notifications=b,angular.module("quotesAppInternal").service("notifications",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a}();a.EmailDTO=b;var c=function(){function a(a){a&&(this.taxId=a.taxId,this.name=a.name,this.rate=a.rate)}return a.prototype.getId=function(){return JSON.stringify({name:this.name,rate:this.rate})},a}();a.TaxDTO=c;var d=function(){function a(a){a&&(this.lineItemId=a.lineItemId,this.name=a.name,this.description=a.description,this.price=a.price&&a.price.toNumber()||0,this.quantity=a.quantity,this.taxes=a.taxes.filter(function(a){return"object"==typeof a}).map(function(a){return a&&a.serialize()}))}return a.prototype.getId=function(){return this.lineItemId},a}();a.LineItemDTO=d;var e=function(){function b(b){b&&(this.contactId=b.contactId,this.email=b.email,this.name=b.name,this.phone=b.phone,this.company=b.companyName,this.address=new a.Address(b.fullAddress||{}))}return b}();a.ContactDTO=e;var f=function(){function a(a){this.type="fixed",this.amount=a.amount}return a.prototype.compareTo=function(a){return a&&this.type===a.type&&this.amount===a.amount},a}();a.FixedDiscountDto=f;var g=function(){function a(a){this.type="percentage",this.rate=a.rate}return a.prototype.compareTo=function(a){return a&&this.type===a.type&&this.rate===a.rate},a}();a.PercentageDiscountDto=g;var h=function(){function a(a){this.lineItems=[],a&&(this.quoteId=a.quoteId,this.quoteNumber=a.quoteNumber,this.customer=a.customer.serialize(),this.currency=a.currency,this.issueDate=a.issueDate.getTime(),this.dueDate=a.dueDate.getTime(),this.discountRate=a.discountRate,this.discount=a.discount&&a.discount.isValid()?a.discount.serialize():void 0,this.lineItems=a.lineItems.filter(function(a){return a.name}).map(function(a){return a.serialize()}),this.notes=a.notes,this.legalTerms=a.legalTerms,this.status=a.status,this.businessInfo=a.businessInfo)}return a.prototype.getTotal=function(){return this.total},a}();a.QuoteDTO=h;var i=function(){function a(a){a&&(this.quoteId=a.quoteId,this.quoteNumber=a.quoteNumber,this.customer=a.customer,this.balance=a.balance,this.paid=a.paid,this.total=a.total,this.currency=a.currency,this.issueDate=a.issueDate,this.dueDate=a.dueDate,this.status=a.status,this.businessInfo=a.businessInfo,this.lastViewed=a.lastViewed,this.wasSent=a.wasSent,this.sourceProperties=a.sourceProperties)}return a.prototype.getTotal=function(){return this.total},a}();a.QuoteSummary=i;var j=function(){function b(a,b,c,d,e,f){this.$http=a,this.COMMANDS=b,this.quotesPageSize=c,this.SERVER_ERRORS=d,this.guidGenerator=e,this.experimentManager=f,this._extract=function(a){return a.data}}return b.$inject=["$http","COMMANDS","quotesPageSize","SERVER_ERRORS","guidGenerator","experimentManager"],b.prototype.getBusinessInfo=function(){return this.$http.get("/_api/wix-quotes-web/settings/businessInfo").then(function(a){return angular.copy(a.data)})},b.prototype.listQuotes=function(a){void 0===a&&(a={});var b={sort:_.get(a,"sort")},c={status:_.get(a,"status")},d={query:_.get(a,"search")},e={skip:_.get(a,"skip"),limit:_.get(a,"limit")},f=Object.assign({},b,d,c,e);return this.getQuotesList(f)},b.prototype.quotesCount=function(){var a={skip:0,limit:1},b=function(a){return a.total};return this.listQuotes(a).then(b)},b.prototype.getQuotesList=function(a){return this.$http.get("/_api/wix-quotes-web/quotes/page",{params:a}).then(this._extract).then(function(a){return a.quotes=a.quotes.map(function(a){return new i(a)}),a})},b.prototype.createQuote=function(a){return a&&a.lineItems&&a.lineItems.forEach(function(a){a.taxes=a.taxes.filter(function(a){return a.rate>0})}),this.createQuoteCore(a)},b.prototype.sendQuote=function(a){return this.executeCommand({command:this.COMMANDS.SEND_QUOTE,aggregateId:a.quoteId,payload:a})},b.prototype.getQuote=function(a){return this.$http.get("/_api/wix-quotes-web/quotes/"+a).then(this._extract)},b.prototype.getQuoteSummary=function(a){return this.$http.get("/_api/wix-quotes-web/quotes/"+a+"/summary").then(this._extract).then(function(a){return new i(a)})},b.prototype.executeCommand=function(a){return this.$http.post("/_api/wix-quotes-web/execute/",a).then(this._extract)},b.prototype.updateQuote=function(a,b,c){return this.executeCommand({command:this.COMMANDS.UPDATE_QUOTE,aggregateId:a,expectedAggregateVersion:b,payload:{operations:c}})},b.prototype.deleteQuote=function(a){return this.executeCommand({command:this.COMMANDS.DELETE_QUOTE,aggregateId:a,payload:{}})},b.prototype.voidQuote=function(a){return this.executeCommand({command:this.COMMANDS.VOID_QUOTE,aggregateId:a,payload:{}})},b.prototype.markQuoteAsPaid=function(a){return this.executeCommand({command:this.COMMANDS.MARK_QUOTE_AS_PAID,aggregateId:a,payload:{}})},b.prototype.addPaymentToQuote=function(a,b,c){var d={amount:b,paymentDate:c};return this.executeCommand({command:this.COMMANDS.ADD_PARTIAL_PAYMENT,aggregateId:a,payload:d})},b.prototype.simulateUpdate=function(a,b){var c={command:this.COMMANDS.UPDATE_QUOTE,aggregateId:a,payload:{operations:b}};return this.$http.post("/_api/wix-quotes-web/quotes/preview/",c).then(this._extract)},b.prototype.quoteTotals=function(b){return void 0===b&&(b=null),null===b?this.$http.get("/_api/wix-quotes-web/quotes/totals").then(this._extract):this.$http.get("/_api/wix-quotes-web/quotes/totals/"+a.DateRange[b]).then(this._extract)},b.prototype.createQuoteCore=function(a){var b=this;return this.executeCommand({command:this.COMMANDS.CREATE_QUOTE,aggregateId:a.quoteId,payload:a}).then(function(){return!0}).catch(function(c){return(_.get(c,"errorCode")||_.get(c,"data.errorCode"))===b.SERVER_ERRORS.DUPLICATE_QUOTE_ID?(a.quoteId=b.guidGenerator(),b.createQuoteCore(a)):Promise.reject(c)})},b}();a.QuotesApi=j,angular.module("quotesAppInternal").service("quotesApi",j)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.name=a.name,this.productId=a.productId,this.description=a.description,this.price=a.price}return a}();a.ProductDTO=b;var c=function(){function a(a,b,c){this.$http=a,this.COMMANDS=b,this.guidGenerator=c,this._extract=function(a){return a.data}}return a.$inject=["$http","COMMANDS","guidGenerator"],a.prototype.listProducts=function(){return this.$http.get("/_api/wix-quotes-web/products").then(function(a){return a.data})},a.prototype.create=function(a){return a.productId||(a.productId=this.guidGenerator()),this.executeCommand({command:this.COMMANDS.CREATE_PRODUCT,aggregateId:a.productId,payload:a})},a.prototype.executeCommand=function(a){return this.$http.post("/_api/wix-quotes-web/execute/",a).then(this._extract)},a.prototype.update=function(a,b){return this.executeCommand({command:this.COMMANDS.UPDATE_PRODUCT,aggregateId:a.productId,payload:{operations:b}})},a.prototype.delete=function(a){return this.executeCommand({command:this.COMMANDS.DELETE_PRODUCT,aggregateId:a.productId,payload:{}})},a}();a.ProductsApi=c,angular.module("quotesAppInternal").service("productsApi",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.COMMANDS=b,this.guidGenerator=c}return a.$inject=["$http","COMMANDS","guidGenerator"],a.prototype.listTaxes=function(){return this.$http.get("/_api/wix-quotes-web/taxes").then(function(a){return a.data})},a.prototype.createTax=function(a){return a.taxId||(a.taxId=this.guidGenerator()),this.executeCommand({command:this.COMMANDS.CREATE_TAX,aggregateId:a.taxId,payload:a})},a.prototype.updateTax=function(a,b){return this.executeCommand({command:this.COMMANDS.UPDATE_TAX,aggregateId:a.taxId,payload:{operations:b}})},a.prototype.deleteTax=function(a){return this.executeCommand({command:this.COMMANDS.DELETE_TAX,aggregateId:a,payload:{}})},a.prototype.executeCommand=function(a){return this.$http.post("/_api/wix-quotes-web/execute/",a).then(function(a){return a.data})},a}();a.TaxesApi=b,angular.module("quotesAppInternal").service("taxesApi",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.$http=a,this.$q=b,this.experimentManager=c,this._extract=function(a){return a.data}}return a.$inject=["$http","$q","experimentManager"],a.prototype.loadNotesSettings=function(){return this.$http.get("/_api/wix-quotes-web/settings/notes").then(this._extract)},a.prototype.loadPriceQuotesSettings=function(){return this.$http.get("/_api/wix-quotes-web/v1/price-quotes/settings").then(this._extract).then(function(a){return a.settings})},a.prototype.loadPriceQuoteNextNumber=function(){return this.$http.get("/_api/wix-quotes-web/v1/price-quotes/nextNumber").then(this._extract).then(function(a){return a.nextNumber})},a.prototype.saveNotesSettings=function(a){return this.$http.post("/_api/wix-quotes-web/settings/notes",a)},a.prototype.savePriceQuotesSettings=function(a){return this.$http.put("/_api/wix-quotes-web/v1/price-quotes/settings",{settings:a})},a.prototype.saveCurrency=function(a){return this.$http.post("/_api/wix-quotes-web/settings/general/currency",{currency:a})},a.prototype.saveInitialQuoteNumber=function(a){return this.$http.post("/_api/wix-quotes-web/settings/general/initial",{number:a})},a.prototype.hasActivePaymentMethods=function(){return this.$http.get("/_api/wix-quotes-web/settings/payments/hasActiveMethods").then(this._extract)},a.prototype.loadGeneralSettings=function(){var a=[this.loadCurrency(),this.loadInitialQuoteNumber()];return this.$q.all(a).then(function(a){var b=a[0].currency,c=a[1],d=c.initial,e=c.last;return{currency:b,initialQuoteNumber:d.number,lastQuoteNumber:e}})},a.prototype.loadCompanyId=function(){return this.$http.get("/_api/wix-quotes-web/settings/companyId").then(this._extract)},a.prototype.saveCompanyId=function(a){return this.$http.post("/_api/wix-quotes-web/settings/companyId",{companyId:a})},a.prototype.getBusinessSettings=function(){return this.$http.get("/_api/wix-quotes-web/settings/businessSettings").then(this._extract)},a.prototype.setBusinessSettings=function(a){return this.$http.post("/_api/wix-quotes-web/settings/businessSettings",a)},a.prototype.loadCurrency=function(){return this.$http.get("/_api/wix-quotes-web/settings/general/currency").then(this._extract)},a.prototype.loadInitialQuoteNumber=function(){return this.$http.get("/_api/wix-quotes-web/settings/general/initial").then(this._extract)},a}();a.SettingsApi=b,angular.module("quotesAppInternal").service("settingsApi",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.appDefId=a.wixAppIds.quotes,this.instanceId=a.getInstalledAppInstanceId(a.wixAppIds.quotes)}return a.$inject=["frameworkFacade"],a.prototype.getCashierConfig=function(){return{appDefId:this.appDefId,appInstanceId:this.instanceId}},a}();a.PaymentsApi=b,angular.module("wixCashierSettings").service("paymentsApi",b)
}(invoices||(invoices={}));var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),invoices;!function(a){var b=function(){function a(){this.lineItemId="",this.name="",this.description="",this.quantity=1,this.taxes=[],this.total=0}return a}();a.BaseLineItem=b;var c=function(b){function c(c){var d=b.call(this)||this;return c?(d.lineItemId=c.lineItemId,d.name=c.name,d.description=c.description,d.price=Decimal(c.price),d.quantity=c.quantity,d.taxes=c.taxes.map(function(b){return new a.Tax(b)})):d.lineItemId=d.generateGuid(),d}return __extends(c,b),c.prototype.inject=function(a){this.generateGuid=a},c.prototype.inject.$inject=["guidGenerator"],c.prototype.isValidLine=function(){return this.price&&this.quantity},c.prototype.setPrice=function(a){this.price=a&&Decimal(a)},c.prototype.calculateTotal=function(){return this.isValidLine()?this.price.times(this.quantity):Decimal(0)},c.prototype.serialize=function(){var b=angular.copy(this);return b.price=this.price||Decimal(0),b.quantity=this.quantity||0,new a.LineItemDTO(b)},c}(b);a.LineItem=c,angular.module("quotesAppInternal").factory("LineItem",["$injector",function(a){return function(){var b=Object.create(c.prototype);return a.invoke(b.inject||angular.noop,b),c.apply(b,arguments),b}}])}(invoices||(invoices={}));var invoices;!function(a){var b=30,c=function(){function b(a){this.amount=a}return b.prototype.serialize=function(){return new a.FixedDiscountDto(this)},b.prototype.isValid=function(){return!isNaN(this.amount)&&null!==this.amount},b}();a.FixedDiscount=c;var d=function(){function b(a){this.rate=a}return b.prototype.serialize=function(){return new a.PercentageDiscountDto(this)},b.prototype.isValid=function(){return!isNaN(this.rate)&&null!=this.rate},b}();a.PercentageDiscount=d;var e=function(){function e(c){this.customer=new a.Contact,this.currency="USD",this.discountRate=0,this.discount=new d,this.taxes=[],this.notes="",this.legalTerms="",this.businessInfo=new a.BusinessInfo,this.issueDate=new Date,this.dueDate=this.addDays(this.issueDate,b),c?(this.quoteId=c.quoteId,this.quoteNumber=c.quoteNumber,this.customer=new a.Contact(c.customer),this.currency=c.currency,this.issueDate=this.localizeDate(c.issueDate),this.dueDate=this.localizeDate(c.dueDate),this.discountRate=c.discountRate,this.paid=this.money.of(c.paid||0,c.currency||"USD"),this.notes=c.notes,this.legalTerms=c.legalTerms,this.status=c.status,this.businessInfo=c.businessInfo,this.version=c.version,this.wasSent=c.wasSent,this.loadLineItems(c),this.loadDiscount(c)):(this.issueDate.setHours(0,0,0,0),this.dueDate.setHours(0,0,0,0),this.quoteId=this.generateGuid(),this.lineItems=[new this.LineItem])}return e.prototype.inject=function(a,b,c,d,e,f,g){this.generateGuid=b,this.LineItem=a,this.money=c,this.experimentManager=d,this.localizeDate=e,this.delocalizeDate=f,this.defaultRoundingMode=g},e.prototype.inject.$inject=["LineItem","guidGenerator","money","experimentManager","localizeDate","delocalizeDate","defaultRoundingMode"],e.prototype.addDays=function(a,b){var c=new Date(a.valueOf());return c.setDate(c.getDate()+b),c},e.prototype.loadLineItems=function(b){this.lineItems=b.lineItems.map(function(b){return new a.LineItem(b)})},e.prototype.loadDiscount=function(a){a.discount&&"percentage"===a.discount.type&&(this.discount=new d(a.discount.rate)),a.discount&&"fixed"===a.discount.type&&(this.discount=new c(a.discount.amount))},e.prototype.addLine=function(a){this.lineItems.push(a||new this.LineItem)},e.prototype.removeLine=function(a){var b=this.lineItems.length;1===b?(this.lineItems.splice(0,1),this.lineItems[0]=new this.LineItem):b>1&&0<=a&&a<b&&this.lineItems.splice(a,1)},e.prototype.serialize=function(){this.experimentManager.isExperimentEnabled("specs.crm.InvoicesFixedDiscount")||delete this.discount;var b=new a.QuoteDTO(this);return b.issueDate=this.delocalizeDate(b.issueDate),b.dueDate=this.delocalizeDate(b.dueDate),b},e.prototype.copy=function(){return angular.copy(this)},e.prototype.getLineItemTotal=function(a){return this.getLineTotal(this.lineItems[a])},e.prototype.getLineItemTotalWithDiscount=function(a){var b=a.calculateTotal();return(this.experimentManager.isExperimentEnabled("specs.invoices.PriceFixedCurrency")?this.money.of(b,this.currency,this.defaultRoundingMode):b).times(Decimal(1).minus(this.getDiscountPercent()))},e.prototype.zeroMoney=function(){return this.money.zero(this.currency)},e.prototype.sumMoney=function(a){return a.reduce(function(a,b){return a.plus(b)},this.zeroMoney())},e.prototype.calculateRate=function(a,b){return a.times(b/100)},e.prototype.uniqueTaxes=function(){var a=this.lineItems.map(function(a){return a.taxes}).reduce(function(a,b){return a.concat(b)}).filter(function(a){return a.rate}).reduce(function(a,b){return a[b.name]=b,a},{});return Object.keys(a).map(function(b){return a[b]})},e.prototype.taxesAndTotals=function(){var a=this,b=this.lineItems.map(function(b){return b.taxes.map(function(c){return{tax:c,total:a.getLineItemTotalWithDiscount(b)}})}).reduce(function(a,b){return a.concat(b)}).reduce(function(a,b){var c=b.tax.name,d=b.total;return a[c]?a[c].push(d):a[c]=[d],a},{});return Object.keys(b).reduce(function(c,d){return c[d]=a.sumMoney(b[d]),c},{})},e.prototype.getLineTotal=function(a){var b=a.calculateTotal();return this.money.of(b,this.currency,this.defaultRoundingMode)},e.prototype.getDiscountPercent=function(){return this.experimentManager.isExperimentEnabled("specs.crm.InvoicesFixedDiscount")?this.discount instanceof d?this.discount&&this.discount.rate/100||0:this.discount&&this.discount.amount/this.getSubtotal().toNumber()||0:this.discountRate&&this.discountRate/100||0},e.prototype.getTaxTotal=function(){var a=this.getTaxesByName(),b=a.map(function(a){return a.amount});return this.sumMoney(b)},e.prototype.getTotal=function(){var a=this.getSubtotal(),b=this.getDiscount(),c=this.getTaxTotal();return a.minus(b).plus(c)},e.prototype.getAmountPaid=function(){return this.paid||this.zeroMoney()},e.prototype.getTaxesByName=function(){var a=this;if(this.experimentManager.isExperimentEnabled("specs.invoices.PriceFixedCurrency")){var b=this.uniqueTaxes(),c=this.taxesAndTotals();return b.map(function(b){var d=b.name,e=b.rate;return{name:d,rate:e,amount:a.calculateRate(c[d],e)}})}var d=function(a){return a.taxes.filter(function(a){return void 0!==a.rate}).reduce(function(a,b){a[b.name]||(a[b.name]={sum:Decimal(0),rate:b.rate});var c=a[b.name].sum||Decimal(0);return a[b.name].sum=c.plus(b.rate),a},{})},e={};this.lineItems.forEach(function(b){var c=a.getLineItemTotalWithDiscount(b),f=d(b);Object.keys(f).forEach(function(a){var b=f[a];e[a]||(e[a]={amount:Decimal(0),rate:b.rate});var d=b.sum.dividedBy(100),g=c.times(d),h=e[a].amount||Decimal(0);e[a].amount=h.plus(g.toNumber())})}),Object.keys(e).forEach(function(b){var c=e[b];c.amount=a.money.of(c.amount,a.currency)});var f=[];return Object.keys(e).forEach(function(a){e[a].name=a,f.push(e[a])}),f},e.prototype.getSubtotal=function(){var a=this,b=this.lineItems.map(function(b){return a.getLineTotal(b)});return this.sumMoney(b)},e.prototype.getDiscount=function(){return this.getSubtotal().times(this.getDiscountPercent())},e}();a.Quote=e,angular.module("quotesAppInternal").factory("Quote",["$injector",function(a){return function(){var b=Object.create(e.prototype);return a.invoke(b.inject||angular.noop,b),e.apply(b,arguments),b}}])}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.quoteConstructor=a}return a.$inject=["Quote"],a.prototype.duplicateQuote=function(b){var c=new this.quoteConstructor;return c.lineItems=b.lineItems,c.customer=b.customer,c.currency=b.currency,c.discountRate=b.discountRate,c.discount=b.discount,c.notes=b.notes,c.legalTerms=b.legalTerms,c.dueDate=a.calculateDueDate(c.issueDate,b),c},a.calculateDueDate=function(a,b){var c=b.dueDate.valueOf()-b.issueDate.valueOf();return new Date(a.getTime()+c)},a}();a.QuoteDuplicator=b,angular.module("quotesAppInternal").service("quoteDuplicator",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d){this.productId=d,this.name=a,this.description=b,this.price=c}return b.prototype.deserialize=function(a){a&&(this.name=a.name,this.productId=a.productId,this.description=a.description,this.price=a.price)},b.prototype.serialize=function(){return new a.ProductDTO(this)},b.prototype.copy=function(){return angular.copy(this)},b}();a.Product=b;var c=function(){function a(a,b,c){this.productsApi=a,this.comparator=b,this.wixBiLogger=c}return a.$inject=["productsApi","comparator","wixBiLogger"],a.prototype.save=function(a,b){if(this.wixBiLogger.log("PRODUCT_SAVE",{origin:a.productId?"edit":"create"}),void 0!==a.productId){var c=this.comparator.compare(b,a);return this.productsApi.update(a,c)}return this.productsApi.create(a)},a.prototype.deleteProduct=function(a){return this.productsApi.delete(a)},a}();a.Products=c,angular.module("quotesAppInternal").service("products",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.taxesApi=a,this.comparator=b}return a.$inject=["taxesApi","comparator"],a.prototype.listTaxes=function(){return this.taxesApi.listTaxes()},a.prototype.save=function(a,b){if(void 0!==a.taxId){var c=this.comparator.compare(b,a);return this.taxesApi.updateTax(a,c)}return this.taxesApi.createTax(a)},a.prototype.deleteTax=function(a){return this.taxesApi.deleteTax(a)},a}();a.Taxes=b,angular.module("quotesAppInternal").service("taxes",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d){this.quotesApi=a,this.dialogs=b,this.experimentManager=d,this.ACTIONS={},this.ACTIONS=c.getLists()}return b.$inject=["quotesApi","dialogs","actionLists","experimentManager"],b.prototype.send=function(b){return this.sendCore(b).then(this.dialogs.showNotificationSuccess(a.SendDialog.successKey)).catch(this.dialogs.showNotificationOnError(a.SendDialog.errorKey))},b.prototype.sendSilent=function(a){return this.sendCore(a)},b.prototype.sendCore=function(a){var b=this;return this.quotesApi.getBusinessInfo().then(function(c){return b.dialogs.openSendDialog(a,c)}).then(function(c){return b.quotesApi.sendQuote({quoteId:a.quoteId,subject:c.emailSubject,message:c.emailMessage})})},b.prototype.saveAndSend=function(b,c){var d=this;return this.quotesApi.getBusinessInfo().then(function(e){return d.dialogs.openSendDialog(b,e).then(function(a){return c().then(function(){return d.quotesApi.sendQuote({quoteId:b.quoteId,subject:a.emailSubject,message:a.emailMessage})})}).then(d.dialogs.showNotificationSuccess(a.SendDialog.successKey)).catch(d.dialogs.showNotificationOnError(a.SendDialog.errorKey))})},b.prototype.preview=function(a,b){return this.dialogs.openPreviewDialog(a,b)},b.prototype.remove=function(b){var c=this;return this.dialogs.openDeleteDialog().then(function(){return c.quotesApi.deleteQuote(b)}).then(this.dialogs.showNotificationSuccess(a.DeleteQuoteDialog.successKey)).catch(this.dialogs.showNotificationOnError(a.DeleteQuoteDialog.errorKey))},b.prototype.void=function(b){var c=this;return this.dialogs.openVoidDialog().then(function(){return c.quotesApi.voidQuote(b)}).then(this.dialogs.showNotificationSuccess(a.VoidQuoteDialog.successKey)).catch(this.dialogs.showNotificationOnError(a.VoidQuoteDialog.errorKey))},b.prototype.pay=function(a){var b=this,c=function(c,d){return b.addPayment(a.quoteId,c,d)};return this.dialogs.openAddPaymentToQuoteDialog(a,c)},b.prototype.print=function(a){this.dialogs.openPrintDialog(a)},b.prototype.isActionShown=function(a,b){var c=this.showForSend(a.wasSent,b),d=this.showForResend(a.wasSent,b),e=this.showActionsForStatus(a.status,b),f=this.showViewSource(a.sourceProperties,b);return c&&d&&e||f},b.prototype.addPayment=function(b,c,d){return this.quotesApi.addPaymentToQuote(b,c,d).then(this.dialogs.showNotificationSuccess(a.AddPaymentToQuoteDialog.addPaymentSuccessKey)).catch(this.dialogs.showNotificationOnError(a.AddPaymentToQuoteDialog.addPaymentErrorKey))},b.prototype.showActionsForStatus=function(a,b){var c=this.ACTIONS[a]||[];return _.includes(c,b)},b.prototype.showForSend=function(b,c){return!(c===a.ActionNames.SEND&&b)},b.prototype.showForResend=function(b,c){return c!==a.ActionNames.RESEND||b},b.prototype.showViewSource=function(b,c){return c===a.ActionNames.VIEW_SOURCE&&!!b},b}();a.Actions=b,angular.module("quotesAppInternal").service("actions",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a){this.QUOTE_STATUS=a}return b.$inject=["QUOTE_STATUS"],b.prototype.getLists=function(){var a={};return a[this.QUOTE_STATUS.DRAFT]=this.DRAFT_ACTIONS(),a[this.QUOTE_STATUS.SENT]=this.SENT_ACTIONS(),a[this.QUOTE_STATUS.PAID]=this.PAID_ACTIONS(),a[this.QUOTE_STATUS.OVERDUE]=this.OVERDUE_ACTIONS(),a[this.QUOTE_STATUS.VOID]=this.VOID_ACTIONS(),a[this.QUOTE_STATUS.PROCESSING]=this.PROCESSING_ACTIONS(),a[this.QUOTE_STATUS.PARTIALLYPAID]=this.PARTIAL_ACTIONS(),a[this.QUOTE_STATUS.PARTIAL_AND_OVERDUE]=this.PARTIAL_ACTIONS(),a[this.QUOTE_STATUS.VIEWED]=this.SENT_ACTIONS(),a},b.prototype.DRAFT_ACTIONS=function(){return[a.ActionNames.EDIT,a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.ADD_PAYMENT,a.ActionNames.REMOVE]},b.prototype.SENT_ACTIONS=function(){return[a.ActionNames.EDIT,a.ActionNames.PREVIEW,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.ADD_PAYMENT,a.ActionNames.VOID,a.ActionNames.REMOVE]},b.prototype.PAID_ACTIONS=function(){return[a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.VOID]},b.prototype.OVERDUE_ACTIONS=function(){return[a.ActionNames.EDIT,a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.ADD_PAYMENT,a.ActionNames.VOID,a.ActionNames.REMOVE]},b.prototype.VOID_ACTIONS=function(){return[a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.REMOVE]},b.prototype.PROCESSING_ACTIONS=function(){return[a.ActionNames.PREVIEW,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE]},b.prototype.PARTIAL_ACTIONS=function(){return[a.ActionNames.EDIT,a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.ADD_PAYMENT,a.ActionNames.VOID]},b}();a.ActionLists=b,angular.module("quotesAppInternal").service("actionLists",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.successKey="void_quote_dialog.notification.success",a.errorKey="void_quote_dialog.notification.error",a.templateUrl="modules/quotes/dialogs/void-quote-dialog.preload.html",a}();a.VoidQuoteDialog=b;var c=function(){function a(){}return a.successKey="delete_quote_dialog.notification.success",a.errorKey="delete_quote_dialog.notification.error",a.templateUrl="modules/quotes/dialogs/delete-quote-dialog.preload.html",a}();a.DeleteQuoteDialog=c;var d=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/delete-tax-dialog.preload.html",a}();a.DeleteTaxDialog=d;var e=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/confirm-navigation-dialog.preload.html",a}();a.ConfirmNavigationDialog=e;var f=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/initial-invoice-number-dialog.preload.html",a}();a.InitialInvoiceNumberDialog=f;var g=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/initial-price-quote-number-dialog.preload.html",a}();a.InitialPriceQuoteNumberDialog=g;var h=function(){function a(){}return a.errorKey="delete_product_dialog.notification.error",a.templateUrl="modules/quotes/dialogs/delete-product-dialog.preload.html",a}();a.DeleteProductDialog=h;var i=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/invalid-paypal-account-dialog.preload.html",a}();a.InvalidPayPalAccountDialog=i;var j=function(){function a(){}return a.templateUrl="modules/quotes/dialogs/alert-user-of-unverified-paypal-email.preload.html",a}();a.AlertUserOfUnverifiedPaypalEmail=j;var k=function(){function j(a,b,c,d,e,f,g,h,i,j,k){this.$q=a,this.sendDialog=b,this.$rootScope=c,this.wixModal=d,this.$mdDialog=e,this.DIALOG_REASONS=f,this.$route=g,this.wixBiLogger=h,this.$document=i,this.experimentManager=j,this.notifications=k}return j.$inject=["$q","sendDialog","$rootScope","wixModal","$mdDialog","DIALOG_REASONS","$route","wixBiLogger","$document","experimentManager","notifications"],j.prototype.openPreviewDialog=function(a,b){var c=this.wixModal.base().modalTemplateUrl("modules/quote-user-preview/quote-user-preview.preload.html").modalController("UserQuotePreviewDialogController").modalControllerAs("dialog").windowClass("quote-preview").locals({quote:a,editMode:b});return c.width=764,this.wixModal.open(c)},j.prototype.openPrintDialog=function(a){var b=this.wixModal.base().modalTemplateUrl("modules/quote-user-preview/quote-user-preview.preload.html").modalController("PrintDialogController").modalControllerAs("dialog").windowClass("quote-preview").locals({quote:a});return b.width=764,this.wixModal.open(b)},j.prototype.openSendDialog=function(a,b){return this.sendDialog.open(a.customer.email,b.businessName,b.businessEmail)},j.prototype.showNotificationSuccess=function(a){var b=this;return function(c){return b.notifications.showTranslated(a,{type:"success"}),b.$q.when(c)}},j.prototype.showNotificationOnError=function(a){var b=this;return function(c){return b.isModalCancel(c)||b.notifications.showTranslated(a,{type:"error"}),b.$q.reject(c)}},j.prototype.isModalCancel=function(a){return void 0===a||a===this.DIALOG_REASONS.CANCEL||a===this.DIALOG_REASONS.BLUR},j.prototype.openDeleteDialog=function(){return this.openConfirmModal(c.templateUrl)},j.prototype.openVoidDialog=function(){return this.openConfirmModal(b.templateUrl)},j.prototype.openDeleteProductDialog=function(){return this.openConfirmModal(h.templateUrl)},j.prototype.openDeleteTaxDialog=function(){return this.openConfirmModal(d.templateUrl)},j.prototype.openConfirmNavigationDialog=function(){return this.openConfirmModal(e.templateUrl)},j.prototype.openInitialInvoiceNumberDialog=function(){return this.openConfirmModal(f.templateUrl)},j.prototype.openInitialPriceQuoteNumberDialog=function(){return this.openConfirmModal(g.templateUrl)},j.prototype.alertUserOfUnverifiedPaypalEmail=function(){return this.$mdDialog.show({controller:"ConfirmDialogController",controllerAs:"dialog",clickOutsideToClose:!0,template:"<unconfirmed-paypal-account-dialog>",parent:angular.element(this.$document[0].body)})},j.prototype.openAddPaymentToQuoteDialog=function(a,b){return this.$mdDialog.show({controller:angular.noop,controllerAs:"dialog",bindToController:!0,clickOutsideToClose:!0,template:'<add-payment-to-quote-dialog quote="dialog.quote" on-add-payment="dialog.onAddPayment(amount, date)">',parent:angular.element(this.$document[0].body),locals:{quote:a,onAddPayment:b}})},j.prototype.openInvalidPayPalAccountDialog=function(){var b=this,c=this.getBiOrigin();this.wixBiLogger.log("INVALID_PAYPAL_ACCOUNT_POPUP",{name:"paypal",origin:c});var d=this.$rootScope.$new();return d.biOrigin=c,d.getBiArgs=function(a){return"{ link_type: \\'"+a+"\\', name: \\'paypal\\', origin: \\'"+c+"\\' }"},this.$mdDialog.show({controller:a.SimpleDialogController,controllerAs:"dialog",clickOutsideToClose:!0,templateUrl:i.templateUrl,scope:d}).finally(function(){b.wixBiLogger.log("INVALID_PAYPAL_ACCOUNT_POPUP_CLOSE",{name:"paypal",origin:c})})},j.prototype.openConfirmModal=function(a){return this.$mdDialog.show({controller:"ConfirmDialogController",controllerAs:"dialog",clickOutsideToClose:!0,templateUrl:a,parent:angular.element(this.$document[0].body)})},j.prototype.openGetPaidViaStripeDialog=function(a,b){var c=this.getBiOrigin();return this.wixBiLogger.log("PAYMENT_ACTIONS_POPUP",{name:"stripe",origin:c}),this.$mdDialog.show({controller:angular.noop,controllerAs:"dialog",bindToController:!0,clickOutsideToClose:!0,template:'<get-paid-via-stripe-dialog on-connect-stripe="dialog.onConnectStripe()" on-create-stripe="dialog.onCreateStripe()">',parent:angular.element(this.$document[0].body),locals:{onConnectStripe:a,onCreateStripe:b}})},j.prototype.openFirstTimeDialog=function(){return this.$mdDialog.show({template:"<first-time-dialog>",parent:angular.element(this.$document[0].body)})},j.prototype.getBiOrigin=function(){return this.$route&&this.$route.current&&this.$route.current.biPageName?this.$route.current.biPageName:"onboarding"},j}();a.Dialogs=k,angular.module("quotesAppInternal").service("dialogs",k)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$mdDialog=a,this.$document=b}return a.$inject=["$mdDialog","$document"],a.prototype.open=function(a,b,c){return this.$mdDialog.show({templateUrl:"modules/quotes/dialogs/send-dialog.preload.html",controller:"SendDialogController",controllerAs:"dialog",clickOutsideToClose:!0,locals:{customerEmail:a,companyName:b,companyEmail:c},parent:angular.element(this.$document[0].body)})},a.successKey="send_dialog.notification.success",a.errorKey="send_dialog.notification.error",a}();a.SendDialog=b,angular.module("quotesAppInternal").service("sendDialog",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$mdDialog=a,this.$document=b}return a.$inject=["$mdDialog","$document"],a.prototype.open=function(a,b,c){var d={product:b,currency:a,isNewProduct:c},e={templateUrl:"modules/quotes/product-list/product-dialog/product-create.preload.html",controller:"ProductController",controllerAs:"productCtrl",clickOutsideToClose:!0,locals:d,parent:angular.element(this.$document[0].body)};return this.$mdDialog.show(e)},a}();a.ProductDialog=b,angular.module("quotesAppInternal").service("productDialog",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$window=a,this.$document=b}return a.$inject=["$window","$document"],a.prototype.print=function(a){void 0===a&&(a=.5);var b=angular.element("<style>@page { margin: "+a+"cm }</style>");this.$document.find("head").append(b),this.$window.print(),b.remove()},a.prototype.printElement=function(a,b){var c=this.$document.find(a).clone();c.addClass("display-print-only"),angular.element(this.$document.find("body")).append(c),this.print(b),c.remove()},a}();a.PrintService=b,angular.module("quoteCommon").service("printService",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$mdDialog=a,this.$document=b}return a.$inject=["$mdDialog","$document"],a.prototype.open=function(a){var b="object"==typeof a&&void 0===a.rate,c={templateUrl:"modules/quotes/dialogs/tax-dialog.preload.html",controller:"TaxController",controllerAs:"taxDialog",clickOutsideToClose:!0,locals:{tax:a,isNewTax:b},parent:angular.element(this.$document[0].body)};return this.$mdDialog.show(c)},a}();a.TaxDialog=b,angular.module("quotesAppInternal").service("taxDialog",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.wixStorage=a,this.quotes=b,this.quotesApi=c,this.$q=d,this.ON_BOARDING_PROGRESS=e,this.BANNER_KEYS=f,this.settingsApi=g,this.dialogs=h,this.STORAGE_OPTIONS=i,this.stepKey="quotesOnBoarding",this.businessInfoVerifiedKey="businessInfoVerified"}return a.$inject=["wixStorage","quotes","quotesApi","$q","ON_BOARDING_PROGRESS","BANNER_KEYS","settingsApi","dialogs","STORAGE_OPTIONS"],a.prototype.getCurrentStep=function(){return this.wixStorage.get(this.stepKey,this.STORAGE_OPTIONS)},a.prototype.isOldOnboardingComplete=function(){var a=this;return this.getCurrentStep().then(function(b){switch(b){case a.ON_BOARDING_PROGRESS.PAYMENT:case a.ON_BOARDING_PROGRESS.EMPTY_EXPERIENCE:case a.ON_BOARDING_PROGRESS.DONE:return a.$q.resolve()}return a.$q.reject()})},a.prototype.isOnboardingComplete=function(){var a=this;return this.isOldOnboardingComplete().then(function(){return a.setBusinessInfoVerified()}).catch(function(){return a.getBusinessInfoVerified()})},a.prototype.setUpPaymentBanners=function(){var a=this;return this.settingsApi.hasActivePaymentMethods().then(function(b){return b?a.wixStorage.set(a.BANNER_KEYS.PAYMENTS,!1,a.STORAGE_OPTIONS).catch(function(){return a.$q.resolve()}):a.$q.resolve()})},a.prototype.setupBusinessInfo=function(){var a=this;return this.quotesApi.quotesCount().then(function(b){return b>0?a.setBusinessInfoVerified():a.isOnboardingComplete()}).catch(function(){return a.dialogs.openFirstTimeDialog().then(function(){return a.setBusinessInfoVerified()})})},a.prototype.setupOnboarding=function(){var a=this,b=!1;return this.quotes.fetch().then(function(){return a.quotes.emptyExperienceOn?a.isOnboardingComplete().then(function(){return b}).catch(function(){return!0}):a.setBusinessInfoVerified().then(function(){return a.setUpPaymentBanners()}).then(function(){return b}).catch(function(){return b})})},a.prototype.setBusinessInfoVerified=function(){return this.wixStorage.set(this.businessInfoVerifiedKey,!0,this.STORAGE_OPTIONS).then(this.$q.resolve(!0))},a.prototype.getBusinessInfoVerified=function(){var a=this;return this.wixStorage.get(this.businessInfoVerifiedKey,this.STORAGE_OPTIONS).then(function(b){return!0===b?a.$q.resolve(!0):a.$q.reject()})},a}();a.OnBoarding=b,angular.module("quotesAppInternal").service("onBoarding",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.jsondiffpatch=a,this.comparableFilter.filterName="comparable"}return a.$inject=["jsondiffpatch"],a.prototype.compare=function(a,b){return this.compareWithoutSerialize(a.serialize(),b.serialize())},a.prototype.compareWithoutSerialize=function(a,b){var c=this.jsondiffpatch.create({objectHash:function(a,b){return a.getId&&a.getId()||"$$index"+b},arrays:{detectMove:!1,includeValueOnMove:!1},textDiff:{minLength:Number.MAX_SAFE_INTEGER}});c.processor.pipes.diff.before("trivial",this.comparableFilter);var d=c.diff(a,b),e=this.jsondiffpatch.formatters.JSONFormatter.format(d);return this.reorderOps(e)},a.prototype.comparableFilter=function(a){var b=a.left,c=a.right;b&&c&&b.compareTo&&!b.compareTo(c)&&a.setResult([b,c]).exit();var d=function(a){return a&&delete a.compareTo};d(b),d(c)},a.prototype.reorderOps=function(a){var b=this.partition(a,function(a){return"remove"===a.op}),c=b[0],d=b[1];return this.orderStructuralOps(c).concat(d)},a.prototype.orderStructuralOps=function(a){return a.sort(function(a,b){var c=a.path.split("/"),d=b.path.split("/"),e=c.length,f=d.length;if(e<f)return-1;if(e>f)return 1;var g=parseInt(_.last(c),10),h=parseInt(_.last(d),10);return isNaN(h)||isNaN(g)?0:h-g}),a},a.prototype.partition=function(a,b){var c=[],d=[];return a.forEach(function(a){(b(a)?c:d).push(a)}),[c,d]},a}();a.Comparator=b,angular.module("quotesAppInternal").service("comparator",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.$window=a}return a.$inject=["$window"],a.prototype.beforeUnload=function(a){this.$window.onbeforeunload=a},a}();a.OnBeforeUnload=b,angular.module("quotesAppInternal").service("onBeforeUnload",b)}(invoices||(invoices={}));var invoices;!function(a){function b(a){function b(){var b=a.get("IS_BUSINESS_MANAGER"),c=a.get("INSTANCE_INTERCEPTOR_CACHE"),d=a.get("quotesInstanceTTL"),e=a.get("frameworkFacade"),f=Date.now();if(b){if(c.instance&&f-c.instance.time<d)return c.instance.promise;var g=e.getAppInstance(e.wixAppIds.invoices).catch(function(a){return delete c.instance,Promise.reject(a)});return c.instance={promise:g,time:f},g}return e.getAppInstance(e.wixAppIds.quotes)}return{request:function(a){return-1!==a.url.indexOf("/wix-quotes-web")?b().then(function(b){return _.merge(a,{headers:{"X-Wix-Quotes-Instance":b,Authorization:b}})}):a}}}b.$inject=["$injector"],angular.module("quotesAppInternal").constant("INSTANCE_INTERCEPTOR_CACHE",{}).factory("instanceInterceptor",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f,g,h,i){this.Quote=a,this.settingsApi=b,this.$q=c,this.quotesApi=d,this.$location=e,this.$window=f,this.quotesPageSize=g,this.delay=h,this.experimentManager=i,this.sortStorageKey="invoicesSort",this.total=0}return b.$inject=["Quote","settingsApi","$q","quotesApi","$location","$window","quotesPageSize","delay","experimentManager"],b.prototype.createQuote=function(){var a=this;return this.$q.all([this.settingsApi.loadGeneralSettings(),this.settingsApi.loadNotesSettings()]).then(function(b){var c=b[0],d=b[1],e=new a.Quote;return e.notes=d.defaultNotes,e.legalTerms=d.defaultLegalTerms,e.currency=c.currency,e})},b.prototype.getQuote=function(a){var b=this;return this.quotesApi.getQuote(a).then(function(a){return new b.Quote(a)})},b.prototype.refreshQuote=function(a){var b=this;return this.delay().then(function(){return b.quotesApi.getQuoteSummary(a)}).then(function(c){var d=_.findIndex(b.list,function(b){return b.quoteId===a});-1<d&&(b.list[d]=c)})},b.prototype.removeQuote=function(a){var b=this,c=_.findIndex(this.list,function(b){return b.quoteId===a});return-1<c&&(this.list.splice(c,1),this.total--),this.$q.when().then(function(){b.toggleEmptyExperience()})},b.prototype.fetch=function(a){var b=this;void 0===a&&(a={skip:0,limit:this.quotesPageSize});var c=this.readOptionsFromLocation(),d=this.readSortFromSessionStorage();return Object.assign(c,a,d,{}),this.quotesApi.listQuotes(c).then(function(a){var d=a.quotes;0<c.skip&&b.list?b.list.push.apply(b.list,d):b.list=d||[],b.total=a.total,b.toggleEmptyExperience()})},b.prototype.fetchNext=function(){return this.fetch({skip:this.list.length,limit:this.quotesPageSize})},b.prototype.fetchTotals=function(a){var b=this;void 0===a&&(a=null);var c=[this.quotesApi.listQuotes({skip:0,limit:1}),this.quotesApi.quoteTotals(),this.quotesApi.quoteTotals(a)];return this.$q.all(c).then(function(a){var c=a[0],d=a[1],e=a[2];b.currency=c.quotes.length?c.quotes[0].currency:d.userCurrency,b.availableCurrencies=Object.keys(d.totalsByCurrency),b.countsByStatus=d.countsByStatus,b.quoteTotalsByCurrency=b.padTotalsWithZeroSums(b.availableCurrencies,e.totalsByCurrency)})},b.prototype.loadedAll=function(){return this.emptyExperienceOn||this.list&&this.total<=this.list.length},b.prototype.getFilter=function(){return this.readOptionsFromLocation().status||a.QuotesFilter.ALL_INVOICES},b.prototype.setFilter=function(b){return b===a.QuotesFilter.ALL_INVOICES?this.$location.search("status",null):this.$location.search("status",b)},b.prototype.getSearch=function(){return this.readOptionsFromLocation().search||null},b.prototype.setSearch=function(a){return this.$location.search("search",a)},b.prototype.clearFilterAndSearch=function(){this.$location.search("status",null),this.$location.search("search",null)},b.prototype.setSort=function(a){var b="desc"===a.direction?"-":"",c=""+b+a.columnName;return this.$window.sessionStorage.setItem(this.sortStorageKey,c),this.$location.search("sort",c)},b.prototype.getSort=function(){this.syncStorageWithLocation();var a=this.readOptionsFromLocation(),b="desc",c=this.experimentManager.isExperimentEnabled("specs.invoices.SortByIssueDate")?"issueDate":"quoteNumber";return a.sort&&(b=0===a.sort.indexOf("-")?"desc":"asc",c="desc"===b?a.sort.slice(1):a.sort),{columnName:c,direction:b}},b.prototype.readOptionsFromLocation=function(){return _.pick(this.$location.search(),["sort","status","search"])},b.prototype.readSortFromSessionStorage=function(){var a=this.$window.sessionStorage.getItem(this.sortStorageKey);return a?{
sort:a}:{}},b.prototype.syncStorageWithLocation=function(){var a=this.readSortFromSessionStorage().sort;a&&this.$location.search("sort",a)},b.prototype.toggleEmptyExperience=function(){var a=this.readOptionsFromLocation(),b=a.search||a.status;this.emptyExperienceOn=this.list&&0===this.list.length&&!b},b.prototype.padTotalsWithZeroSums=function(a,b){var c=this.buildCurrencyWithZeros(b),d={};return a.forEach(function(a){return d[a]=angular.copy(c)}),Object.assign(d,b)},b.prototype.buildCurrencyWithZeros=function(a){var b=a&&Object.keys(a)[0],c=b&&Object.keys(a[b]),d={};return c&&c.forEach(function(a){return d[a]=0}),d},b}();a.Quotes=b,angular.module("quotesAppInternal").service("quotes",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d){this.wixStorage=a,this.$q=b,this.wixAngularStorageErrors=c,this.STORAGE_OPTIONS=d}return a.$inject=["wixStorage","$q","wixAngularStorageErrors","STORAGE_OPTIONS"],a.prototype.showBanner=function(a){var b=this;return this.tryShow(a).then(function(){return b.show(a)})},a.prototype.hideBanner=function(a){var b=this,c=a.key,d=a.dismiss;return void 0!==d&&d?this.setStorageValue(c,!1).then(function(){return b.hide(c)}):this.$q.when(this.hide(c))},a.prototype.tryShow=function(a){var b=this;return this.getStorageValue(a).catch(function(a){return a===b.wixAngularStorageErrors.NOT_FOUND}).then(function(a){return JSON.parse(a)?b.$q.resolve():b.$q.reject()})},a.prototype.show=function(a){this[a]=!0},a.prototype.hide=function(a){this[a]=!1},a.prototype.setStorageValue=function(a,b){return this.wixStorage.set(a,b,this.STORAGE_OPTIONS)},a.prototype.getStorageValue=function(a){return this.wixStorage.get(a,this.STORAGE_OPTIONS)},a}();a.Banners=b,angular.module("quotesAppInternal").service("banners",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.commonsValidator=a}return a.$inject=["commonsValidator"],a.prototype.validateEmail=function(a){return(new this.commonsValidator.EmailValidator).isValid(a)},a}();a.EmailValidator=b,angular.module("quoteCommon").service("emailValidator",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.countries=a,this.states=b,this.$q=c,this.retrievePromise=null}return a.$inject=["countries","states","$q"],a.prototype.getCountryName=function(a){return this.loadLocaleData().then(function(b){return b.countryNames[a]||a})},a.prototype.getStateName=function(a,b){return this.loadLocaleData().then(function(c){return c.getStateName(a,b)||b})},a.prototype.loadLocaleData=function(){var a=this;return null===this.retrievePromise&&(this.retrievePromise=this.countries.retrieve().then(function(b){var c=_.mapValues(_.keyBy(b,"name"),"displayName"),d=b.map(function(b){return a.states.retrieve(b.name).then(function(a){return{countryName:b.name,stateNames:_.mapValues(_.keyBy(a,"name"),"displayName")}})});return a.$q.all(d).then(function(a){var b=_.mapValues(_.keyBy(a,"countryName"),"stateNames");return{countryNames:c,getStateName:function(a,c){if(b[a])return b[a][c]}}})})),this.retrievePromise},a}();a.LocaleResolver=b,angular.module("quoteCommon").service("localeResolver",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.provider=a,this.routes=b,this.frameworkFacade=c,this.$location=d,this.$route=e,this.$browser=f,this.IS_BUSINESS_MANAGER=g}return a.$inject=["provider","routes","frameworkFacade","$location","$route","$browser","IS_BUSINESS_MANAGER"],a.prototype.navigateToQuote=function(a){return this.$location.url(this.getPageUrl(this.routes.EDIT_QUOTE.replace(":quoteId",a)))},a.prototype.navigateToDuplicateQuote=function(a){return this.$location.url(this.getPageUrl(this.routes.DUPLICATE_QUOTE.replace(":quoteId",a)))},a.prototype.navigateToQuotePreview=function(a){return this.$location.url(this.getPageUrl(this.routes.PREVIEW.replace(":quoteId",a)))},a.prototype.navigateToQuoteList=function(){return this.$location.url(this.getPageUrl(this.routes.MY_QUOTES))},a.prototype.getPageUrl=function(a){return a=this.provider.migrateIfInvoices(a),this.getUrlPrefix()+"/"+a},a.prototype.getPagePostfix=function(a){return"/"+this.getPageUrl(a)},a.prototype.buildLink=function(a){return this.IS_BUSINESS_MANAGER?""+this.$browser.baseHref()+this.getPageUrl(a):"#"+this.getPagePostfix(a)},a.prototype.getUrlPrefix=function(){return this.provider.URL_PREFIX().FULL.replace(":metaSiteId",this.frameworkFacade.getSiteId())},a.prototype.getPaypalSuccessReturnUrl=function(){return this.frameworkFacade.getLink("dashboardAbsolutePath")+"/"+this.provider.URL_PREFIX().APP_NAME+"/"+this.routes.PAYPAL_SUCCESS},a}();a.QuotesRoute=b;var c=function(){function c(a,b,c,d,e){this.$routeProvider=a,this.routeMigrator=b,this.routes=c,this.IS_BUSINESS_MANAGER=d,this.experimentManagerProvider=e,this.prefixes={myaccount:{FULL:":metaSiteId/quotes",APP_NAME:"quotes"},businessmanager:{FULL:"quotes",APP_NAME:"quotes"}}}return c.$inject=["$routeProvider","routeMigrator","routes","IS_BUSINESS_MANAGER","experimentManagerProvider"],c.prototype.isInvoiceRoute=function(){var a=this.experimentManagerProvider.experiments;return window.location.href.includes("invoices")&&"true"===a["specs.invoices.InvoicesRoute"]&&this.IS_BUSINESS_MANAGER},c.prototype.migrateIfInvoices=function(a){return this.isInvoiceRoute()?this.routeMigrator(a):a},c.prototype.URL_PREFIX=function(){return this.IS_BUSINESS_MANAGER?this.migrateIfInvoices(this.prefixes.businessmanager):this.prefixes.myaccount},c.prototype.configureRoutes=function(){var b=this;angular.merge(this.routes,this.migrateIfInvoices(this.routes)),this.$routeProvider.when("/"+this.URL_PREFIX().FULL+"/"+this.routes.MY_QUOTES,{reloadOnSearch:!1,template:function(a){return'<quote-list-page is-on-boarding="$resolve.isOnBoarding" preview="\''+(a.preview||"")+"'\"></quote-list-page>"},biPageName:"my invoices",resolve:{preloadTotals:["quotes",function(b){return b.fetchTotals(a.DateRange.thisYear)}],userCurrency:["settingsApi",function(a){return a.loadGeneralSettings().then(function(a){return a.currency})}],isOnBoarding:["onBoarding",function(a){return a.setupOnboarding()}],customerId:function(){},originalQuoteId:function(){}}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.CREATE_QUOTE,{reloadOnSearch:!1,templateUrl:"modules/quotes/quote/quote.preload.html",controller:"QuoteController",controllerAs:"quote",biPageName:"create invoice",resolve:{action:function(){return"create"},quote:["quotes",function(a){return a.createQuote()}],originalQuoteId:function(){},nextNumber:["quoteNumber",function(a){return a.next()}],userCurrency:["settingsApi",function(a){return a.loadGeneralSettings().then(function(a){return a.currency})}],customerId:["$route",function(a){return a.current.params.customerId}],setupBusinessInfo:["onBoarding","quotesRoute","$q",function(a,b,c){return a.setupBusinessInfo().catch(function(){return b.navigateToQuoteList(),c.reject()})}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.EDIT_QUOTE,{templateUrl:"modules/quotes/quote/quote.preload.html",controller:"QuoteController",controllerAs:"quote",biPageName:"edit invoice",resolve:{action:function(){return"edit"},quote:["quotes","$route",function(a,b){return a.getQuote(b.current.params.quoteId)}],customerId:function(){},getStartedLink:function(){},originalQuoteId:function(){},nextNumber:function(){}}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.DUPLICATE_QUOTE,{templateUrl:"modules/quotes/quote/quote.preload.html",controller:"QuoteController",controllerAs:"quote",biPageName:"duplicate invoice",resolve:{action:function(){return"create"},quote:["quotes","$route","quoteDuplicator",function(a,b,c){return a.getQuote(b.current.params.quoteId).then(function(a){return c.duplicateQuote(a)})}],customerId:function(){},getStartedLink:function(){},originalQuoteId:["$route",function(a){return a.current.params.quoteId}],nextNumber:["quoteNumber",function(a){return a.next()}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.PRODUCTS,{templateUrl:"modules/quotes/product-list/product-list.preload.html",controller:"ProductListController",controllerAs:"products",biPageName:"products",resolve:{productsList:["productsApi",function(a){return a.listProducts()}],settings:["settingsApi",function(a){return a.loadGeneralSettings()}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.TAX_SUMMARY,{template:'<tax-summary-report-page settings="$resolve.settings"></tax-summary-report-page>',biPageName:"tax_summary",resolve:{settings:["reportsApi",function(a){return a.getSettings()}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.REVENUE_SUMMARY,{template:'<revenue-summary-report-page settings="$resolve.settings"></revenue-summary-report-page>',biPageName:"revenue_summary",resolve:{settings:["reportsApi",function(a){return a.getSettings()}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.REPORTS,{template:"<reports-page></reports-page>",biPageName:"reports"}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.SETTINGS,{template:"<settings></settings>",biPageName:"settings"}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.PAYMENTS,{template:'<payments user-currency="$resolve.settings.currency"></payments>',biPageName:"payments",resolve:{settings:["settingsApi",function(a){return a.loadGeneralSettings()}]}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.PAYPAL_SUCCESS,{controller:"PaypalSuccessController",template:" "}).when("/"+this.URL_PREFIX().FULL+"/:quoteId",{redirectTo:function(a){var c=a.quoteId;return"/"+b.URL_PREFIX().FULL+"/"+b.routes.MY_QUOTES+"?preview="+c}}).when("/"+this.URL_PREFIX().FULL+"/"+this.routes.PREVIEW,{templateUrl:"modules/quote-preview/quote-preview.preload.html",controller:"QuotePreviewController",controllerAs:"previewCtrl",resolve:{quote:["quotesApi","$route",function(a,b){return a.getQuote(b.current.params.quoteId)}]}}).when("/"+this.URL_PREFIX().FULL,{redirectTo:"/"+this.URL_PREFIX().FULL+"/"+this.routes.MY_QUOTES})},c.prototype.$get=function(a){return a.instantiate(b,{provider:this})},c.prototype.$get.$inject=["$injector"],c}();a.QuotesRouteProvider=c,angular.module("quotesRoute").provider("quotesRoute",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.isUtcBeforeFix=function(a){return 0!==a.getUTCHours()||0!==a.getUTCMinutes()||0!==a.getUTCSeconds()},a.dateFromUTC=function(b){var c=new Date(b);if(a.isUtcBeforeFix(c))return c;var d=c.getUTCFullYear(),e=c.getUTCMonth(),f=c.getUTCDate();return new Date(d,e,f)},a.utcFromDate=function(a){var b=new Date(a),c=b.getFullYear(),d=b.getMonth(),e=b.getDate();return Date.UTC(c,d,e)},a}();angular.module("quoteCommon").factory("localizeDate",function(){return b.dateFromUTC}).factory("delocalizeDate",function(){return b.utcFromDate})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").factory("verticalInfo",function(){return{}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.$mdDialog=a,this.tax=b,this.isNewTax=c}return a.$inject=["$mdDialog","tax","isNewTax"],a.prototype.save=function(){return this.$mdDialog.hide(this.tax)},a.prototype.cancel=function(){return this.$mdDialog.cancel()},a}();a.TaxController=b,angular.module("quotesAppInternal").controller("TaxController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d){this.taxes=a,this.taxDialog=b,this.dialogs=c,this.wixBiLogger=d,this.fetchTaxes()}return b.$inject=["taxes","taxDialog","dialogs","wixBiLogger"],b.prototype.fetchTaxes=function(){var a=this;this.isLoading=!0,this.taxes.listTaxes().then(function(b){a.taxesList=b,a.isLoading=!1})},b.prototype.openTaxDialog=function(b){var c,d,e=this;b?(c=new a.Tax(b),d="edit",this.wixBiLogger.log("TAX_EDIT",{})):(c=new a.Tax,d="create",this.biLogNew());var f=c.copy();return this.taxDialog.open(c).then(function(a){return e.taxes.save(a,f)}).then(this.dialogs.showNotificationSuccess("tax.notification.success")).then(function(){return e.fetchTaxes()}).then(function(){return e.wixBiLogger.log("TAX_SAVE",{origin:d})}).catch(function(a){return e.wixBiLogger.log("TAX_CANCEL",{origin:d}),e.dialogs.showNotificationOnError("tax.notification.error")(a)})},b.prototype.deleteTax=function(b){var c,d=this;return b&&(c=new a.Tax(b)),this.wixBiLogger.log("TAX_DELETE",{}),this.dialogs.openDeleteTaxDialog().then(function(){return d.taxes.deleteTax(c.taxId)}).then(this.dialogs.showNotificationSuccess("delete_tax_dialog.notification.success")).then(function(){return d.fetchTaxes()}).then(function(){return d.wixBiLogger.log("TAX_DELETE_CONFIRM",{})}).catch(function(a){return d.wixBiLogger.log("TAX_DELETE_CANCEL",{}),d.dialogs.showNotificationOnError("delete_tax_dialog.notification.error")(a)})},b.prototype.biLogNew=function(){this.wixBiLogger.log("TAX_NEW",{origin:this.taxesList.length?"settings":"empty experience"})},b}();a.TaxesListController=b,angular.module("quotesAppInternal").controller("TaxesListController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d){var e=this;this.settingsApi=a,this.$rootScope=b,this.wixBiLogger=c,this.notifications=d,this.isLoading=!0,this.biNames={notes:"settings-notes",legal:"settings-legal"},this.settingsApi.loadNotesSettings().then(function(a){e.settings=a,e.oldSettings=angular.copy(a),e.isLoading=!1})}return a.$inject=["settingsApi","$rootScope","wixBiLogger","notifications"],a.prototype.saveNotes=function(){this.save(this.biNames.notes,this.settings.defaultNotes)},a.prototype.saveLegal=function(){this.save(this.biNames.legal,this.settings.defaultLegalTerms)},a.prototype.save=function(a,b){var c=this;JSON.stringify(this.settings)!==JSON.stringify(this.oldSettings)&&(this.wixBiLogger.log("CHANGE_VALUE",{origin:"settings",name:a,value:b}),this.settingsApi.saveNotesSettings(this.settings).then(function(){return c.notifications.showTranslated("settings.notification.success",{type:"success"})}).catch(function(){return c.notifications.showTranslated("settings.notification.error",{type:"error"})}),this.oldSettings=angular.copy(this.settings))},a}();a.DefaultNotesSettingsController=b,angular.module("quotesAppInternal").controller("DefaultNotesSettingsController",b)}(invoices||(invoices={}));var invoices;!function(a){var b={notes:"",legalTerms:"",initialNumber:"0000001",paymentTerms:{termType:"DueOnReceipt",termData:""},createInvoiceUponAccept:!1,validThroughDays:30},c=function(){function a(a,c,d,e,f,g,h,i){var j=this;this.$q=a,this.settingsApi=c,this.notifications=d,this.quoteNumberPadding=e,this.quoteNumberMaxLength=f,this.$translate=g,this.experimentManager=h,this.dialogs=i,this.paymentTermsOptions=[{termType:"DueOnReceipt",withData:!1,key:"invoices_settings.general_settings.price_quote.payment_terms.dueonreceipt"},{termType:"NetPlus",withData:!0,key:"invoices_settings.general_settings.price_quote.payment_terms.netplus"}],this.disableInitialNumberInput=!1,this.isLoading=!0,this.experimentManager.isExperimentEnabled("specs.wos.DisplayPriceQuotes")&&this.$q.all([this.settingsApi.loadPriceQuotesSettings(),this.settingsApi.loadPriceQuoteNextNumber()]).then(function(a){var c=a[0],d=a[1];j.minimumInitialNumber=parseInt(d,10),j.priceQuoteSettings=c||b,j.priceQuoteSettings.initialNumber=j.pad(parseInt(j.priceQuoteSettings.initialNumber,10)),j.originalInitialNumber=parseInt(j.priceQuoteSettings.initialNumber,10),j.oldSettings=angular.copy(c),j.isLoading=!1})}return a.$inject=["$q","settingsApi","notifications","quoteNumberPadding","quoteNumberMaxLength","$translate","experimentManager","dialogs"],Object.defineProperty(a.prototype,"translatedData",{get:function(){var a=this.priceQuoteSettings&&this.priceQuoteSettings.paymentTerms&&this.priceQuoteSettings.paymentTerms.termType;return a?this.$translate("invoices_settings.general_settings.price_quote.payment_terms.data."+a.toLowerCase()):"Data"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"withData",{get:function(){var a=this;return!!this.paymentTermsOptions.find(function(b){var c=b.termType,d=b.withData;return a.priceQuoteSettings&&a.priceQuoteSettings.paymentTerms&&a.priceQuoteSettings.paymentTerms.termType===c&&d})},enumerable:!0,configurable:!0}),a.prototype.validateInitialNumber=function(a){void 0===a&&(a=null);var b=parseInt(this.priceQuoteSettings.initialNumber,10),c=b>=this.minimumInitialNumber;this.initialPriceQuoteNumberForm.initialPriceQuoteNum.$setValidity("number-error",c),a&&13===a.keyCode&&c&&a.target.blur()},a.prototype.resetInitialQuoteNumber=function(a){this.priceQuoteSettings.initialNumber=this.pad(a),this.initialPriceQuoteNumberForm.initialPriceQuoteNum.$setValidity("number-error",!0),this.disableInitialNumberInput=!1},a.prototype.saveInitialQuoteNumber=function(){var a=this,b=parseInt(this.priceQuoteSettings.initialNumber,10);this.originalInitialNumber!==b&&this.initialPriceQuoteNumberForm.$valid?(this.disableInitialNumberInput=!0,this.dialogs.openInitialPriceQuoteNumberDialog().then(function(){a.savePriceQuotesSettings(),a.resetInitialQuoteNumber(b),a.originalInitialNumber=b,a.disableInitialNumberInput=!1}).catch(function(){return a.resetInitialQuoteNumber(a.originalInitialNumber)})):this.resetInitialQuoteNumber(this.originalInitialNumber)},a.prototype.pad=function(a){for(var b=a+"";b.length<this.quoteNumberPadding;)b="0"+b;return b},a.prototype.savePriceQuotesSettings=function(){var a=this;JSON.stringify(this.priceQuoteSettings)!==JSON.stringify(this.oldSettings)&&(this.settingsApi.savePriceQuotesSettings(this.priceQuoteSettings).then(function(){return a.notifications.showTranslated("settings.notification.success",{type:"success"})}).catch(function(){return a.notifications.showTranslated("settings.notification.error",{type:"error"})}),this.oldSettings=angular.copy(this.priceQuoteSettings))},a}();a.PriceQuotesSettingsController=c,angular.module("quotesAppInternal").controller("PriceQuotesSettingsController",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.settingsApi=a,this.currencies=b,this.$rootScope=c,this.quoteNumberPadding=d,this.quoteNumberMaxLength=e,this.notifications=f,this.dialogs=g,this.$scope=h,this.isLoading=!0,this.disableInitialNumberInput=!1,this.settingsApi.loadGeneralSettings().then(function(a){i.minimumInitialNumber=a.lastQuoteNumber,i.originalInitialNumber=a.initialQuoteNumber,i.settings={currency:a.currency,initialQuoteNumber:i.pad(a.initialQuoteNumber,i.quoteNumberPadding)},i.isLoading=!1}),this.currencies.retrieve().then(function(a){i.currencyList=a})}return a.$inject=["settingsApi","currencies","$rootScope","quoteNumberPadding","quoteNumberMaxLength","notifications","dialogs","$scope"],a.prototype.saveCurrency=function(){var a=this;this.settingsApi.saveCurrency(this.settings.currency).then(function(){return a.notifications.showTranslated("settings.notification.success",{type:"success"})}).catch(function(){return a.notifications.showTranslated("settings.notification.error",{type:"error"})})},a.prototype.validateInitialNumber=function(a){void 0===a&&(a=null);var b=parseInt(this.settings.initialQuoteNumber,10),c=b>this.minimumInitialNumber;this.$scope.initialNumberForm.initialNum.$setValidity("number-error",c),a&&13===a.keyCode&&c&&a.target.blur()},a.prototype.resetInitialQuoteNumber=function(a){this.settings.initialQuoteNumber=this.pad(a,this.quoteNumberPadding),this.$scope.initialNumberForm.initialNum.$setValidity("number-error",!0),this.disableInitialNumberInput=!1},a.prototype.saveInitialQuoteNumber=function(){var a=this,b=parseInt(this.settings.initialQuoteNumber,10);this.originalInitialNumber!==b&&this.$scope.initialNumberForm.$valid?(this.disableInitialNumberInput=!0,this.dialogs.openInitialInvoiceNumberDialog().then(function(){a.settingsApi.saveInitialQuoteNumber(b).then(function(){a.notifications.showTranslated("settings.notification.success",{type:"success"}),a.resetInitialQuoteNumber(b),a.originalInitialNumber=b}).catch(function(){a.$scope.initialNumberForm.initialNum.$setValidity("number-error",!1)}),a.disableInitialNumberInput=!1}).catch(function(){return a.resetInitialQuoteNumber(a.originalInitialNumber)})):this.resetInitialQuoteNumber(this.originalInitialNumber)},a.prototype.pad=function(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c},a}();a.GeneralSettingsController=b,angular.module("quotesAppInternal").controller("GeneralSettingsController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$location=a,this.settingsApi=b,this.$rootScope=c,this.notifications=d,this.$scope=e,this.BZM_NAV=f,this.frameworkFacade=g,this.$translate=h,this.isBusinessInfoLoading=!0,this.isBusinessAddressLoading=!0,this.settingsApi.loadCompanyId().then(function(a){i.companyId=a.companyId,i.prevCompanyId=i.companyId}),e.$on("widgetLoaded",function(a){var b=a.targetScope.options.widgetName;"business-basic-view"===b?i.isBusinessInfoLoading=!1:"business-address"===b&&(i.isBusinessAddressLoading=!1)})}return a.$inject=["$location","settingsApi","$rootScope","notifications","$scope","BZM_NAV","frameworkFacade","$translate"],a.prototype.saveCompanyId=function(a){var b=this;a!==this.prevCompanyId&&this.settingsApi.saveCompanyId(a).then(function(){b.prevCompanyId=a,b.notifications.showTranslated("settings.notification.success",{type:"success"})})},a.prototype.scrollTo=function(a){angular.element(a)[0].scrollIntoView(!0)},a.prototype.navigateToBusinessSettings=function(){return this.frameworkFacade.navigateTo(this.BZM_NAV.BUSINESS_INFO)},a}();a.SettingsController=b,angular.module("quotesAppInternal").controller("SettingsController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.quote=a,this.quotesRoute=b}return a.$inject=["quote","quotesRoute"],a}();a.QuotePreviewController=b,angular.module("quotesAppInternal").controller("QuotePreviewController",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h){var i=this;this.$q=b,this.props=c,this.actions=d,this.quotesApi=e,this.$timeout=f,this.$document=g,this.wixBiLogger=h;var j=c().registerOpen;"function"==typeof j&&j(function(a){return i.$timeout(function(){return g.find("body").attr("app","quotes"),i.showPreview(a)})})}return a.$inject=["$scope","$q","props","actions","quotesApi","$timeout","$document","wixBiLogger"],a.prototype.showPreview=function(a){var b,c=this;return this.wixBiLogger.log("INVOICE_PREVIEW",{origin:this.props().origin}),this.quotesApi.getQuote(a).then(function(a){return b=a}).then(function(){return c.actions.preview(b,!0)}).then(function(a){switch(a){case"send":return c.sendAndClose(b);default:return[]}}).catch(function(a){if("canceled"!==a)throw a;return[]}).finally(function(){c.$document.find("body").removeAttr("app")})},a.prototype.sendAndClose=function(a){var b=this,c={origin:this.props().origin,invoice_id:a.quoteId,resend:"Sent"===a.status};return this.wixBiLogger.log("INVOICE_SEND_BUTTON",c),this.actions.sendSilent(a).catch(function(){return b.wixBiLogger.log("INVOICE_SEND_CANCEL",c),b.$q.reject("canceled")}).then(function(){return[{actionName:"send",date:Date.now()}]})},a}();angular.module("quotesAppInternal").component("invoicePreview",{template:"",controller:b})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b,c,d,e,f,g){var h=this;this.$scope=a,this.$timeout=b,this.$q=c,this.localeResolver=d,this.QUOTE_STATUS=e,this.$translate=f,this.experimentManager=g,this.hiddenStatusLine=["draft","sent","viewed"],this.businessAddressNames={},this.customerAddressNames={},this.publishPreviewLoaded(),this.loadAddressFullNames("businessInfo.businessAddress").then(function(a){var b=a[0],c=a[1];h.businessAddressNames.country=b,h.businessAddressNames.state=c}),this.loadAddressFullNames("customer.address").then(function(a){var b=a[0],c=a[1];h.customerAddressNames.country=b,h.customerAddressNames.state=c})}return b.$inject=["$scope","$timeout","$q","localeResolver","QUOTE_STATUS","$translate","experimentManager"],b.prototype.loadAddressFullNames=function(a){var b=_.get(this.$scope.quote,a+".country"),c=_.get(this.$scope.quote,a+".state"),d=this.localeResolver.getCountryName(b),e=this.localeResolver.getStateName(b,c).then(function(a){return"USA"===b?c:a});return this.$q.all([d,e])},b.prototype.publishPreviewLoaded=function(){var a=this;this.$timeout(function(){a.$scope.$emit("QUOTE_PREVIEW_LOADED")},0,!1)},b.prototype.getStatus=function(){return this.$scope.quote.status.toLowerCase()},b.prototype.isStatusLineHidden=function(){var a=this.getStatus();return this.hiddenStatusLine.indexOf(a)>-1},b.prototype.statusLineClass=function(){return this.getStatus()},b.prototype.statusLineTranslationKey=function(){return"quote.preview_status."+this.getStatus()},b.prototype.isPartialAndOverdue=function(){return this.getStatus()===this.QUOTE_STATUS.PARTIAL_AND_OVERDUE.toLowerCase()},b.prototype.showSubtotal=function(){var a=this.$scope.quote.lineItems.length>1,b=this.$scope.quote.taxes.length>0,c=this.showDiscount()||this.showPercentageDiscount()||this.showFixedDiscount(),d=this.$scope.quote.itemizedFees.length>0;return a||b||c||d},b.prototype.showDiscount=function(){return this.$scope.quote.discountRate>0&&!this.showPercentageDiscount()},b.prototype.showPercentageDiscount=function(){return _.get(this.$scope,"quote.discount.rate",0)>0},b.prototype.showFixedDiscount=function(){return _.get(this.$scope,"quote.discount.amount",0)>0},b.prototype.isAddressEmpty=function(b){return a.Address.isEmpty(b)},b.prototype.prefixAddress=function(a){return"Before"===_.get(a,"description.placement")},b.prototype.sufixAddress=function(a){return"After"===_.get(a,"description.placement")},b.prototype.replaceAddress=function(a){return"Replace"===_.get(a,"description.placement")},b.prototype.showAddress=function(a){return!(this.replaceAddress(a)||this.isAddressEmpty(a))},b.prototype.referenceText=function(){return _.get(this.$scope,"quote.sourceProperties.referenceText")},b}();a.QuoteView=b,angular.module("quoteCommon").directive("quoteView",["experimentManager",function(a){return{templateUrl:"modules/quote-view/quote-view.preload.html",controller:b,controllerAs:"quoteView",restrict:"E",scope:{quote:"="}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("isOverflow",["$timeout",function(a){return{restrict:"A",scope:{isOverflow:"="},link:function(b,c){b.$watch(function(){return c.text()},function(){a(function(){b.isOverflow=c[0].scrollWidth>c.innerWidth()+1},0)})}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("mdAutocomplete",["$compile","$timeout",function(a,b){return{require:"mdAutocomplete",link:function(a,c,d,e){e.hasNotFound=!0;var f=function(){b(function(){c.find("input").on("blur",_.debounce(a.blurFn,150))})};d.mdValidate&&(a.blurFn=function(){return a.$eval(d.mdValidate)},f())}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("autoFocusLonger",["$timeout",function(a){return{restrict:"A",link:function(b,c){a(function(){c[0].focus()},100)}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("scrollToTop",["$animate",function(a){return{restrict:"A",require:"^form",link:function(a,b,c,d){var e=function(){var a=$(b).find(".ng-invalid");return 0!==a.length&&a[0].scrollIntoView(!1),!0};b.on("submit",e)}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("scrollContentTop",function(){return{restrict:"A",scope:{},link:function(a,b){a.$on("$routeChangeSuccess",function(){b.scrollTop(0)})}}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){var d=Object.keys(c.$attr).filter(function(a){return a.match(/^breakpoint[A-Z]/)}).filter(function(a){return c[a]}).map(function(a){return{name:c.$attr[a],val:c[a]}});a.$on("$routeChangeSuccess",function(){d.map(function(a){var c=a.name;return b.removeClass(c)})}),b.on("scroll",function(){d.map(function(a){var c=a.name,d=a.val;b.scrollTop()>d?b.hasClass(c)||b.addClass(c):b.removeClass(c)})})}return a.$inject=["$scope","$element","$attrs"],a}();angular.module("quotesAppInternal").directive("scrollBreakpoint",function(){return{controller:b,restrict:"A"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("onNearBottom",function(){return{restrict:"A",link:function(a,b,c){b.on("scroll",_.throttle(function(){var d=b[0].clientHeight;b[0].scrollHeight-b.scrollTop()-d<2*d/3&&a.$eval(c.onNearBottom)},300,{leading:!0}))}}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.editContactModal=a,this.frameworkFacade=b,this.$scope=c,this.EDIT_CONTACT_MODAL_OPTIONS=d,this.emailValidator=e,this.lastEditedName=null,this.isEditingCustomer=!1,this.customerModal=null,this.$scope.$on("openEditContactDialog",function(){f.editCustomer()}),this.customer.contactId&&b.getContactById(this.customer.contactId).then(function(a){return a.data}).then(function(a){return f.customer.name=f.customer.getNameString(a),f.customer.email=f.customer.getEmailString(a.emails),a}).then(function(a){return f.customer.updateAvailableListsFromFullDto(a)}).catch(function(){f.customer.updateAvailableListsFromFullDto({addresses:[f.customer.fullAddress],emails:[{email:f.customer.email}]})})}return a.$inject=["editContactModal","frameworkFacade","$scope","EDIT_CONTACT_MODAL_OPTIONS","emailValidator"],a.prototype.createNewCustomer=function(a){var b,d=this;if(a){var e=this.emailValidator.validateEmail(a.name);b=new c(a).create(e)}return this.isEditingCustomer||(this.isEditingCustomer=!0,this.customerModal=this.editContactModal.create(b,this.EDIT_CONTACT_MODAL_OPTIONS).then(function(a){return a.contact}).then(function(a){d.customer.updateFromFullDto(a),d.lastEditedName=d.customer.name}).finally(function(){d.customerModal=null,d.isEditingCustomer=!1,d.customer.contactId||(d.customer.name=null)})),this.customerModal},a.prototype.editCustomer=function(){var a=this;this.isEditingCustomer||(this.isEditingCustomer=!0,this.editContactModal.edit(this.customer.contactId,this.EDIT_CONTACT_MODAL_OPTIONS).then(function(a){return a.contact}).then(function(b){a.customer.updateFromFullDto(b),a.isEditingCustomer=!1},function(b){a.isEditingCustomer=!1,(b.data&&-25001===b.data.errorCode||404===b.errorCode)&&a.createNewCustomer(a.customer)}))},a.prototype.searchCustomers=function(a){var b=this;return a!==this.lastEditedName&&(this.lastEditedName=null,this.lastQuery=this.getContacts(a).then(function(a){return b.filterContacts(a)})),this.lastQuery},a.prototype.validateCustomer=function(){this.customer.contactId||null!==this.customerModal||(this.customer.name=void 0,this.$scope.$apply())},a.prototype.customerKeyUp=function(a){var b=this;13===a.keyCode&&a.target.value&&null===this.customerModal&&(a.preventDefault(),this.searchCustomers(this.customer.name).then(function(a){a.length||null!==b.customerModal||b.createNewCustomer(b.customer)}))},a.prototype.filterContacts=function(a){var b=function(a){return a.length>0};return a.filter(function(a){return b(a.emails)})},a.prototype.getContacts=function(a){var b=a&&a.length>0?a:void 0;return this.frameworkFacade.searchContacts({search:b}).then(function(a){return a.items})},a}();a.CustomerSection=b;var c=function(){function a(a){this.customer=a}return a.prototype.create=function(a){var b={};return a&&(this.customer.email=this.customer.name,this.customer.name=void 0),b.name=this.getName(),this.customer.email&&(b.emails=[this.getEmail()]),this.customer.fullAddress&&(b.addresses=[this.getAddress()]),b},a.prototype.getName=function(){var a={};if("string"==typeof this.customer.name){var b=this.customer.name.indexOf(" ");b>-1?(a.first=this.customer.name.substr(0,b),a.last=this.customer.name.substr(b+1)):a.first=this.customer.name}return a},
a.prototype.getEmail=function(){return{tag:"",email:this.customer.email,emailStatus:"transactional"}},a.prototype.getAddress=function(){var a=this.customer.fullAddress;return{tag:"",address:a.street,city:a.city,region:a.state,postalCode:a.zip,country:a.country}},a}();angular.module("quotesAppInternal").directive("customerSection",function(){return{templateUrl:"modules/quotes/customer-section/customer-section.preload.html",controller:b,controllerAs:"customerSection",bindToController:!0,scope:{customer:"=",locked:"="},restrict:"E"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quoteCommon").directive("scaleToFit",["$window",function(a){return{restrict:"A",link:function(b,c){var d=c.parent(),e=0;d.length>0&&(e=c.parent().width()),0===e&&(e=a.innerWidth);var f=e/c.width();isFinite(f)&&f<=1&&(c.css("transform","scaleX("+f+") scaleY("+f+")"),c.css("transform-origin","top left"))}}}])}(invoices||(invoices={}));var MdDialogMinHeight=function(){function a(a,b,c,d){this.$scope=a,this.mutationObserver=b,this.minHeight=parseInt(d.mdDialogMinHeight,10),this.container=c.parents(".md-dialog-container"),c.parents("md-dialog").css({maxHeight:"none",minHeight:"none"}),this.container.length&&(this.raiseHeightToMin(),this.observeHeight())}return a.$inject=["$scope","mutationObserver","$element","$attrs"],a.prototype.observeHeight=function(){var a=this,b=new this.mutationObserver(function(){return a.raiseHeightToMin()});b.observe(this.container[0],{attributes:!0}),this.$scope.$on("$destroy",function(){b.disconnect()})},a.prototype.raiseHeightToMin=function(){this.container.height()<this.minHeight&&this.container.height(this.minHeight)},a}();angular.module("quotesAppInternal").directive("mdDialogMinHeight",function(){return{controller:MdDialogMinHeight,restrict:"A"}});var invoices;!function(a){var b=function(){function a(a,b,c,d){var e=JSON.parse(c.fixedOffset),f=c.fixedOffsetParent?b.parents(c.fixedOffsetParent):b,g=function(){return f.offset()||{top:0,left:0}},h=function(){var a=Object.keys(e).reduce(function(a,b){var c=g();return a[b]=e[b].replace(/\$x/g,c.left+"px").replace(/\$y/g,c.top+"px"),a},{});b.css(a)};a.$watch(g,h,!0),d(h),a.$on("offsetChange",h)}return a.$inject=["$scope","$element","$attrs","$timeout"],a}();angular.module("quotesAppInternal").directive("fixedOffset",function(){return{controller:b,restrict:"A"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("selectOnClick",function(){return{restrict:"A",link:function(a,b){b.on("click",function(){return b.select()})}}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("dateFormatter",["$filter",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){e.$formatters.unshift(function(b){var c=b&&new Date(b);return isFinite(c)?a("date")(c,d.dateFormatter||"shortDate"):""})}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("sendFocus",function(){return{restrict:"A",link:function(a,b,c){var d=angular.element(c.sendFocus);b.on("click",function(){d.focus()}),b.on("mousedown",function(a){a.preventDefault()})}}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("commonsEmailValidator",["emailValidator",function(a){return{require:"ngModel",restrict:"A",link:function(b,c,d,e){e.$parsers.unshift(function(b){return a.validateEmail(b)?(e.$setValidity("email",!0),b):void e.$setValidity("email",!1)})}}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quoteCommon").filter("currencySymbol",["iso4217",function(a){return function(b){if(!b)return"$";var c=a.getCurrencyByCode(b);return c&&c.symbol?c.symbol:b}}])}(invoices||(invoices={}));var invoices;!function(a){angular.module("quoteCommon").filter("localizeDate",["localizeDate",function(a){return a}])}(invoices||(invoices={})),angular.module("quotesAppInternal").component("quotesEmptyExperience",{templateUrl:"modules/quotes/quotes-empty-experience/quotes-empty-experience.preload.html",bindings:{createUrl:"@"}});var invoices;!function(a){var b=function(){function b(a,b,c,d,e){this.verticalInfo=a,this.frameworkFacade=b,this.BZM_NAV=c,this.experimentManager=d,this.$translate=e}return b.$inject=["verticalInfo","frameworkFacade","BZM_NAV","experimentManager","$translate"],b.prototype.hasStore=function(){return this.verticalInfo[this.frameworkFacade.moduleId.Stores]},b.prototype.navigateToStoreSettings=function(){this.experimentManager.isExperimentEnabled("specs.invoices.ShowBackToast")?this.frameworkFacade.navigateToAndShowBackToast(this.BZM_NAV.STORE_SETTINGS,this.BZM_NAV.INVOICES,a.translateBackToTexts(this.$translate,this.BZM_NAV.BACK_TO_INVOICES)):this.frameworkFacade.navigateTo(this.BZM_NAV.STORE_SETTINGS)},b}();angular.module("quotesAppInternal").component("emptyExperience",{templateUrl:"modules/quotes/empty-experience/empty-experience.preload.html",controller:b,bindings:{createUrl:"@"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("delegateClick",function(){return{restrict:"A",link:function(a,b,c){b.on("click",function(){angular.element(c.delegateClick).click()})}}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.dialogs=a,this.$route=b,this.$route&&this.$route.current&&this.$route.current.biPageName?this.biOrigin=this.$route.current.biPageName:this.biOrigin="onboarding"}return a.$inject=["dialogs","$route"],a.prototype.activate=function(){this.dialogs.openGetPaidViaStripeDialog(this.onConnectStripe,this.onCreateStripe)},a}();a.StripePaymentMethod=b,angular.module("quotesAppInternal").component("stripePaymentMethod",{templateUrl:"modules/quotes/stripe-payment-method/stripe-payment-method.preload.html",controller:b,bindings:{methodEnabled:"=",onDeactivate:"&",onConnectStripe:"&",onCreateStripe:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.prototype.isPaidButtonShown=function(){return this.dialog.isPaidButtonShown(this.quote)},a.prototype.isEditButtonShown=function(){return this.dialog.isEditButtonShown(this.quote)},a.prototype.isSendButtonShown=function(){return!this.isResendButtonShown()},a.prototype.isResendButtonShown=function(){return this.quote.wasSent},a}();angular.module("quotesAppInternal").component("buttonStrip",{template:'\n    <div class="button-strip pull-left">\n      <button class="wix-button invisible" ng-click="$ctrl.dialog.pay()" data-hook="quote-preview-add-payment" ng-if="$ctrl.isPaidButtonShown()">{{"quote.preview.add_payment" | translate}}</button>\n    </div>\n    <div class="button-strip pull-right">\n      <button class="wix-button invisible" ng-click="$ctrl.dialog.print()" data-hook="quote-preview-print">{{"actions.print" | translate}}</button>\n      <button class="wix-button invisible" ng-click="$ctrl.dialog.send()" data-hook="quote-preview-send" ng-if="$ctrl.isSendButtonShown()">{{"actions.send" | translate}}</button>\n      <button class="wix-button invisible" ng-click="$ctrl.dialog.send()" data-hook="quote-preview-resend" ng-if="$ctrl.isResendButtonShown()">{{"actions.resend" | translate}}</button>\n      <button class="wix-button invisible" ng-click="$ctrl.dialog.edit()" data-hook="quote-preview-edit" ng-if="$ctrl.isEditButtonShown()">{{"actions.edit" | translate}}</button>\n    </div>',bindings:{quote:"=",dialog:"="},controller:b})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$mdDialog=a,this.$route=b,this.$route&&this.$route.current&&this.$route.current.biPageName&&(this.biOrigin=this.$route.current.biPageName),this.biOrigin="onboarding"}return a.$inject=["$mdDialog","$route"],a.prototype.gotoConnectStripe=function(){this.onConnectStripe(),this.$mdDialog.hide()},a.prototype.gotoCreateStripe=function(){this.onCreateStripe(),this.$mdDialog.hide()},a.connectStripeResponse="connect-stripe",a.createStripeResponse="create-stripe",a}();angular.module("quotesAppInternal").component("getPaidViaStripeDialog",{templateUrl:"modules/quotes/get-paid-via-stripe-dialog/get-paid-via-stripe-dialog.preload.html",controller:b,bindings:{onConnectStripe:"&",onCreateStripe:"&"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").component("payments",{templateUrl:"modules/quotes/payments/payments.preload.html",controller:"PaymentsController",bindings:{userCurrency:"=",optionalTitle:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.$mdDialog=a,this.$scope=b,this.paymentDate=new Date((new Date).setHours(12,0,0,0)).toString(),this.amount=this.quote.balance}return a.$inject=["$mdDialog","$scope"],a.prototype.cancel=function(){return this.$mdDialog.cancel()},a.prototype.confirm=function(){if(this.isAmountValid()){var a=this.amount===this.quote.balance;return this.$mdDialog.hide(this.onAddPayment({amount:this.amount,date:new Date(this.paymentDate)}).then(function(){return String(a)}))}},a.prototype.isAmountValid=function(){return!isNaN(this.amount)&&this.amount>0&&this.amount<=this.quote.balance},a.addPaymentSuccessKey="add_payment_to_quote_dialog.notification.success",a.addPaymentErrorKey="add_payment_to_quote_dialog.notification.error",a}();a.AddPaymentToQuoteDialog=b,angular.module("quotesAppInternal").component("addPaymentToQuoteDialog",{templateUrl:"modules/quotes/add-payment-to-quote-dialog/add-payment-to-quote-dialog.preload.html",controller:b,bindings:{quote:"=",onAddPayment:"&"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").component("partialQuoteTooltip",{template:'<div class="partial-quote-tooltip" data-hook="partial-quote-tooltip">\n        <div><span data-hook="partial-quote-tooltip-total-label">{{ \'quote.status.partial_tooltip_total\' | translate }}:</span><span data-hook="partial-quote-tooltip-total">{{ $ctrl.quote.total | money : $ctrl.quote.currency }}</span></div>\n        <div><span data-hook="partial-quote-tooltip-paid-label">{{ \'quote.status.partial_tooltip_paid\' | translate }}:</span><span data-hook="partial-quote-tooltip-paid">{{ $ctrl.quote.paid | money : $ctrl.quote.currency }}</span></div>\n        <div class="balance"><span data-hook="partial-quote-tooltip-balance-label">{{ \'quote.status.partial_tooltip_balance\' | translate }}:</span><span data-hook="partial-quote-tooltip-balance">{{ $ctrl.quote.balance | money : $ctrl.quote.currency }}</span></div>\n      </div>',bindings:{quote:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.translateArgs=angular.toJson({customerName:this.quote.customer.name||this.quote.customer.email,viewDate:a(this.quote.lastViewed,"mediumDate"),viewHour:a(this.quote.lastViewed,"h:mma").replace(/AM/," a.m.").replace(/PM/," p.m.")})}return a.$inject=["dateFilter"],a}();a.ViewedQuoteTooltip=b,angular.module("quotesAppInternal").component("viewedQuoteTooltip",{template:"<div data-hook=\"viewed-quote-tooltip-content\">\n        {{ 'quote.status.viewed_tooltip' | translate: $ctrl.translateArgs }}\n      </div>",controller:b,bindings:{quote:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(b,c,d,e){var f=this;this.$translate=d,this.$timeout=e;var g=[a.ALL_INVOICES,b.DRAFT,b.SENT,b.OVERDUE,b.PARTIALLYPAID,b.PAID,b.PROCESSING,b.VOID];this.updateStatuses(g),c.$watch(function(){return f.selectedFilter},function(b){f.selectedStatus&&b===f.selectedStatus.status||(f.selectedStatus=f.setCount(b||a.ALL_INVOICES))}),c.$watch(function(){return f.countsByStatus},function(){f.updateStatuses(g)},!0)}return a.$inject=["QUOTE_STATUS","$scope","$translate","$timeout"],a.prototype.updateStatuses=function(a){var b=this;this.statuses=a.map(function(a){return b.setCount(a)})},a.prototype.setCount=function(b){var c=_.get(this.countsByStatus,b.toLowerCase(),0);return{status:b,name:this.$translate(""+a.translationPrefix+b.toLowerCase()),count:c}},a.prototype.notifyFilterChanged=function(){this.$timeout(function(){angular.element(document.activeElement).blur()},200),this.onFilterChange({status:this.selectedStatus.status})},a.ALL_INVOICES="All",a.translationPrefix="quotes.filter.",a}();a.QuotesFilter=b,angular.module("quotesAppInternal").component("quotesFilter",{template:'<label class="filter-label" data-hook="quotes-filter-label">{{ \'quotes.filter.label\' | translate }}:</label>\n      <md-select\n        tabindex = "-1"\n        data-hook="quotes-filter"\n        ng-model="$ctrl.selectedStatus"\n        md-selected-text="$ctrl.selectedStatus.name"\n        md-on-close="$ctrl.notifyFilterChanged()"\n        md-container-class="quotes-filter-options-container"\n        ng-model-options="{trackBy: \'$value.status\'}">\n        <md-option\n          data-hook="quotes-filter-{{status.status.toLowerCase()}}"\n          ng-repeat="status in $ctrl.statuses"\n          ng-value="status">\n          <span class="name" data-hook="status-name">{{status.name}}</span>\n          <span class="count" data-hook="status-count">{{status.count}}</span>\n        </md-option>\n      </md-select>',controller:b,bindings:{countsByStatus:"=",onFilterChange:"&",selectedFilter:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(a,b){var c=this;this.$translate=a,b.$watchGroup([function(){return c.search},function(){return c.status}],function(){return c.buildMessage()})}return b.$inject=["$translate","$scope"],b.prototype.buildMessage=function(){var a={filter:this.translatedStatus(),search:this.search},c={term:this.search||this.translatedStatus()};this.showMessageWithFilterAndSearch()?(this.message=b.messageWithFilterAndSearchKey,this.keys=a):(this.message=b.messageForSingleTerm,this.keys=c)},b.prototype.translatedStatus=function(){return this.status&&this.$translate("quotes.filter."+this.status.toLowerCase())},b.prototype.showMessageWithFilterAndSearch=function(){return this.search&&this.status&&this.status!==a.QuotesFilter.ALL_INVOICES},b.messageWithFilterAndSearchKey="quotes.filter.empty_message_search_in_filter",b.messageForSingleTerm="quotes.filter.empty_message",b}();angular.module("quotesAppInternal").component("emptyFilterSearch",{template:'\n      <div>\n        <div class="image"></div>\n        <div>\n          <span \n          data-hook="empty-filter-search-message" \n          translate="{{$ctrl.message}}"\n          translate-values="{{$ctrl.keys}}" />\n        </div>\n        <div class="back">\n          <span data-hook="empty-filter-search-back">{{\'quotes.filter.back_to\' | translate}}</span>\n          <button ng-click="$ctrl.onBackClick()" class="wix-link" type="button" data-hook="empty-filter-search-all-invoices">{{\'quotes.filter.all\' | translate}}</button>\n        </div>\n      </div>',controller:b,bindings:{status:"=",search:"=",onBackClick:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.prototype.isDescending=function(){return"desc"===this.sortOrder},a.prototype.toggleDirection=function(){return this.isActive&&this.isDescending()?"asc":"desc"},a.prototype.toggleSort=function(){var a=this.toggleDirection();this.onSortChange({dir:a})},a}();angular.module("quotesAppInternal").component("quotesSort",{template:"<span data-hook='quotes-sort' class='sort-button' ng-click='$ctrl.toggleSort()'>\n                  <span class='sort-label'>{{$ctrl.label}}\n                  <span  data-hook='sort-arrow' class='sort-arrow' ng-class='{\"sort-desc\": $ctrl.isDescending(), \"sort-asc\": !$ctrl.isDescending(), \"sort-active\": $ctrl.isActive}'></span>\n                  </span>\n               </span>",controller:b,bindings:{label:"@",isActive:"=",sortOrder:"=",onSortChange:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g){this.$scope=a,this.banners=b,this.wixBiLogger=c,this.wixAngularStorageErrors=d,this.$element=e,this.$timeout=f,this.IS_BUSINESS_MANAGER=g,this.showDelay=500,this.shouldShowBanner=!0}return a.$inject=["$scope","banners","wixBiLogger","wixAngularStorageErrors","$element","$timeout","IS_BUSINESS_MANAGER"],a.prototype.initBannerStatus=function(){var a=this;return this.banners.getStorageValue(this.bannerKey).then(function(b){return a.shouldShowBanner=!!b}).catch(function(b){if(b===a.wixAngularStorageErrors.NOT_FOUND)return a.setBannerToShow()})},a.prototype.onChanges=function(a){var b=this;a=void 0!==a&&a,this.$timeout(function(){return b.toggleShow(a)},this.showDelay)},a.prototype.toggleShow=function(b){var c;this.$element.toggleClass(a.ShowingClass,b),this.showBiParams&&b&&(c=this.wixBiLogger).log.apply(c,this.showBiParams)},a.prototype.$onInit=function(){var a=this;this.initBannerStatus(),this.$scope.$watch(function(){return a.banners[a.bannerKey]},function(b){return a.onChanges(b)})},a.prototype.hide=function(){var a;return this.dismissalBiParams&&(a=this.wixBiLogger).log.apply(a,this.dismissalBiParams),this.setBannerToHide()},a.prototype.setBannerShowing=function(a){return this.banners.setStorageValue(this.bannerKey,a)},a.prototype.setBannerToHide=function(){var a=this;return this.setBannerShowing(!1).then(function(){return a.toggleShow(!1)})},a.prototype.setBannerToShow=function(){var a=this;return this.setBannerShowing(!0).then(function(){return a.shouldShowBanner=!0})},a.ShowingClass="banner-showing",a}();a.BannerContainer=b,angular.module("quotesAppInternal").component("bannerContainer",{templateUrl:["IS_BUSINESS_MANAGER",function(a){return a?"modules/quotes/banners/banner-container/banner-container.preload.html":"modules/quotes/banners/banner-container/banner-container.old.preload.html"}],controller:b,transclude:!0,bindings:{bannerKey:"@",dismissalBiParams:"<",showBiParams:"<"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a}();a.MobileBanner=b,angular.module("quotesAppInternal").component("mobileBanner",{templateUrl:"modules/quotes/banners/mobile-banner/mobile-banner.preload.html",controller:b})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g,h,i){this.IS_BUSINESS_MANAGER=a,this.quotesRoute=b,this.$location=c,this.frameworkFacade=d,this.wixBiLogger=e,this.BZM_NAV=f,this.routes=g,this.BANNER_KEYS=h,this.banners=i}return a.$inject=["IS_BUSINESS_MANAGER","quotesRoute","$location","frameworkFacade","wixBiLogger","BZM_NAV","routes","BANNER_KEYS","banners"],a.prototype.managePayments=function(){return this.banners.hideBanner({key:this.BANNER_KEYS.PAYMENTS,dismiss:!0}),this.wixBiLogger.log("CLICK_MANAGE_PAYMENTS",{name:"manage payments"}),this.IS_BUSINESS_MANAGER?this.frameworkFacade.navigateTo(this.BZM_NAV.PAYMENTS):this.$location.url(this.quotesRoute.getPageUrl(this.routes.PAYMENTS)+"?referrer=banner")},a}();a.PaymentsBanner=b,angular.module("quotesAppInternal").component("paymentsBanner",{templateUrl:"modules/quotes/banners/payments-banner/payments-banner.preload.html",controller:b})}(invoices||(invoices={}));var invoices;!function(a){var b="USD 999,999.99".length,c=function(){function c(b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.quotes=b,this.$route=c,this.quotesRoute=d,this.$translate=e,this.experimentManager=f,this.frameworkFacade=g,this.IS_BUSINESS_MANAGER=h,this.wixBiLogger=i,this.delay=j,this.BANNER_KEYS=k,this.settingsApi=l,this.banners=m,this.paymentsBannerDismissalBiParams=["DISMISS_MANAGE_PAYMENTS",{name:"manage payments"}],this.paymentsBannerShowBiParams=["MANAGE_PAYMENTS",{name:"manage payments"}],this.selectedDateRange=a.DateRange.thisYear,this.biPageName=_.get(c,"current.biPageName",""),this.isOnBoarding&&this.wixBiLogger.log("ON_BOARDING",{name:"get started"}),this.setCurrentCurrency(b.currency),this.createUrl=this.getCreateUrl(),n.$watch(function(){return b.emptyExperienceOn},function(a){!1===a&&m.showBanner(k.PAYMENTS).catch(function(){return m.showBanner(k.MOBILE)})})}return c.$inject=["quotes","$route","quotesRoute","$translate","experimentManager","frameworkFacade","IS_BUSINESS_MANAGER","wixBiLogger","delay","BANNER_KEYS","settingsApi","banners","$scope","$timeout"],c.prototype.$onDestroy=function(){this.banners.hideBanner({key:this.BANNER_KEYS.PAYMENTS}),this.banners.hideBanner({key:this.BANNER_KEYS.MOBILE})},c.prototype.showEmptyExperience=function(){return this.quotes.emptyExperienceOn},c.prototype.showList=function(){return!this.quotes.emptyExperienceOn},c.prototype.mobileView=function(){return this.frameworkFacade.isMobileUser()},c.prototype.buildLink=function(a){return this.quotesRoute.buildLink(a)},c.prototype.navigateTo=function(a){return this.quotesRoute.navigateToQuote(a)},c.prototype.showSumTooltip=function(a){return a.length>b},c.prototype.onItemChange=function(){var a=this;this.delay().then(function(){return a.quotes.fetchTotals(a.selectedDateRange)})},c.prototype.getDescription=function(a){return this.$translate(c.summaries[a])},c.prototype.onSummariesFilterChange=function(b){var c=this,d=a.DateRange[b.dateRange];d!==this.selectedDateRange?(this.selectedDateRange=d,this.quotes.fetchTotals(d).then(function(){return c.setCurrentCurrency(c.selectedCurrency)}),this.biLogFilter("period",b.dateRange)):(this.setCurrentCurrency(b.currency),this.biLogFilter("currency",b.currency))},c.prototype.setCurrentCurrency=function(a){var b=_.includes(this.quotes.availableCurrencies,a),c=_.includes(this.quotes.availableCurrencies,this.quotes.currency);!b&&c?this.selectedCurrency=this.quotes.currency:b?a!==this.selectedCurrency&&(this.selectedCurrency=a):this.selectedCurrency=this.quotes.availableCurrencies[0]},c.prototype.getCreateUrl=function(){var a="?referrer",b="";return this.isOnBoarding?b+=a+"=onboarding":this.showEmptyExperience()&&(b+=a+"=ex"),""+this.quotesRoute.buildLink("quotes/create")+b},c.prototype.biLogFilter=function(a,b){this.wixBiLogger.log("INVOICES_FILTER",{filter_type:a,name:b,num_of_invoices:this.quotes.total})},c.summaries={paid:"quotes.totals.paid.label",sent:"quotes.totals.pending.label",overdue:"quotes.totals.overdue.label"},c}();a.QuoteListPage=c,angular.module("quotesAppInternal").component("quoteListPage",{templateUrl:"modules/quotes/quote-list-page/quote-list-page.preload.html",controller:c,controllerAs:"quotes",bindings:{isOnBoarding:"<",preview:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.prototype.get=function(){return this.products},a.prototype.set=function(a){this.products=a},a.prototype.delete=function(){this.products=void 0},a}();angular.module("quotesAppInternal").service("selectedProductsForQuote",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function b(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){var u=this;this.QUOTE_STATUS=b,this.quotes=c,this.actions=d,this.quotesRoute=e,this.wixBiLogger=f,this.$route=g,this.quotesApi=h,this.$scope=i,this.$timeout=j,this.downloadProgress=k,this.notifications=l,this.downloadUrl=m,this.experimentManager=n,this.wixStorage=o,this.$translate=p,this.frameworkFacade=q,this.fedopsLogger=r,this.BZM_NAV=s,this.tooltipPartialPaymentTemplate="<partial-quote-tooltip quote='quote'/>",this.tooltipViewedTemplate="<viewed-quote-tooltip quote='quote'/>",this.activeQuote="",this.sortState={columnName:"quoteNumber",direction:"desc"},this.ACTIONS_ORDER=[[a.ActionNames.EDIT,a.ActionNames.PREVIEW,a.ActionNames.SEND,a.ActionNames.RESEND,a.ActionNames.PRINT,a.ActionNames.DOWNLOAD_PDF,a.ActionNames.DUPLICATE,a.ActionNames.VIEW_SOURCE],[a.ActionNames.ADD_PAYMENT,a.ActionNames.VOID,a.ActionNames.REMOVE]],this.fetchNextInProgress=!1,this.resend=this.send,this.partiallyPaidStatuses=[this.QUOTE_STATUS.PARTIALLYPAID,this.QUOTE_STATUS.PARTIAL_AND_OVERDUE],this.overdueStatuses=[this.QUOTE_STATUS.OVERDUE,this.QUOTE_STATUS.PARTIAL_AND_OVERDUE],this.isIssueDateExperimentEnabled()&&(this.sortState.columnName="issueDate"),this.sortState=c.getSort(),this.currentFilter=c.getFilter(),this.currentSearch=_.escape(c.getSearch()),this.currentSearchText=this.currentSearch,this.preview=t(this.preview,1e3,!0),this.onSearch=t(this.onSearch,400),i.$on("scroll-near-bottom",function(){u.shouldLoadNextPage()&&(u.fetchNextInProgress=!0,u.fetchNextPage().finally(function(){u.fetchNextInProgress=!1}))}),this.previewId&&this.previewCore(this.previewId)}return b.$inject=["QUOTE_STATUS","quotes","actions","quotesRoute","wixBiLogger","$route","quotesApi","$scope","$timeout","downloadProgress","notifications","downloadUrl","experimentManager","wixStorage","$translate","frameworkFacade","fedopsLogger","BZM_NAV","wixDebounce"],b.prototype.isIssueDateExperimentEnabled=function(){return this.experimentManager.isExperimentEnabled("specs.invoices.SortByIssueDate")},b.prototype.getActionsByStatus=function(a){var b=this,c=function(c){return b.actions.isActionShown(a,c)};return this.ACTIONS_ORDER.map(function(a){return a.filter(c)})},b.prototype.translateActionName=function(b,c){switch(b){case a.ActionNames.VIEW_SOURCE:return this.translateWithFallback(this.getExternalDeepLinkKey(c),null);default:return this.$translate("actions."+b)}},b.prototype.send=function(a,b){var c=this;this.logSendToBi("INVOICE_SEND_BUTTON",b,a),this.actions.send(a).then(function(){return c.afterAction(a.quoteId)}).then(function(){return c.onItemChange()}).catch(function(){c.logSendToBi("INVOICE_SEND_CANCEL",b,a)})},b.prototype.onSelectedStatus=function(a){var b=this;this.fedopsLogger.interactionStarted("filter-invoices"),this.quotes.setFilter(a),this.reloadList().then(function(){b.currentFilter=a,b.fedopsLogger.interactionEnded("filter-invoices"),b.wixBiLogger.log("INVOICES_FILTER",{filter_type:"display",name:a,num_of_invoices:b.quotes.list.length})})},b.prototype.resetFilter=function(){var b=this;this.quotes.clearFilterAndSearch(),this.currentSearchText="",this.reloadList().then(function(){b.currentSearch="",b.currentFilter=a.QuotesFilter.ALL_INVOICES})},b.prototype.onChangedSort=function(a,b){this.sortState={columnName:a,direction:b},this.quotes.setSort({columnName:a,direction:b}),this.reloadList(),this.wixBiLogger.log("INVOICES_SORT",{name:a,num_of_invoices:this.quotes.list.length,order:b})},b.prototype.onSearch=function(a){var b=this,c=a.target.value;this.currentSearch=_.escape(c),this.quotes.setSearch(c),this.reloadList().then(function(a){b.wixBiLogger.log("INVOICES_SEARCH",{text:c,num_of_results:b.quotes.list.length})})},b.prototype.onSearchClear=function(){var a=this;this.quotes.setSearch(null),this.reloadList().then(function(b){a.currentSearch=""})},b.prototype.onSearchKeyUp=function(a){""===a.target.value?this.onSearchClear():this.onSearch(a)},b.prototype.preview=function(a){this.previewCore(a.quoteId)},b.prototype.previewCore=function(a){var b=this;this.wixBiLogger.log("INVOICE_PREVIEW",{invoice_id:a,origin:"my invoices"});var c;this.quotesApi.getQuote(a).then(function(a){return c=a}).then(function(){return b.actions.preview(c,!1)}).then(function(a){return"send"===a?b.send(c,"preview"):"paid"===a?b.paidFromPreview(c):"pay"===a?b.paidFromPreview(c):void 0})},b.prototype.remove=function(a){var b=this;this.wixBiLogger.log("INVOICE_DELETE_DIALOG",{invoice_id:a.quoteId}),this.actions.remove(a.quoteId).then(function(){return b.afterDelete(a.quoteId)}).then(function(){return b.onItemChange()}).then(function(){return b.wixBiLogger.log("INVOICE_DELETE_DIALOG_CONFIRM",{invoice_id:a.quoteId})}).catch(function(){return b.wixBiLogger.log("INVOICE_DELETE_DIALOG_CANCEL",{invoice_id:a.quoteId})})},b.prototype.void=function(a){var b=this;this.wixBiLogger.log("INVOICE_VOID_DIALOG",{invoice_id:a.quoteId}),this.actions.void(a.quoteId).then(function(){return b.afterAction(a.quoteId)}).then(function(){return b.onItemChange()}).then(function(){return b.wixBiLogger.log("INVOICE_VOID_DIALOG_CONFIRM",{invoice_id:a.quoteId})}).catch(function(){return b.wixBiLogger.log("INVOICE_VOID_DIALOG_CANCEL",{invoice_id:a.quoteId})})},b.prototype.pay=function(a){this.payWithOrigin(a,"my invoices")},b.prototype.print=function(a){var b=this;this.wixBiLogger.log("INVOICE_PRINT",{invoice_id:a.quoteId,origin:"my invoices"}),this.quotesApi.getQuote(a.quoteId).then(function(a){return b.actions.print(a)})},b.prototype.pdf=function(a){var b=this;this.wixBiLogger.log("DOWNLOAD_PDF",{invoice_id:a.quoteId,origin:"my invoices"}),this.downloadUrl.get(a).then(function(a){var c=b.notifications.showTranslated("quote.pdfdownloading",{type:"warning",cssClass:"pdf-notification",hideAfter:1e4});b.downloadProgress.startDownload(a).finally(function(){c()})})},b.prototype.edit=function(a){this.wixBiLogger.log("INVOICE_EDIT",{invoice_id:a.quoteId,origin:"my invoices"}),this.quotesRoute.navigateToQuote(a.quoteId)},b.prototype.duplicate=function(a){this.quotesRoute.navigateToDuplicateQuote(a.quoteId)},b.prototype.viewSource=function(b){this.wixBiLogger.log("INVOICE_VIEW_SOURCE",{app_name:_.get(b,"sourceProperties.sourceName")}),this.experimentManager.isExperimentEnabled("specs.invoices.ShowBackToast")?this.frameworkFacade.navigateToUrlAndShowBackToast(_.get(b,"sourceProperties.url"),this.BZM_NAV.INVOICES,a.translateBackToTexts(this.$translate,this.BZM_NAV.BACK_TO_INVOICES)):this.frameworkFacade.navigateToUrl(_.get(b,"sourceProperties.url"))},b.prototype.isProcessing=function(a){return a===this.QUOTE_STATUS.PROCESSING},b.prototype.isOverdue=function(a){return-1!==this.overdueStatuses.indexOf(a)},b.prototype.isPartiallyPaid=function(a){return-1!==this.partiallyPaidStatuses.indexOf(a)},b.prototype.isViewed=function(a){return a===this.QUOTE_STATUS.VIEWED},b.prototype.isQuoteViewed=function(a){return!!a.lastViewed},b.prototype.logSendToBi=function(a,b,c){var d={invoice_id:c.quoteId,resend:"Sent"===c.status};(b||this.biPageName)&&(d.origin=b||this.$route.current.biPageName),this.wixBiLogger.log(a,d)},b.prototype.showEmptyFilter=function(){return(this.hasFilter()||this.hasSearchTerm())&&this.isQuoteListEmpty()},b.prototype.hasFilter=function(){return!!this.currentFilter&&this.currentFilter!==a.QuotesFilter.ALL_INVOICES},b.prototype.hasSearchTerm=function(){return!!this.currentSearch},b.prototype.isQuoteListEmpty=function(){return _.isUndefined(this.quotes.list)||0===this.quotes.list.length},b.prototype.leave=function(a){var b=this,c=a.toElement||a.relatedTarget;c&&c.className&&c.className.match(/wix-backdrop/)?c.addEventListener("click",function(){b.$scope.$apply(function(){return b.deactivateQuote()})}):this.deactivateQuote()},b.prototype.deactivateQuote=function(){this.activeQuote=""},b.prototype.reloadList=function(){return this.quotes.fetch()},b.prototype.fetchNextPage=function(){return this.quotes.fetchNext()},b.prototype.paidFromPreview=function(a){this.payWithOrigin(a,"preview")},b.prototype.payWithOrigin=function(a,b){var c=this,d={invoice_id:a.quoteId,origin:b},e={invoice_id:a.quoteId,origin:b,fully_paid:!1};this.wixBiLogger.log("INVOICE_ADD_PAYMENT_DIALOG",d),this.actions.pay(a).then(function(a){return e.fully_paid=a}).then(function(){return c.onItemChange(),c.afterAction(a.quoteId)}).then(function(){return c.wixBiLogger.log("INVOICE_ADD_PAYMENT_DIALOG_CONFIRM",e)}).catch(function(){return c.wixBiLogger.log("INVOICE_ADD_PAYMENT_DIALOG_CANCEL",d)})},b.prototype.getExternalDeepLinkKey=function(a){return _.get(a,"sourceProperties.sourceName")+"."+_.get(a,"sourceProperties.deepLinkActionKey")},b.prototype.translateWithFallback=function(a,b){var c=this.$translate(a);return c===a?b:c},b.prototype.afterAction=function(a){return this.quotes.refreshQuote(a)},b.prototype.afterDelete=function(a){return this.quotes.removeQuote(a)},b.prototype.shouldLoadNextPage=function(){return!this.fetchNextInProgress&&!this.quotes.loadedAll()},b}();a.QuoteList=b,angular.module("quotesAppInternal").component("quoteList",{templateUrl:"modules/quotes/quote-list/quote-list.preload.html",controller:b,bindings:{biPageName:"=",onItemChange:"&",previewId:"="}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.quoteNumber=a,this.$element=b,this.$timeout=c,
this.originalNumber=this.number||""}return a.$inject=["quoteNumber","$element","$timeout"],a.prototype.$postLink=function(){this.inputController=this.$element.find("input").controller("ngModel")},a.prototype.setValid=function(a){this.inputController.$setValidity("non-unique-number",a)},a.prototype.reset=function(){return this.number=this.originalNumber,this.setValid(!0)},a.prototype.validate=function(){var a=this;this.quoteNumber.available(this.id,this.number).then(function(b){a.$timeout(function(){a.setValid(b)})})},a.prototype.inputBlur=function(){switch(this.number){case this.originalNumber:case"":return this.reset();default:return this.validate()}},a.prototype.inputChange=function(){this.number=this.number.replace(/[^0-9]/g,""),this.onChange({number:this.number})},a}();angular.module("quotesAppInternal").component("quoteNumber",{template:'<wix-input\n                            class="error"\n                            type="text"\n                            maxlength="10"\n                            data-hook="edit-quote-number"\n                            error-message="{{ \'quote.form.number_exists_error_message\' | translate }}"\n                            error-type="tooltip"\n                            ng-model="$ctrl.number"\n                            ng-blur="$ctrl.inputBlur()"\n                            ng-change="$ctrl.inputChange()"\n                       />',controller:b,bindings:{id:"<",number:"<",onChange:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){var d=this;this.$http=a,this.$q=b,this.experimentManager=c,this.experimentDisabled=function(){return!d.experimentManager.isExperimentEnabled("specs.invoices.EditInvoiceNumber")},this.available=function(a,b){return d.$http.get("/_api/wix-quotes-web/quotes/"+a+"/numberAvailableForQuote?quoteNumber="+b).then(function(a){return a.data})}}return a.$inject=["$http","$q","experimentManager"],a.prototype.next=function(){return this.experimentDisabled()?this.$q.when(void 0):this.$http({method:"GET",url:"/_api/wix-quotes-web/quotes/nextQuoteNumber",transformResponse:void 0}).then(function(a){return a.data})},a}();a.QuoteNumber=b,angular.module("quotesAppInternal").service("quoteNumber",b)}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("wixInput",function(){return{priority:1e3,link:function(a,b,c){"number"===c.type&&b[0].addEventListener("wheel",function(a){a.preventDefault()})}}}),angular.module("quotesAppInternal").directive("wixInput",function(){return{priority:900,link:function(a,b,c,d,e){e&&e(a,function(a){0===a.find("error-message").length&&b.find("i").after(a)})}}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.frameworkFacade=a}return a.$inject=["frameworkFacade"],a.prototype.get=function(){var a=this.frameworkFacade.wixAppIds.quotes||this.frameworkFacade.wixAppIds.invoices;return this.frameworkFacade.getAppInstance(a).then(function(a){return a.instance})},a}();a.AppInstance=b,angular.module("quotesAppInternal").service("appInstance",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a){this.path="https://invoices.wix.com/download/",this.appInstancePromise=a.getAppInstance(a.wixAppIds.quotes||a.wixAppIds.invoices)}return a.$inject=["frameworkFacade"],a.prototype.get=function(a){var b=this;return this.appInstancePromise.then(function(c){return""+b.path+a.quoteId+"?instance="+c})},a}();a.DownloadUrl=b,angular.module("quotesAppInternal").service("downloadUrl",b)}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").directive("money",["iso4217","experimentManager",function(a,b){return{require:"ngModel",restrict:"A",link:function(c,d,e,f){var g=(a.getCurrencyByCode(e.money)||{fraction:2}).fraction,h=function(){var a=parseFloat("1.1").toLocaleString();return a[a.length-2]},i=function(a){var b=a.lastIndexOf(h());return-1!==b?a.slice(0,b+g+1):a},j=function(){return f.$valid&&d.val(i(d.val()))},k=function(a){return Decimal(Number(a)||0).toDecimalPlaces(g,Decimal.ROUND_DOWN).toNumber()},l=function(a){return void 0===a?null:k(a)};b.isExperimentEnabled("specs.invoices.PriceFixedCurrency")?(d.on("change",j),f.$parsers.push(k,Decimal),f.$formatters.push(l)):(f.$parsers.push(function(a){return Decimal(Number(a)||0)}),f.$formatters.push(function(a){return Decimal(a||0).toNumber()}))}}}])}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d){this.value=a,this.currency=b,this.fractionSize=c,this.roundingMode=d}return a.prototype.toDecimal=function(){return this.value.toDecimalPlaces(this.fractionSize,this.roundingMode)},a.prototype.toNumber=function(){return this.toDecimal().toNumber()},a.prototype.operate=function(b,c){var d=c instanceof a?c.value:c;return new a(this.value[b](d).toDecimalPlaces(this.fractionSize,this.roundingMode),this.currency,this.fractionSize,this.roundingMode)},a.prototype.times=function(a){return this.operate("times",a)},a.prototype.plus=function(a){return this.operate("plus",a)},a.prototype.minus=function(a){return this.operate("minus",a)},a.prototype.toString=function(){return this.toNumber()+""},a}();a.Money=b;var c=function(){function a(a,c,d){var e=this;this.iso4217=a,this.defaultRoundingMode=c,this.experimentManager=d,this.experimentEnabled=function(){return e.experimentManager.isExperimentEnabled("specs.invoices.PriceFixedCurrency")},this.getFraction=function(a){return _.get(e.iso4217.getCurrencyByCode(a),"fraction",2)},this.zero=function(a){return e.of(0,a)},this.of=function(a,c,d){if(a instanceof b)return new b(a.toDecimal(),a.currency,e.getFraction(a.currency),e.defaultRoundingMode);var f=e.getFraction(c),g=d?Decimal(a).toDP(f,d):Decimal(a);if(e.experimentEnabled()&&g.decimalPlaces()>f)throw Error("fraction size "+g.decimalPlaces()+" is invalid for currency "+c);return new b(g,c,f,e.defaultRoundingMode)}}return a.$inject=["iso4217","defaultRoundingMode","experimentManager"],a}();a.MoneyFactory=c,angular.module("quoteCommon").service("money",c)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d){var e=this;this.isoCurrencyFilter=a,this.money=b,this.defaultRoundingMode=c,this.experimentManager=d,this.roundMoney=function(a,b){return e.money.of(a||Decimal(0),b,e.defaultRoundingMode)}}return a.$inject=["isoCurrencyFilter","money","defaultRoundingMode","experimentManager"],a.prototype.filter=function(a,b){var c=this.roundMoney(a,b);return this.isoCurrencyFilter(c.toNumber(),c.currency)},a}();angular.module("quoteCommon").filter("money",["$injector",function(a){var c=a.instantiate(b);return c.filter.bind(c)}])}(invoices||(invoices={}));var invoices;!function(a){var b={year:"numeric",month:"short",day:"numeric"};angular.module("quotesAppInternal").filter("calendarDate",["frameworkFacade",function(a){return function(c){return c.toLocaleDateString(a.getLocale(),b)}}])}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){}return a.prototype.generateGuid=function(){return Math.floor(1e4*Math.random())},a}();a.DownloadGuidGenerator=b,angular.module("quoteCommon").service("downloadGuidGenerator",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e){this.$cookies=a,this.$interval=b,this.$document=c,this.$q=d,this.downloadGuidGenerator=e,this.downloadState={isDownloading:!1}}return a.$inject=["$cookies","$interval","$document","$q","downloadGuidGenerator"],a.prototype.resetDownloadState=function(a,b){this.downloadState.isDownloading=!1,b.remove(),this.$interval.cancel(a)},a.prototype.startDownload=function(a){var b=this,c=this.$q.defer();if(!this.downloadState.isDownloading){var d=1e3,e=8e3,f=this.downloadGuidGenerator.generateGuid(),g="fileDownload-"+f;this.downloadState.isDownloading=!0;var h=angular.element('<iframe style="display:none"/>');h.attr("src",a+"&downloadId="+f),angular.element(this.$document.find("body")).append(h);var i=this.$interval(function(){b.$cookies.get(g)&&(b.$cookies.remove(g,{path:"/",domain:"wix.com"}),c.resolve(),b.resetDownloadState(i,h))},d);this.$interval(function(){c.reject(),b.resetDownloadState(i,h)},e,1)}return c.promise},a}();a.DownloadProgress=b,angular.module("quoteCommon").service("downloadProgress",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.papa=a,this.saveAs=b}return a.$inject=["papa","saveAs"],a.prototype.export=function(a,b){var c=new Blob([this.papa.unparse(a)]);this.saveAs(c,b)},a}();a.CsvExport=b,angular.module("quotesAppInternal").service("csvExport",b)}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").factory("delay",["$timeout","experimentManager",function(a,b){var c=b.getExperimentValue("specs.invoices.RefreshDelay")||500;return function(){return a(c)}}])}(invoices||(invoices={}));var ReportsApi=function(){function a(a){this.$http=a}return a.$inject=["$http"],a.prototype.getSettings=function(){return this.$http.get("/_api/wix-quotes-web/reports/settings").then(function(a){return a.data})},a.prototype.getTaxSummary=function(a){return this.$http.get("/_api/wix-quotes-web/reports/tax-summary",{params:a}).then(function(a){return a.data})},a.prototype.getRevenueSummary=function(a){return this.$http.get("/_api/wix-quotes-web/reports/revenue-summary",{params:a}).then(function(a){return a.data})},a}();angular.module("quotesAppInternal").service("reportsApi",ReportsApi);var invoices;!function(a){var b=function(){function a(a,b){this.quotesRoute=a,this.IS_BUSINESS_MANAGER=b}return a.$inject=["quotesRoute","IS_BUSINESS_MANAGER"],a}();angular.module("quotesAppInternal").component("reportsPage",{templateUrl:"modules/quotes/reports/reports-page/reports-page.preload.html",controller:b})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.printService=a,this.wixBiLogger=b,this.$window=c}return a.$inject=["printService","wixBiLogger","$window"],a.prototype.print=function(){if(!this.emptyExperience){this.printService.printElement("summary-report-content",1.5),this.wixBiLogger.log("PRINT_REPORT",{basis:_.get(this.reportParams,"revenue"),name:this.biName})}},a.prototype.export=function(){this.emptyExperience||this.onExportClick()},a}();angular.module("quotesAppInternal").component("reportActions",{templateUrl:"modules/quotes/reports/components/report-header/report-actions/report-actions.preload.html",controller:b,bindings:{reportParams:"<",downloadPath:"@",biName:"@",emptyExperience:"<",onExportClick:"&"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b){this.quotesRoute=a,this.IS_BUSINESS_MANAGER=b}return a.$inject=["quotesRoute","IS_BUSINESS_MANAGER"],a}();angular.module("quotesAppInternal").component("reportHeader",{templateUrl:"modules/quotes/reports/components/report-header/report-header.preload.html",controller:b,transclude:!0,bindings:{navLabel:"@",reportTitle:"@",breadcrumb:"@"}})}(invoices||(invoices={}));var invoices;!function(a){!function(a){var b=function(){function a(){if(this.revenueBasis="accrual",this.currency=this.userCurrency,this.fromDate=new Date((new Date).getFullYear(),0,1),this.toDate=new Date((new Date).setHours(23,59,0,0)),this.currencies){this.currencies.sort();var a=_.includes(this.currencies,this.userCurrency);this.currency=a?this.userCurrency:this.currencies[0]}this.runReport()}return a.prototype.runReport=function(){var a={begin:this.fromDate.valueOf(),end:this.toDate.valueOf(),revenue:this.revenueBasis};this.currency&&(a.currency=this.currency),this.onRunReport({params:a})},a}();a.SummaryReportParams=b,angular.module("quotesAppInternal").component("summaryReportParams",{templateUrl:"modules/quotes/reports/components/summary-report-params/summary-report-params.preload.html",controller:b,bindings:{userCurrency:"<",currencies:"<",onRunReport:"&"}})}(a.test||(a.test={}))}(invoices||(invoices={})),angular.module("quotesAppInternal").component("summaryReportEmptyExperience",{template:'<div class="ali"></div>\n               <div class="description" data-hook="description">{{$ctrl.description}}</div>\n               <div>{{ \'reports.empty-experience.run-again\' | translate }}</div>',bindings:{description:"<"}});var invoices;!function(a){angular.module("quotesAppInternal").component("summaryReportContent",{templateUrl:"modules/quotes/reports/components/summary-report-content/summary-report-content.preload.html",transclude:!0,bindings:{isLoading:"<",emptyExperience:"<",emptyExperienceDescription:"@"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").component("reportContentHeader",{templateUrl:"modules/quotes/reports/components/report-content-header/report-content-header.preload.html",bindings:{summaryParams:"<",companyName:"<",reportTitle:"@"}})}(invoices||(invoices={})),angular.module("quotesAppInternal").component("taxSummaryUserTax",{templateUrl:"modules/quotes/reports/tax-summary-report-page/tax-summary-report-content/tax-summary-user-tax/tax-summary-user-tax.preload.html",bindings:{tax:"<",currency:"<"}});var TaxSummaryReportContent=function(){function a(){}return a.prototype.isRevenueCash=function(){return"cash"===this.summaryParams.revenue},a}();angular.module("quotesAppInternal").component("taxSummaryReportContent",{templateUrl:"modules/quotes/reports/tax-summary-report-page/tax-summary-report-content/tax-summary-report-content.preload.html",controller:TaxSummaryReportContent,bindings:{taxSummary:"<",summaryParams:"<",companyName:"<"}});var invoices;!function(a){var b=function(){function a(a,b,c,d){this.reportsApi=a,this.wixBiLogger=b,this.taxSummaryReportCsv=c,this.csvExport=d,this.isLoading=!1}return a.$inject=["reportsApi","wixBiLogger","taxSummaryReportCsv","csvExport"],a.prototype.hasPotentialTaxes=function(){return!!_.get(this.settings,"currencies.length")},a.prototype.isEmptyExperience=function(){var a=!_.get(this.summary,"taxes.length");return!this.hasPotentialTaxes()||a},a.prototype.onRunReport=function(a){var b=this;this.hasPotentialTaxes()&&(this.isLoading=!0,this.reportsApi.getTaxSummary(a).then(function(c){b.isLoading=!1,b.summary=c,b.summaryParams=a})),this.wixBiLogger.log("RUN_REPORT",{name:"tax",basis:a.revenue})},a.prototype.onExport=function(){var a={companyName:this.settings.companyName,params:this.summaryParams,summary:this.summary},b=this.taxSummaryReportCsv.generate(a);this.csvExport.export(b,"tax-summary-report.csv")},a}();angular.module("quotesAppInternal").component("taxSummaryReportPage",{templateUrl:"modules/quotes/reports/tax-summary-report-page/tax-summary-report-page.preload.html",controller:b,bindings:{settings:"<"}})}(invoices||(invoices={}));var AccrualRevenueList=function(){function a(){this.sortBy="quoteNumber",this.direction="desc"}return a.prototype.onChangeSort=function(a,b){this.sortBy=a,this.direction=b},a}();angular.module("quotesAppInternal").component("accrualRevenueList",{templateUrl:"modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-list/accrual-revenue-list/accrual-revenue-list.preload.html",controller:AccrualRevenueList,bindings:{revenueSummary:"<"}});var CashRevenueList=function(){function a(a){this.$translate=a,this.sortBy="quoteNumber",this.direction="desc"}return a.$inject=["$translate"],a.prototype.onChangeSort=function(a,b){this.sortBy=a,this.direction=b},a.prototype.getPaymentMethodLabel=function(a){var b={offline:"reports.revenue-summary.payment-method-label.offline",paypal:"reports.revenue-summary.payment-method-label.paypal",creditcard:"reports.revenue-summary.payment-method-label.creditcard"};return this.$translate(b[a&&a.toLowerCase()]||a)},a}();angular.module("quotesAppInternal").component("cashRevenueList",{templateUrl:"modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-list/cash-revenue-list/cash-revenue-list.preload.html",controller:CashRevenueList,bindings:{revenueSummary:"<"}}),angular.module("quotesAppInternal").component("revenueSummaryReportContent",{templateUrl:"modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-summary-report-content.preload.html",bindings:{revenueSummary:"<",summaryParams:"<",companyName:"<"}});var invoices;!function(a){var b=function(){function a(a,b,c,d,e){this.reportsApi=a,this.wixBiLogger=b,this.$translate=c,this.revenueSummaryReportCsv=d,this.csvExport=e,this.isLoading=!1}return a.$inject=["reportsApi","wixBiLogger","$translate","revenueSummaryReportCsv","csvExport"],a.prototype.isEmptyExperience=function(){return!_.get(this.summary,"revenues.length")},a.prototype.getEmptyExperienceDescription=function(){return"cash"===_.get(this.summaryParams,"revenue","accrual")?this.$translate("reports.revenue-summary-report-empty-experience.cash-description"):this.$translate("reports.revenue-summary-report-empty-experience.accrual-description")},a.prototype.onRunReport=function(a){var b=this;this.isLoading=!0,this.reportsApi.getRevenueSummary(a).then(function(c){b.isLoading=!1,b.summary=c,b.summaryParams=a}),this.wixBiLogger.log("RUN_REPORT",{name:"revenue",basis:a.revenue})},a.prototype.onExport=function(){var a={companyName:this.settings.companyName,params:this.summaryParams,summary:this.summary},b=this.revenueSummaryReportCsv.generate(a);this.csvExport.export(b,"revenue-summary-report.csv")},a}();angular.module("quotesAppInternal").component("revenueSummaryReportPage",{templateUrl:"modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-page.preload.html",controller:b,bindings:{settings:"<"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.dateFilter=a,this.isoCurrencyFilter=b,this.$translate=c}return a.$inject=["dateFilter","isoCurrencyFilter","$translate"],a.prototype.generate=function(a){return new c(a,this.dateFilter,this.isoCurrencyFilter,this.$translate).transform()},a}();a.TaxSummaryReportCsv=b;var c=function(){function a(a,b,c,d){this.input=a,this.date=b,this.currency=c,this.translate=d}return a.prototype.transform=function(){return[this.companyName(),this.dateRange(),this.emptyLine(),this.taxableTotal(),this.emptyLine()].concat(this.taxLines())},a.prototype.companyName=function(){return[this.input.companyName]},a.prototype.dateRange=function(){return[this.date(this.input.params.begin,"d MMM, y")+" "+this.translate("reports.tax-summary-export.date-range-to")+" "+this.date(this.input.params.end,"d MMM, y")]},a.prototype.emptyLine=function(){return[]},a.prototype.taxableTotal=function(){var a="cash"===this.input.params.revenue?"reports.tax-summary-export.gross-collected":"reports.tax-summary-export.gross-invoiced";return[this.translate(a)+":",this.currency(this.input.summary.taxableTotal,this.input.params.currency)]},a.prototype.taxLines=function(){var a=this;return _.flatten(_.map(this.input.summary.taxes,function(b){return a.taxLine(b)}))},a.prototype.taxLine=function(a){var b=this.input.params.currency,c=this.translate("reports.tax-summary-export.taxable-amount"),d=this.translate("reports.tax-summary-export.taxes"),e=this.currency(a.taxable,b),f=this.currency(a.taxed,b),g=this.translate("reports.tax-summary-export.total");return[[a.name+" ("+a.rate.toFixed(1)+"%)",c,d],[g+" "+b,""+e,""+f],[]]},a}();angular.module("quotesAppInternal").service("taxSummaryReportCsv",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c){this.dateFilter=a,this.isoCurrencyFilter=b,this.$translate=c}return a.$inject=["dateFilter","isoCurrencyFilter","$translate"],a.prototype.generate=function(a){return new c(a,this.dateFilter,this.isoCurrencyFilter,this.$translate).transform()},a}();a.RevenueSummaryReportCsv=b;var c=function(){function a(a,b,c,d){this.input=a,this.date=b,this.currency=c,this.translate=d}return a.prototype.transform=function(){return[this.companyName(),this.dateRange(),this.emptyLine()].concat(this.revenueTable(),[this.emptyLine()],this.totals())},a.prototype.companyName=function(){return[this.input.companyName]},a.prototype.dateRange=function(){return[this.date(this.input.params.begin,"d MMM, y")+" "+this.translate("reports.tax-summary-export.date-range-to")+" "+this.date(this.input.params.end,"d MMM, y")]},a.prototype.removeNewline=function(a){return a.replace("\n"," ")},a.prototype.cashTableHeaders=function(){return[this.translate("reports.revenue-summary.quoteNumber"),this.translate("reports.revenue-summary.customer"),this.translate("reports.revenue-summary.payment-method"),this.translate("reports.revenue-summary.payment-date"),this.translate("reports.revenue-summary.total-paid-no-tax"),this.translate("reports.revenue-summary.total-paid")].map(this.removeNewline)},a.prototype.cashTableValues=function(){var b=this;return this.input.summary.revenues.map(function(c){var d=c.currency,e=b.date(c.payment.date,"d MMM, y"),f=b.translate(a.methodKeys[c.payment.method.toLowerCase()]||c.payment.method),g=b.currency(c.total.withoutTax,d),h=b.currency(c.total.withTax,d);return[c.quoteNumber,c.customerName,f,e,g,h]})},a.prototype.accrualTableHeaders=function(){return[this.translate("reports.revenue-summary.quoteNumber"),this.translate("reports.revenue-summary.customer"),this.translate("reports.revenue-summary.sent"),this.translate("reports.revenue-summary.total-no-tax"),this.translate("reports.revenue-summary.total-amount")].map(this.removeNewline)},a.prototype.accrualTableValues=function(){var a=this;return this.input.summary.revenues.map(function(b){var c=b.currency,d=a.date(b.sentDate,"d MMM, y"),e=a.currency(b.total.withoutTax,c),f=a.currency(b.total.withTax,c);return[b.quoteNumber,b.customerName,d,e,f]})},a.prototype.totals=function(){var a=this,b=this.translate("reports.revenue-summary.total");return Object.keys(this.input.summary.totalByCurrency).map(function(c){var d=a.input.summary.totalByCurrency[c],e=a.currency(d.withoutTax,c),f=a.currency(d.withTax,c);return[b,c,e,f]})},a.prototype.revenueCashTable=function(){return[this.cashTableHeaders()].concat(this.cashTableValues())},a.prototype.revenueAccrualTable=function(){return[this.accrualTableHeaders()].concat(this.accrualTableValues())},a.prototype.revenueTable=function(){return"cash"===this.input.params.revenue?this.revenueCashTable():this.revenueAccrualTable()},a.prototype.emptyLine=function(){return[]},a.methodKeys={offline:"reports.revenue-summary.payment-method-label.offline",paypal:"reports.revenue-summary.payment-method-label.paypal",creditcard:"reports.revenue-summary.payment-method-label.creditcard"},a}();angular.module("quotesAppInternal").service("revenueSummaryReportCsv",b)}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(){var a=this;this.paid=function(){return _.get(a.totals,"paid")},this.sent=function(){return _.get(a.totals,"sent")},this.overdue=function(){return _.get(a.totals,"overdue")}}return a}();angular.module("quotesAppInternal").component("quotesSummaries",{templateUrl:"modules/quotes/quotes-summaries/quotes-summaries.preload.html",controller:b,bindings:{totals:"<",currency:"<"}})}(invoices||(invoices={}));var invoices;!function(a){var b;!function(a){a[a.last30Days=0]="last30Days",a[a.thisMonth=1]="thisMonth",a[a.lastMonth=2]="lastMonth",a[a.thisQuarter=3]="thisQuarter",a[a.lastQuarter=4]="lastQuarter",a[a.thisYear=5]="thisYear",a[a.lastYear=6]="lastYear"}(b=a.DateRange||(a.DateRange={}));var c=function(){function a(){this.dateRange=b[b.thisYear].toString(),this.currencies&&this.currencies.sort()}return a.prototype.update=function(){var a={dateRange:this.dateRange,currency:this.selectedCurrency};this.onChange({params:a})},a}();a.QuotesSummariesFilter=c,angular.module("quotesAppInternal").component("quotesSummariesFilter",{templateUrl:"modules/quotes/quotes-summaries/quotes-summaries-filter.preload.html",controller:c,bindings:{onChange:"&",currencies:"<",selectedCurrency:"<"}})}(invoices||(invoices={}));var invoices;!function(a){angular.module("quotesAppInternal").component("settings",{templateUrl:"modules/quotes/settings/settings.preload.html",controller:"SettingsController"})}(invoices||(invoices={}));var invoices;!function(a){function b(a,b){return{text:a(b.text),buttonText:a(b.buttonText)}}a.translateBackToTexts=b;var c=function(){function a(a,b,c,d,e,f,g,h){this.$location=a,this.quotesRoute=b,this.routes=c,this.frameworkFacade=d,this.BZM_NAV=e,this.IS_BUSINESS_MANAGER=f,this.$translate=g,this.experimentManager=h,this.biReferrer="referrer=top more actions"}return a.$inject=["$location","quotesRoute","routes","frameworkFacade","BZM_NAV","IS_BUSINESS_MANAGER","$translate","experimentManager"],a.prototype.navigate=function(){if(this.selection)if(this.IS_BUSINESS_MANAGER)switch(this.selection){case this.routes.PAYMENTS:this.experimentManager.isExperimentEnabled("specs.invoices.ShowBackToast")?this.frameworkFacade.navigateToAndShowBackToast(this.BZM_NAV.PAYMENTS,this.BZM_NAV.INVOICES,b(this.$translate,this.BZM_NAV.BACK_TO_INVOICES)):this.frameworkFacade.navigateTo(this.BZM_NAV.PAYMENTS);break;case this.routes.SETTINGS:this.experimentManager.isExperimentEnabled("specs.invoices.ShowBackToast")?this.frameworkFacade.navigateToAndShowBackToast(this.BZM_NAV.SETTINGS,this.BZM_NAV.INVOICES,b(this.$translate,this.BZM_NAV.BACK_TO_INVOICES)):this.frameworkFacade.navigateTo(this.BZM_NAV.SETTINGS);break;default:this.navigateInternal()}else this.navigateInternal()},a.prototype.placeholder=function(){return this.$translate("nav.select_label")},a.prototype.navigateInternal=function(){var a=this.quotesRoute.getPagePostfix(this.selection);this.$location.url(a+"?"+this.biReferrer)},a}();angular.module("quotesAppInternal").component("navigation",{template:'<span data-hook="container">\n                  <md-select data-hook="navigation-select" \n                    md-container-class="quotes-navigation-select" \n                    ng-model="$ctrl.selection" \n                    md-on-close="$ctrl.navigate()" \n                    md-selected-text="$ctrl.placeholder()"\n                    md-no-ink="true">\n                    <md-option ng-value="$ctrl.routes.PRODUCTS" md-no-ink="true">\n                      {{ \'nav.select.products\' | translate }}\n                    </md-option>\n                    <md-option ng-value="$ctrl.routes.REPORTS" md-no-ink="true">\n                      {{ \'nav.select.reports\' | translate }}\n                    </md-option>\n                    <md-option ng-value="$ctrl.routes.PAYMENTS" md-no-ink="true">\n                      {{ \'nav.select.payments\' | translate }}\n                    </md-option>\n                    <md-option ng-value="$ctrl.routes.SETTINGS" md-no-ink="true">\n                      {{ \'nav.select.settings\' | translate }}\n                    </md-option>\n                  </md-select>\n                </span>',controller:c})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e,f,g){var h=this;this.IS_BUSINESS_MANAGER=a,this.quotesRoute=b,this.$location=c,this.frameworkFacade=d,this.BZM_NAV=e,this.routes=f,this.experimentManager=g,this.home={text:"nav.home",action:function(){return h.navigateExternal(h.BZM_NAV.HOME)}},this.quotes={parent:this.home,text:"nav.invoices",action:function(){return h.navigateInternal(h.routes.MY_QUOTES)}},this.create={parent:this.quotes,text:"quote.title.new_quote"},this.edit={parent:this.quotes,text:"quote.title.edit_quote_prefix"},this.products={parent:this.quotes,text:"nav.select.products"},this.reports={parent:this.quotes,text:"nav.reports",action:function(){return h.navigateInternal(h.routes.REPORTS)}},this.taxsummary={parent:this.reports,text:"nav.taxsummary"},this.revenuesummary={parent:this.reports,text:"nav.revenuesummary"},this.settings={parent:this.home,text:"nav.invoices_settings"},g.isExperimentEnabled("specs.wos.businessManagerPhase4")&&(this.quotes.parent=void 0)}return a.$inject=["IS_BUSINESS_MANAGER","quotesRoute","$location","frameworkFacade","BZM_NAV","routes","experimentManager"],a.prototype.breadcrumbs=function(a){var b=this[this.page];return b&&this.fold([b])},a.prototype.fold=function(a){return a[0].parent?this.fold([a[0].parent].concat(a)):a},a.prototype.navigateExternal=function(a){this.frameworkFacade.navigateTo(a)},a.prototype.navigateInternal=function(a){this.$location.url(this.quotesRoute.getPageUrl(a))},a}();angular.module("quotesAppInternal").component("breadcrumbs",{template:'<div ng-if="$ctrl.IS_BUSINESS_MANAGER">\n                  <ul data-hook="breadcrumbs" class="wix-breadcrumbs is-breadcrumbs-grey">\n                     <li data-hook="breadcrumb" class="breadcrumb" ng-repeat="breadcrumb in $ctrl.breadcrumbs()">\n                      <a class="clickable-breadcrumb" ng-click="breadcrumb.action()" href ng-if="!$last">{{ breadcrumb.text | translate }}</a>\n                      <span class="active" ng-if="$last">{{ breadcrumb.text | translate }}{{ \' \' + $ctrl.suffix }}</span>\n                    </li>\n                  </ul>\n                </div>',controller:b,bindings:{page:"@",suffix:"@"}})}(invoices||(invoices={}));var invoices;!function(a){var b=function(){function a(a,b,c,d,e){var f=this;this.$mdDialog=a,this.settingsApi=b,this.wixBiLogger=c,this.isLoading=!0,this.confirm=function(){return f.saveBusinessSettings().then(function(){return f.$mdDialog.hide()})},this.cancel=function(){return f.$mdDialog.cancel()},b.getBusinessSettings().then(function(a){var b=a.businessName,c=a.businessEmail;f.businessName=b,f.businessEmail=c,f.isLoading=!1}),c.log("ON_BOARDING",{name:"basic info"})}return a.$inject=["$mdDialog","settingsApi","wixBiLogger","$rootScope","$timeout"],a.prototype.saveBusinessSettings=function(){var a=this,b=a.businessName,c=a.businessEmail;return this.settingsApi.setBusinessSettings({businessName:b,businessEmail:c})},a}();angular.module("quotesAppInternal").component("firstTimeDialog",{templateUrl:"modules/quotes/first-time-dialog/first-time-dialog.preload.html",controller:b})}(invoices||(invoices={})),angular.module("quoteCommon").run(["$templateCache",function(a){"use strict";a.put("modules/quote-user-preview/quote-user-preview.preload.html","<div class='quote-user-preview'>\n<div class='upper-strip-wrapper'>\n<div class='quote-user-close-button' data-hook='preview-close-button' ng-click='dialog.cancel()' title='{{&quot;quote.preview.close&quot; | translate}}'></div>\n<button-strip class='upper-button-strip' dialog='dialog' ng-class='{&#39;with-pending-message&#39;: dialog.quote.status === &#39;Pending&#39; || dialog.quote.status === &#39;Processing&#39;}' ng-if='dialog.shouldDisplayButtonStrip()' quote='dialog.quote'></button-strip>\n</div>\n<div class='quote-user-preview-modal' data-hook='quote-user-preview-modal'>\n<div class='pending-message' data-hook='pending-status-message' ng-if='dialog.quote.status === &quot;Pending&quot;'>\n{{ 'quote.preview.pending_status_message' | translate }}\n</div>\n<div class='pending-message' data-hook='processing-status-message' ng-if='dialog.quote.status === &quot;Processing&quot;'>\n{{ 'quote.preview.processing_status_message' | translate }}\n</div>\n<quote-view ng-class='{&#39;with-pending-message&#39;: dialog.quote.status === &#39;Pending&#39; || dialog.quote.status === &#39;Processing&#39;}' quote='dialog.quote'></quote-view>\n</div>\n</div>\n"),
a.put("modules/quote-view-uou-payment-page/quote-view-uou-payment-page-desktop.preload.html","<div class='payment-page'>\n<div class='header hide-mobile'>\n<div class='buttons'>\n<a class='wix-button back-button invisible' data-hook='back-button' ng-href='{{$ctrl.backUrl}}'>\n<i class='quotes-svg-font-icons-back-icon'></i>\n<span>{{ 'quoteview.back_to_invoice' | translate }}</span>\n</a>\n</div>\n</div>\n<div class='payment-section'>\n<section class='section-main'>\n<div class='payment-container'>\n<wix-payment configurations='$ctrl.configuration' on-payment-success='$ctrl.onPaymentSuccessHandler()'></wix-payment>\n<div class='security-icon hide-mobile'></div>\n</div>\n<div class='summary-container hide-mobile'><div class='summary' data-hook='payment-summary'>{{'quoteview.uou_payment_summary'| translate}}</div><div class='pair top separator'><div class='label' data-hook='invoice-number-label'>{{'quoteview.uou_invoice_number'| translate}}</div><div class='value' data-hook='invoice-number-value'>{{$ctrl.invoice.quoteNumber}}</div></div>\n<div class='pair extra-separator separator'><div class='label' data-hook='total-label'>{{'quoteview.uou_total'| translate}}</div><div class='value' data-hook='total-value'>{{$ctrl.invoice.total| money : $ctrl.invoice.currency }}</div></div>\n<div class='pair'><div class='label' data-hook='paid-label'>{{'quoteview.uou_paid'| translate}}</div><div class='value' data-hook='paid-value'>{{ -1 * $ctrl.invoice.paid| money : $ctrl.invoice.currency }}</div></div>\n<div class='pair separator extra-separator balance'><div class='label' data-hook='balance-label'>{{'quoteview.uou_balance'| translate}}</div><div class='value' data-hook='balance-value'>{{$ctrl.invoice.balance| money : $ctrl.invoice.currency }}</div></div>\n<div class='pair separator'></div>\n</div>\n</section>\n</div>\n</div>\n"),a.put("modules/quote-view-uou-payment-page/quote-view-uou-payment-page-mobile.preload.html","<div class='payment-page-mobile'>\n<div class='summary-container'><div class='summary' data-hook='payment-summary'>\n{{'quoteview.uou_payment_summary'| translate}}\n<div class='value balance' data-hook='balance-value'>{{$ctrl.invoice.balance| money : $ctrl.invoice.currency }}</div>\n</div></div>\n<div class='payment-container'>\n<wix-payment configurations='$ctrl.configuration' on-payment-success='$ctrl.onPaymentSuccessHandler()'></wix-payment>\n<div class='security-icon'></div>\n</div>\n</div>\n"),a.put("modules/quote-view-uou/quote-view.preload.html","<div class='quote-user-preview' ng-class='{ &#39;uou-no-header&#39;: !$ctrl.shouldShowPayButton(), &#39;sticky-support&#39;: $ctrl.supportsSticky(), &#39;is-mobile&#39;: $ctrl.isMobile() }'>\n<div class='header'>\n<div class='buttons'>\n<div class='button-strip'>\n<a class='wix-button pull-left print quotes-svg-font-icons-print-icon' data-hook='quoteview-print' ng-click='$ctrl.print()'>\n{{ 'quoteview.print_button' | translate }}\n</a>\n<a class='wix-button pull-left pdf quotes-svg-font-icons-download-icon invisible' data-hook='quoteview-download-pdf' download ng-click='$ctrl.downloadPdf()' target='_self'>\n{{ $ctrl.downloadKey | translate }}\n</a>\n<form action='{{ $ctrl.paymentUrl }}' data-hook='pay-button' method='post' ng-if='$ctrl.shouldShowPayButton()' ng-submit='$ctrl.gotoPaypal()'>\n<input name='token' type='hidden' value='{{ $ctrl.token }}'>\n<input name='version' type='hidden' value='{{ $ctrl.quote.version }}'>\n<button class='wix-button pay' data-hook='quoteview-pay-button' ng-disabled='$ctrl.isButtonDisabled' type='submit'>{{ 'quoteview.pay_button' | translate }}</button>\n</form>\n</div>\n</div>\n</div>\n<div load-pane-fixed-postion='$ctrl.isLoaderDisplayed'></div>\n<quote-view quote='$ctrl.quote'></quote-view>\n<div class='quote-view-content-margin'>\n<span class='copyright pull-left' data-hook='quoteview-copyright'>{{ 'quoteview.copyright' | translate }}</span>\n<div class='wix-invoices-logo pull-left'></div>\n</div>\n</div>\n"),a.put("modules/quote-view/quote-view-pdf.preload.html","<div class='quote-user-preview'>\n<div class='quote-view-content' ng-class='quoteView.statusLineClass()'>\n<section class='head'>\n<div class='inner'>\n<div class='details'>\n<div class='logo' data-hook='business-logo' ng-if='quote.businessInfo.logo'>\n<img ng-src='{{quote.businessInfo.logo}}' onerror='this.style.display=&#39;none&#39;'>\n</div>\n<div class='detail-item upper' data-hook='business-name'>\n<span ng-if='quote.businessInfo.businessName'>\n{{ quote.businessInfo.businessName }}\n</span>\n<span ng-if='!quote.businessInfo.businessName'>\n{{ quote.businessInfo.businessEmail }}\n</span>\n</div>\n<div class='detail-item' ng-if='quote.businessInfo.companyId'>\n{{ 'quote.form.companyId' | translate }}: {{ quote.businessInfo.companyId }}\n</div>\n<div class='detail-item' data-hook='business-address' ng-if='quoteView.replaceAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n<div class='detail-item' data-hook='business-address' ng-if='quoteView.showAddress(quote.businessInfo.businessAddress)'>\n<div ng-if='quoteView.prefixAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n{{ quote.businessInfo.businessAddress.street }}\n<br>\n<div class='detail-sub-item'>\n<span>{{ quote.businessInfo.businessAddress.city ? quote.businessInfo.businessAddress.city + ',' : '' }}</span>\n<span>{{ quoteView.businessAddressNames.state ? quoteView.businessAddressNames.state + ',' : '' }}</span>\n<span>{{ quote.businessInfo.businessAddress.zip ? quote.businessInfo.businessAddress.zip + ',' : '' }}</span>\n<span>{{ quoteView.businessAddressNames.country }}</span>\n</div>\n<div ng-if='quoteView.sufixAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n</div>\n<div class='detail-item' data-hook='business-email-phone'>\n{{ 'quote.form.email' | translate }}: {{ quote.businessInfo.businessEmail }}\n<br>\n<div class='detail-sub-item'>\n<span ng-if='quote.businessInfo.businessPhone'>\n{{ 'quote.form.phone' | translate }}: {{ quote.businessInfo.businessPhone }}\n</span>\n</div>\n</div>\n<p></p>\n<div class='detail-item upper' data-hook='customer-title' ng-if='quote.customer.company'>\n<span>{{'quote.form.to' | translate}}:</span>\n<span data-hook='customer-company-name' ng-if='quote.customer.company'>{{quote.customer.company}}</span>\n</div>\n<div class='detail-item' ng-if='quote.customer.company'>\n<span data-hook='customer-name'>{{quote.customer.name}}</span>\n</div>\n<div class='detail-item upper' ng-if='!quote.customer.company'>\n<span>{{'quote.form.to' | translate}}:</span>\n<span data-hook='customer-name'>{{quote.customer.name}}</span>\n</div>\n<div class='detail-item' data-hook='customer-address' ng-if='!quoteView.isAddressEmpty(quote.customer.address)'>\n{{ quote.customer.address.street }}\n<br>\n<div class='detail-sub-item'>\n{{ quote.customer.address.city ? quote.customer.address.city + ',' : '' }} {{ quoteView.customerAddressNames.state }} {{ quote.customer.address.zip ? quote.customer.address.zip + ',' : '' }} {{ quoteView.customerAddressNames.country }}\n</div>\n</div>\n<div class='detail-item' ng-if='quote.customer.name !== quote.customer.email'>\n<span>{{ 'quote.form.email' | translate }}:</span>\n<span data-hook='customer-email'>{{ quote.customer.email }}</span>\n<br>\n<div class='detail-sub-item'>\n<span ng-if='quote.customer.phone'>\n{{ 'quote.form.phone' | translate }}:\n</span>\n<span data-hook='customer-phone'>{{ quote.customer.phone }}</span>\n</div>\n</div>\n<p></p>\n</div>\n<section class='general-parameters details pull-right'>\n<div class='quote-number pull-right' data-hook='quote-number'>{{ 'quote.form.quote' | translate }} {{quote.quoteNumber}}</div>\n<div class='pull-right' ng-if='quoteView.referenceText()'>\n<div class='reference-text' data-hook='reference-text'>{{ quoteView.referenceText() }}</div>\n</div>\n<div class='pull-right'>\n<div class='detail-sub-item'>\n<span>{{ 'quote.form.issue_date' | translate }}:</span>\n<span data-hook='issue-date'>{{quote.issueDate | localizeDate | date:'mediumDate'}}</span>\n</div>\n</div>\n<div class='pull-right'>\n<div class='detail-sub-item'>\n<span>{{ 'quote.form.due_date' | translate }}:</span>\n<span data-hook='due-date'>{{quote.dueDate | localizeDate | date:'mediumDate'}}</span>\n</div>\n</div>\n</section>\n</div>\n<div class='corner-ribbon top-left' data-hook='quote-status' ng-class='quoteView.statusLineClass()' ng-if='!quoteView.isPartialAndOverdue()'>{{ quoteView.statusLineTranslationKey() | translate }}</div>\n<div class='corner-ribbon top-left' data-hook='quote-status' ng-if='quoteView.isPartialAndOverdue()'>\n<span class='partiallypaid'>{{ 'quote.preview_status.partiallypaid' | translate }}</span>\n<span class='overdue'>{{ 'quote.preview_status.overdue' | translate }}</span>\n</div>\n</section>\n<div class='inner-section'>\n<section class='line-items-section'>\n<table class='line-items'>\n<thead>\n<th class='product'>\n{{ 'quote.form.product' | translate }}\n</th>\n<th class='price'>\n{{ 'quote.form.price' | translate }}\n</th>\n<th class='quantity'>\n{{ 'quote.form.quantity' | translate }}\n</th>\n<th class='line-total'>\n{{ 'quote.form.line_total' | translate }}\n</th>\n</thead>\n<tbody>\n<tr class='line-item' data-hook='line-item' ng-repeat-start='lineItem in quote.lineItems'>\n<td class='item-details'>\n<div class='avoid-break'>\n<div class='name' data-hook='item-name'>\n{{lineItem.name}}\n</div>\n<div class='description' data-hook='item-description' ng-if='lineItem.description'>\n{{lineItem.description}}\n</div>\n</div>\n</td>\n<td data-hook='item-price'>\n<div class='avoid-break'>\n<div class='price'>\n{{ lineItem.price | money : quote.currency }}\n</div>\n<div class='description' data-hook='item-description' ng-if='lineItem.description'></div>\n</div>\n</td>\n<td data-hook='item-quantity'>{{lineItem.quantity}}</td>\n<td data-hook='item-total'>{{ lineItem.total | money : quote.currency }}</td>\n</tr>\n<tr ng-repeat-end>\n<td colspan='4'>\n<hr class='separator'>\n</td>\n</tr>\n</tbody>\n</table>\n<table class='calc pull-right'>\n<tr class='pair' data-hook='subtotal-pair' ng-show='quoteView.showSubtotal()'>\n<td class='label'>\n{{ 'quote.form.sub_total' | translate }}:\n</td>\n<td class='value' data-hook='subtotal'>\n{{ quote.subtotal | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='discount' ng-if='quoteView.showDiscount()'>\n<td class='label'>\n{{ 'quote.form.discount' | translate }}\n<span data-hook='discount-rate'>({{quote.discountRate}}%):</span>\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='percentage-discount' ng-if='quoteView.showPercentageDiscount()'>\n<td class='label'>\n{{ 'quote.form.discount' | translate }}\n<span data-hook='discount-rate'>({{quote.discount.rate}}%):</span>\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='fixed-discount' ng-if='quoteView.showFixedDiscount()'>\n<td class='label' data-hook='discount-label'>\n{{ 'quote.form.discount' | translate }}\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' ng-repeat='itemizedFee in quote.itemizedFees'>\n<td class='label itemized-fee'>\n<span class='itemized-fee' data-hook='itemized-fee-name'>{{ itemizedFee.name }}:</span>\n</td>\n<td class='value' data-hook='itemized-fee-amount'>\n{{ itemizedFee.amount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' ng-repeat='tax in quote.taxes'>\n<td class='label taxes'>\n<span class='tax-name' data-hook='tax-name'>{{tax.name}}</span>\n<span>(</span><span class='tax-rate' data-hook='tax-rate'>{{tax.rate}}</span><span>%):</span>\n</td>\n<td class='value' data-hook='tax-amount'>\n{{ tax.amount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair separator-wrapper' ng-show='quoteView.showSubtotal()'>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr class='pair'>\n<td class='label'>\n{{ 'quote.form.quote_total' | translate }}:\n</td>\n<td class='value' data-hook='total'>\n{{ quote.total | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair'>\n<td class='label'>\n{{ 'quote.form.amount_paid' | translate }}:\n</td>\n<td class='value' data-hook='paid'>\n{{ -quote.paid | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair separator-wrapper'>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr class='pair balance'>\n<td>\n<div class='label pull-right'>\n{{ 'quote.form.balance' | translate }}:\n</div>\n</td>\n<td>\n<div class='value' data-hook='balance' ng-if='quote.balance === undefined'>\n&nbsp;\n</div>\n<div class='value' data-hook='balance' ng-if='quote.balance !== undefined'>\n{{ quote.balance | money : quote.currency  }}\n</div>\n</td>\n</tr>\n</table>\n</section>\n<section class='comments-section'>\n<div class='comment' ng-if='quote.notes'>\n<div class='title'>{{ 'quote.form.notes.title' | translate }}</div>\n<div class='content' data-hook='notes'>{{quote.notes}}</div>\n</div>\n<div class='comment' ng-if='quote.legalTerms'>\n<div class='title'>{{ 'quote.form.legal_terms.title' | translate }}</div>\n<div class='content' data-hook='legal-terms'>{{quote.legalTerms}}</div>\n</div>\n</section>\n</div>\n</div>\n</div>\n"),a.put("modules/quote-view/quote-view.preload.html","<div class='quote-view-content' data-hook='quote-view-content' ng-class='quoteView.statusLineClass()'>\n<section class='head'>\n<div class='inner'>\n<div class='details'>\n<div class='logo' data-hook='business-logo' ng-if='quote.businessInfo.logo'>\n<img ng-src='{{quote.businessInfo.logo}}' onerror='this.style.display=&#39;none&#39;'>\n</div>\n<div class='detail-item upper' data-hook='business-name'>\n<span ng-if='quote.businessInfo.businessName'>\n{{ quote.businessInfo.businessName }}\n</span>\n<span ng-if='!quote.businessInfo.businessName'>\n{{ quote.businessInfo.businessEmail }}\n</span>\n</div>\n<div class='detail-item' ng-if='quote.businessInfo.companyId'>\n{{ 'quote.form.companyId' | translate }}: {{ quote.businessInfo.companyId }}\n</div>\n<div class='detail-item' data-hook='business-address' ng-if='quoteView.replaceAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n<div class='detail-item' data-hook='business-address' ng-if='quoteView.showAddress(quote.businessInfo.businessAddress)'>\n<div ng-if='quoteView.prefixAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n{{ quote.businessInfo.businessAddress.street }}\n<br>\n<div class='detail-sub-item'>\n<span>{{ quote.businessInfo.businessAddress.city ? quote.businessInfo.businessAddress.city + ',' : '' }}</span>\n<span>{{ quoteView.businessAddressNames.state ? quoteView.businessAddressNames.state + ',' : '' }}</span>\n<span>{{ quote.businessInfo.businessAddress.zip ? quote.businessInfo.businessAddress.zip + ',' : '' }}</span>\n<span>{{ quoteView.businessAddressNames.country }}</span>\n</div>\n<div ng-if='quoteView.sufixAddress(quote.businessInfo.businessAddress)'>\n{{ quote.businessInfo.businessAddress.description.content }}\n</div>\n</div>\n<div class='detail-item' data-hook='business-email-phone'>\n{{ 'quote.form.email' | translate }}: {{ quote.businessInfo.businessEmail }}\n<br>\n<div class='detail-sub-item'>\n<span ng-if='quote.businessInfo.businessPhone'>\n{{ 'quote.form.phone' | translate }}: {{ quote.businessInfo.businessPhone }}\n</span>\n</div>\n</div>\n<p></p>\n<div class='detail-item upper' data-hook='customer-title' ng-if='quote.customer.company'>\n<span>{{'quote.form.to' | translate}}:</span>\n<span data-hook='customer-company-name' ng-if='quote.customer.company'>{{quote.customer.company}}</span>\n</div>\n<div class='detail-item' ng-if='quote.customer.company'>\n<span data-hook='customer-name'>{{quote.customer.name}}</span>\n</div>\n<div class='detail-item upper' ng-if='!quote.customer.company'>\n<span>{{'quote.form.to' | translate}}:</span>\n<span data-hook='customer-name'>{{quote.customer.name}}</span>\n</div>\n<div class='detail-item' data-hook='customer-address' ng-if='!quoteView.isAddressEmpty(quote.customer.address)'>\n{{ quote.customer.address.street }}\n<br>\n<div class='detail-sub-item'>\n{{ quote.customer.address.city ? quote.customer.address.city + ',' : '' }} {{ quoteView.customerAddressNames.state }} {{ quote.customer.address.zip ? quote.customer.address.zip + ',' : '' }} {{ quoteView.customerAddressNames.country }}\n</div>\n</div>\n<div class='detail-item' ng-if='quote.customer.name !== quote.customer.email'>\n<span>{{ 'quote.form.email' | translate }}:</span>\n<span data-hook='customer-email'>{{ quote.customer.email }}</span>\n<br>\n<div class='detail-sub-item'>\n<span ng-if='quote.customer.phone'>\n{{ 'quote.form.phone' | translate }}:\n</span>\n<span data-hook='customer-phone'>{{ quote.customer.phone }}</span>\n</div>\n</div>\n<p></p>\n</div>\n<section class='general-parameters details pull-right'>\n<div class='quote-number pull-right' data-hook='quote-number'>{{ 'quote.form.quote' | translate }} {{quote.quoteNumber}}</div>\n<div class='pull-right' ng-if='quoteView.referenceText()'>\n<div class='reference-text' data-hook='reference-text'>{{ quoteView.referenceText() }}</div>\n</div>\n<div class='pull-right'>\n<div class='detail-sub-item'>\n<span>{{ 'quote.form.issue_date' | translate }}:</span>\n<span data-hook='issue-date'>{{quote.issueDate | localizeDate | date:'mediumDate'}}</span>\n</div>\n</div>\n<div class='pull-right'>\n<div class='detail-sub-item'>\n<span>{{ 'quote.form.due_date' | translate }}:</span>\n<span data-hook='due-date'>{{quote.dueDate | localizeDate | date:'mediumDate'}}</span>\n</div>\n</div>\n</section>\n</div>\n<div class='corner-ribbon top-left' data-hook='quote-status' ng-class='quoteView.statusLineClass()' ng-if='!quoteView.isPartialAndOverdue()'>{{ quoteView.statusLineTranslationKey() | translate }}</div>\n<div class='corner-ribbon top-left' data-hook='quote-status' ng-if='quoteView.isPartialAndOverdue()'>\n<span class='partiallypaid'>{{ 'quote.preview_status.partiallypaid' | translate }}</span>\n<span class='overdue'>{{ 'quote.preview_status.overdue' | translate }}</span>\n</div>\n</section>\n<div class='inner-section'>\n<section class='line-items-section'>\n<table class='line-items'>\n<thead>\n<th class='product'>\n{{ 'quote.form.product' | translate }}\n</th>\n<th class='price'>\n{{ 'quote.form.price' | translate }}\n</th>\n<th class='quantity'>\n{{ 'quote.form.quantity' | translate }}\n</th>\n<th class='line-total'>\n{{ 'quote.form.line_total' | translate }}\n</th>\n</thead>\n<tbody>\n<tr class='line-item' data-hook='line-item' ng-repeat-start='lineItem in quote.lineItems'>\n<td class='item-details'>\n<div class='name' data-hook='item-name'>\n{{lineItem.name}}\n</div>\n<div class='description' data-hook='item-description' ng-if='lineItem.description'>\n{{lineItem.description}}\n</div>\n</td>\n<td data-hook='item-price'>{{ lineItem.price | money : quote.currency }}</td>\n<td data-hook='item-quantity'>{{lineItem.quantity}}</td>\n<td data-hook='item-total'>\n{{ lineItem.total | money : quote.currency }}\n</td>\n</tr>\n<tr ng-repeat-end>\n<td colspan='4'>\n<hr class='separator'>\n</td>\n</tr>\n</tbody>\n</table>\n<table class='calc pull-right'>\n<tr class='pair' data-hook='subtotal-pair' ng-show='quoteView.showSubtotal()'>\n<td class='label'>\n{{ 'quote.form.sub_total' | translate }}:\n</td>\n<td class='value' data-hook='subtotal'>\n{{ quote.subtotal | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='discount' ng-if='quoteView.showDiscount()'>\n<td class='label'>\n{{ 'quote.form.discount' | translate }}\n<span data-hook='discount-rate'>({{quote.discountRate}}%):</span>\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='percentage-discount' ng-if='quoteView.showPercentageDiscount()'>\n<td class='label'>\n{{ 'quote.form.discount' | translate }}\n<span data-hook='discount-rate'>({{quote.discount.rate}}%):</span>\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' data-hook='fixed-discount' ng-if='quoteView.showFixedDiscount()'>\n<td class='label' data-hook='discount-label'>\n{{ 'quote.form.discount' | translate }}\n</td>\n<td class='value' data-hook='discount-amount'>\n{{ -quote.discountAmount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' ng-repeat='itemizedFee in quote.itemizedFees'>\n<td class='label itemized-fee'>\n<span class='itemized-fee' data-hook='itemized-fee-name'>{{itemizedFee.name}}:</span>\n</td>\n<td class='value' data-hook='itemized-fee-amount'>\n{{ itemizedFee.amount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair' ng-repeat='tax in quote.taxes'>\n<td class='label taxes'>\n<span class='tax-name' data-hook='tax-name'>{{tax.name}}</span>\n<span>(</span><span class='tax-rate' data-hook='tax-rate'>{{tax.rate}}</span><span>%):</span>\n</td>\n<td class='value' data-hook='tax-amount'>\n{{ tax.amount | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair separator-wrapper' ng-show='quoteView.showSubtotal()'>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr class='pair'>\n<td class='label'>\n{{ 'quote.form.quote_total' | translate }}:\n</td>\n<td class='value' data-hook='total'>\n{{ quote.total | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair'>\n<td class='label'>\n{{ 'quote.form.amount_paid' | translate }}:\n</td>\n<td class='value' data-hook='paid'>\n{{ -quote.paid | money : quote.currency }}\n</td>\n</tr>\n<tr class='pair separator-wrapper'>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr class='pair balance'>\n<td>\n<div class='label pull-right'>\n{{ 'quote.form.balance' | translate }}:\n</div>\n</td>\n<td>\n<div class='value' data-hook='balance' ng-if='quote.balance === undefined'>\n&nbsp;\n</div>\n<div class='value' data-hook='balance' ng-if='quote.balance !== undefined'>\n{{ quote.balance | money : quote.currency  }}\n</div>\n</td>\n</tr>\n</table>\n</section>\n</div>\n<section class='comments-section' ng-if='quote.notes || quote.legalTerms'>\n<div class='comment' ng-if='quote.notes'>\n<div class='title'>{{ 'quote.form.notes.title' | translate }}:</div>\n<div class='content' data-hook='notes'>{{quote.notes}}</div>\n</div>\n<div class='comment' ng-if='quote.legalTerms'>\n<div class='title'>{{ 'quote.form.legal_terms.title' | translate }}:</div>\n<div class='content' data-hook='legal-terms'>{{quote.legalTerms}}</div>\n</div>\n</section>\n</div>\n"),a.put("modules/quotes/add-payment-to-quote-dialog/add-payment-to-quote-dialog.preload.html","<div class='wix-modal'>\n<form class='wix-modal--message-window wix-modal--alert' data-hook='add-payment-to-quote-dialog' name='addPaymentForm' ng-class='style' novalidate>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='add-payment-to-quote-dialog-title'>{{'add_payment_to_quote_dialog.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='$ctrl.cancel()' type='button'></button>\n</div>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content'>\n\x3c!-- body --\x3e\n<div data-hook='add-payment-to-quote-dialog-content'>\n{{ 'add_payment_to_quote_dialog.content1' | translate: { invoice_no: $ctrl.quote.quoteNumber } }}.\n</div>\n<div>\n<span data-hook='add-payment-to-quote-dialog-balance-label'>{{ 'add_payment_to_quote_dialog.content2' | translate }}</span>\n<span class='add-payment-to-quote-balance' data-hook='add-payment-to-quote-dialog-balance'>{{ $ctrl.quote.balance | money : $ctrl.quote.currency }}</span><span>.</span></div>\n<div class='add-payment-to-quote-options'>\n<div class='add-payment-to-quote-labels'>\n<label data-hook='enter-amount-label' for='amount-received'>\n{{ 'add_payment_to_quote_dialog.amount_received' | translate }} ({{ $ctrl.quote.currency | currencySymbol }}):\n</label>\n<label data-hook='payment-date-label' for='payment-date'>\n{{ 'add_payment_to_quote_dialog.payment_date' | translate }}:\n</label>\n</div>\n<div class='add-payment-to-quote-inputs'>\n<wix-input auto-focus-longer autofocus class='error add-payment-to-quote-dialog-amount' data-hook='add-payment-to-quote-dialog-amount-received' error-type='tooltip' id='amount-received' max='{{ $ctrl.quote.balance }}' min='0' ng-model='$ctrl.amount' ng-required='true' type='number'>\n<error-messages for='error'>\n<error-message when='max'>{{ 'add_payment_to_quote_dialog.validation.amount' | translate }}</error-message>\n<error-message when='min'>{{ 'add_payment_to_quote_dialog.validation.empty' | translate }}</error-message>\n<error-message when='number'>{{ 'add_payment_to_quote_dialog.validation.empty' | translate }}</error-message>\n<error-message when='required'>{{ 'add_payment_to_quote_dialog.validation.empty' | translate }}</error-message>\n</error-messages>\n</wix-input>\n<wix-popover-calendar date='$ctrl.paymentDate' on-select='$ctrl.paymentDate = $event.date' placement='bottom' show-control-buttons='false'>\n<div class='payment-date'>\n<wix-input data-hook='add-payment-to-quote-dialog-payment-date' date-formatter='mediumDate' id='payment-date' ng-model='$ctrl.paymentDate' readonly></wix-input>\n<label class='quotes-svg-font-icons-date-picker-icon' for='payment-date'></label>\n</div>\n</wix-popover-calendar>\n</div>\n</div>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='confirm-button modal-button wix-button' data-hook='add-payment-to-quote-dialog-action' ng-click='$ctrl.confirm()' type='submit'>{{'add_payment_to_quote_dialog.action.primary' | translate}}</button>\n<button class='cancel-button is-button-outline modal-button wix-button' data-hook='add-payment-to-quote-dialog-cancel' ng-click='$ctrl.cancel()' type='button'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</form>\n</div>\n"),a.put("modules/quotes/banners/banner-container/banner-container.old.preload.html","<div class='banner-container' data-hook='banner-container' ng-if='$ctrl.shouldShowBanner'>\n<div class='banner-content'>\n<ng-transclude></ng-transclude>\n<div class='close-button' data-hook='close-button' ng-click='$ctrl.hide()'>\n<i class='quotes-svg-font-icons-x-icon-banner'></i>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/banners/banner-container/banner-container.preload.html","<div class='banner-container' data-hook='banner-container' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;left&quot;: &quot;$x&quot;, &quot;width&quot;: &quot;calc(100vw - $x)&quot;, &quot;top&quot;: &quot;$y&quot;}' ng-if='$ctrl.shouldShowBanner'>\n<div class='banner-content'>\n<ng-transclude></ng-transclude>\n<div class='close-button' data-hook='close-button' ng-click='$ctrl.hide()'>\n<i class='quotes-svg-font-icons-x-icon-banner'></i>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/banners/mobile-banner/mobile-banner.preload.html","<div class='icon android'></div>\n<div class='icon apple'></div>\n<span data-hook='mobile-banner-content'>{{ 'invoices-mobile.banner' | translate }}</span>\n<a data-hook='mobile-app-link' href='http://apps.wix.com/mobile/v1/mobile-redirect/wix-one-app?referrer=INVOICES-DESKTOP' target='_blank'>{{ 'invoices-mobile.banner-app-link' | translate }}</a>\n"),a.put("modules/quotes/banners/payments-banner/payments-banner.preload.html","<span data-hook='payments-banner' wix-translate-compile='payments.banner.text'></span>\n<a class='payments-link' data-hook='payments-enable-link' href ng-click='$ctrl.managePayments()'>{{ 'payments.banner.link' | translate }}</a>\n"),
a.put("modules/quotes/customer-section/customer-section.preload.html","<table class='customer'>\n<tr ng-if='!customerSection.locked'>\n<td>\n<span class='mandatory'>{{ 'quote.form.customer' | translate }}</span>\n</td>\n<td class='customer-value' ng-if='!customerSection.locked'>\n<md-autocomplete class='customer-search' data-hook='quote-customer' error-message='{{&#39;quote.form.customer_error_message&#39; | translate}}' error-type='tooltip' md-action-text='{{ &#39;quote.form.create_customer&#39; | translate }}' md-action='customerSection.createNewCustomer(customerSection.customer)' md-autoselect='true' md-item-text='customer.title' md-items='customer in customerSection.searchCustomers(customerSection.customer.name)' md-menu-class='customer-suggestion-container' md-min-length='0' md-no-cache='true' md-search-text='customerSection.customer.name' md-select-on-match='true' md-selected-item-change='customerSection.customer.updateFromFullDto(customer)' md-validate='customerSection.validateCustomer()' ng-keyup='customerSection.customerKeyUp($event)' placeholder='{{ &#39;quote.form.customer_placeholder&#39; | translate }}' required='true'>\n<md-item-template>{{ customer.title }}</md-item-template>\n<md-not-found>{{ 'quote.form.not_found' | translate }}</md-not-found>\n</md-autocomplete>\n</td>\n</tr>\n<tr ng-if='customerSection.locked'>\n<td>\n<span class='mandatory'>{{ 'quote.form.customer' | translate }}</span>\n</td>\n<td wix-experiment-if='specs.invoices.EditInvoiceNumber'>\n<div class='customer-value'>\n<wix-input data-hook='quote-customer-label' disabled ng-model='customerSection.customer.name' type='text'></wix-input>\n<i append-to-body='true' class='quotes-svg-font-icons-info' data-hook='quote-customer-label-tooltip' max-width='214px' wix-tooltip='{{&#39;quote.customer.label_tooltip&#39; | translate}}'></i>\n</div>\n</td>\n<td wix-experiment-if='!specs.invoices.EditInvoiceNumber'>\n<wix-input data-hook='quote-customer-label' disabled ng-model='customerSection.customer.name'></wix-input>\n</td>\n<td wix-experiment-if='!specs.invoices.EditInvoiceNumber'>\n<i class='quotes-svg-font-icons-info' data-hook='quote-customer-label-tooltip' max-width='214px' wix-tooltip='{{&#39;quote.customer.label_tooltip&#39; | translate}}'></i>\n</td>\n</tr>\n<tr ng-if='customerSection.customer.email &amp;&amp; customerSection.customer.contactId'>\n<td>\n{{ 'quote.form.email' | translate }}\n</td>\n<td>\n<div class='customer-value'>\n<wix-input data-hook='quote-customer-email' disabled ng-if='customerSection.customer.allContactEmails.length&lt;=1' ng-model='customerSection.customer.email' type='text'></wix-input>\n<md-select data-hook='quote-customer-email' md-no-ink='true' ng-if='customerSection.customer.allContactEmails.length&gt;1' ng-model='customerSection.customer.email'>\n<md-option class='no-animate' data-hook='email-option-{{email}}' md-no-ink='true' ng-repeat='email in customerSection.customer.allContactEmails track by $index' ng-value='email'>\n{{email}}\n</md-option>\n</md-select>\n</div>\n</td>\n</tr>\n<tr ng-if='customerSection.customer.addressString'>\n<td>\n{{ 'quote.form.address' | translate }}\n</td>\n<td>\n<div class='customer-value'>\n<wix-input data-hook='quote-customer-address' disabled ng-if='customerSection.customer.allContactAddresses.length&lt;=1' ng-model='customerSection.customer.addressString' type='text'></wix-input>\n<md-select data-hook='quote-customer-address' md-no-ink='true' ng-if='customerSection.customer.allContactAddresses.length&gt;1' ng-model='customerSection.customer.fullAddress'>\n<md-option class='no-animate' data-hook='address-option-{{address.getDescription()}}' md-no-ink='true' ng-repeat='address in customerSection.customer.allContactAddresses track by $index' ng-value='address'>\n{{address.getDescription()}}\n</md-option>\n</md-select>\n</div>\n</td>\n</tr>\n<tr ng-if='customerSection.customer.contactId'>\n<td></td>\n<td>\n<button class='edit-customer' data-hook='edit-customer-button' ng-click='customerSection.editCustomer()' type='button'>\n{{ 'quote.customer.edit' | translate }}\n</button>\n</td>\n</tr>\n</table>\n"),a.put("modules/quotes/dialogs/alert-user-of-unverified-paypal-email.preload.html","<div class='wix-modal invalid-paypal-account-dialog'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='unconfirmed-paypal-account-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='dialog-title'>{{'alert_user_of_unverified_paypal_email.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n<div class='message' data-hook='dialog-message' translate='alert_user_of_unverified_paypal_email.message'></div>\n<div class='to-fix' data-hook='dialog-to-fix' translate='alert_user_of_unverified_paypal_email.to_fix'></div>\n<ul class='steps' data-hook='dialog-list'>\n<li>\n<span class='list-number'>1.</span>\n<span data-hook='dialog-list1'>{{\"alert_user_of_unverified_paypal_email.list1\" | translate}}</span>\n</li>\n<li>\n<span class='list-number'>2.</span>\n<span data-hook='dialog-list2'>{{\"alert_user_of_unverified_paypal_email.list2\" | translate}}</span>\n</li>\n<li>\n<span class='list-number'>3.</span>\n<span data-hook='dialog-list3'>{{\"alert_user_of_unverified_paypal_email.list3\" | translate}}</span>\n</li>\n</ul>\n<div data-hook='dialog-more-help'>\n<span translate='alert_user_of_unverified_paypal_email.more_help.prefix'></span>\n<a href='https://www.wix.com/support/html5/article/about-wix-invoices' target='_blank' translate='alert_user_of_unverified_paypal_email.more_help.support'></a>\n</div>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' data-hook='dialog-close' md-autofocus ng-click='dialog.confirm()'>{{\"alert_user_of_unverified_paypal_email.close\" | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/confirm-navigation-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--danger' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title'>{{ 'quote.leavepage.title' | translate }}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' md-autofocus ng-click='dialog.cancel($event)' type='button'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n<div class='message'>{{ 'quote.leavepage.note' | translate }}</div>\n</div>\n</div>\n<div class='wix-modal--footer smaller-buttons'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' ng-click='dialog.confirm($event)'>{{ 'quote.leavepage.confirm' | translate }}</button>\n<button class='modal-button wix-button wix-button-danger is-button-outline cancel-button' ng-click='dialog.cancel($event)'>{{ 'quote.leavepage.cancel' | translate }}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/delete-product-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='delete-product-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='delete-product-dialog-title'>{{'delete_product_dialog.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content' data-hook='delete-product-dialog-content'>\n\x3c!-- body --\x3e\n{{ 'delete_product_dialog.content' | translate }}\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' data-hook='delete-product-dialog-action' md-autofocus ng-click='dialog.confirm()'>{{'delete_product_dialog.action.primary' | translate}}</button>\n<button class='modal-button wix-button wix-button-danger is-button-outline cancel-button' data-hook='delete-product-dialog-cancel' ng-click='dialog.cancel()'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/delete-quote-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='delete-quote-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='delete-quote-dialog-title'>{{'delete_quote_dialog.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content' data-hook='delete-quote-dialog-content'>\n\x3c!-- body --\x3e\n{{ 'delete_quote_dialog.content' | translate }}\n<br>\n{{ 'delete_quote_dialog.content2' | translate }}\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' data-hook='delete-quote-dialog-action' md-autofocus ng-click='dialog.confirm()'>{{'delete_quote_dialog.action.primary' | translate}}</button>\n<button class='modal-button wix-button wix-button-danger is-button-outline cancel-button' data-hook='delete-quote-dialog-cancel' ng-click='dialog.cancel()'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/delete-tax-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='delete-tax-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='delete-tax-dialog-title'>{{'delete_tax_dialog.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content' data-hook='delete-tax-dialog-content'>\n\x3c!-- body --\x3e\n{{ 'delete_tax_dialog.content' | translate }}\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' data-hook='delete-tax-dialog-action' md-autofocus ng-click='dialog.confirm()'>{{'delete_tax_dialog.action.primary' | translate}}</button>\n<button class='modal-button wix-button wix-button-danger is-button-outline cancel-button' data-hook='delete-tax-dialog-cancel' ng-click='dialog.cancel()'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/initial-invoice-number-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--alert' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title'>{{ 'settings.general_settings.initial_number_alert.title' | translate }}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' md-autofocus ng-click='dialog.cancel($event)' type='button'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n<div class='message'>{{ 'settings.general_settings.initial_number_alert.content' | translate }}</div>\n</div>\n</div>\n<div class='wix-modal--footer smaller-buttons'>\n<button class='modal-button wix-button wix-modal--confirm-button' ng-click='dialog.confirm($event)'>{{ 'settings.general_settings.initial_number_alert.confirm' | translate }}</button>\n<button class='modal-button wix-button is-button-outline cancel-button' ng-click='dialog.cancel($event)'>{{ 'settings.general_settings.initial_number_alert.cancel' | translate }}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/initial-price-quote-number-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--alert' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title'>{{ 'settings.general_settings.initial_price_quote_number_alert.title' | translate }}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' md-autofocus ng-click='dialog.cancel($event)' type='button'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n<div class='message'>{{ 'settings.general_settings.initial_price_quote_number_alert.content' | translate }}</div>\n</div>\n</div>\n<div class='wix-modal--footer smaller-buttons'>\n<button class='modal-button wix-button wix-modal--confirm-button' ng-click='dialog.confirm($event)'>{{ 'settings.general_settings.initial_price_quote_number_alert.confirm' | translate }}</button>\n<button class='modal-button wix-button is-button-outline cancel-button' ng-click='dialog.cancel($event)'>{{ 'settings.general_settings.initial_price_quote_number_alert.cancel' | translate }}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/invalid-paypal-account-dialog.preload.html","<div class='wix-modal invalid-paypal-account-dialog'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='invalid-paypal-account-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='title'>{{'payments.paypal_invalid_account.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.close()'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n\x3c!-- body --\x3e\n<div class='message'>{{ 'payments.paypal_registration_fail.message' | translate }}</div>\n<div class='to-fix'>{{ 'payments.paypal_registration_fail.to_fix' | translate }}</div>\n<div class='options'>\n<div class='option upgrage'>\n<span class='list-number'>1.</span>\n<span translate-values='{ link: &#39;https://www.paypal.com/signin/&#39;, bi_event: &#39;INVALID_PAYPAL_ACCOUNT_POPUP_LINK&#39;, bi_args: &#39;{{ getBiArgs(&#39;upgrade&#39;) }}&#39; }' wix-translate-compile='payments.paypal_registration_fail.upgrade'></span>\n</div>\n<div class='option create'>\n<span class='list-number'>2.</span>\n<span translate-values='{ link: &#39;https://www.paypal.com/signin/&#39;, bi_event: &#39;INVALID_PAYPAL_ACCOUNT_POPUP_LINK&#39;, bi_args: &#39;{{ getBiArgs(&#39;create&#39;) }}&#39; }' wix-translate-compile='payments.paypal_registration_fail.create'></span>\n</div>\n</div>\n<div class='more-info'>\n<span translate-values='{ link: &#39;https://www.wix.com/support/html5/article/about-wix-invoices/&#39;, bi_event: &#39;INVALID_PAYPAL_ACCOUNT_POPUP_LINK&#39;, bi_args: &#39;{{ getBiArgs(&#39;support&#39;) }}&#39; }' wix-translate-compile='payments.paypal_registration_fail.more_info'></span>\n</div>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-button-danger cancel-button pull-right' data-hook='close-dialog' ng-click='dialog.close()'>{{'modal.action.close' | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/send-dialog.preload.html","<div class='wix-modal' md-dialog-min-height='699'>\n<div class='wix-modal--message-window wix-modal--alert' data-hook='send-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='send-dialog-title'>{{ 'send_dialog.header.title' | translate }}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<form name='sendDialogForm' ng-submit='dialog.send()' novalidate>\n<div class='wix-modal--body send-dialog'>\n<section class='send-dialog-section email-section'>\n<label class='section-label' data-hook='send-dialog-email-label'>{{ 'send_dialog.content.email_label' | translate }}</label>\n<wix-input data-hook='send-dialog-email-field' disabled ng-model='dialog.customerEmail' type='text'></wix-input>\n</section>\n<section class='send-dialog-section'>\n<label class='section-label' data-hook='send-dialog-subject-label'>{{ 'send_dialog.content.subject_label' | translate }}</label>\n<wix-input auto-focus data-hook='send-dialog-subject-field' ng-model='dialog.emailSubject' type='text'></wix-input>\n</section>\n<section class='send-dialog-section body-section'>\n<label class='section-label' data-hook='send-dialog-body-label'>{{ 'send_dialog.content.body_label' | translate }}</label>\n<wix-textarea class='new-mail-signature' data-hook='send-dialog-body-field' ng-model='dialog.emailBody' rows='7' type='text'></wix-textarea>\n</section>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button confirm-button' data-hook='send-dialog-send' type='submit'>{{ 'send_dialog.action.send' | translate }}</button>\n<button class='modal-button wix-button is-button-outline cancel-button' data-hook='send-dialog-cancel' ng-click='dialog.cancel()' type='button'>{{ 'send_dialog.action.cancel' | translate }}</button>\n</div>\n</form>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/tax-dialog.preload.html","<div class='wix-modal tax-dialog'>\n<div class='wix-modal--message-window wix-modal--alert tax-modal' data-hook='tax-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title'>\n{{taxDialog.isNewTax ? 'tax.form.title.new_tax' : 'tax.form.title.edit_tax' | translate}}\n</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='taxDialog.cancel()'></button>\n</div>\n<form data-hook='tax-dialog-form' name='taxForm' ng-submit='taxForm.$valid &amp;&amp; taxDialog.save()' novalidate>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content'>\n<table>\n<tr></tr>\n<td>\n<span class='mandatory'>{{ 'tax.form.name' | translate }}:</span>\n</td>\n<td>\n<wix-input auto-focus-longer class='error' data-hook='tax-name' error-message='{{&#39;tax.form.name_error_message&#39; | translate}}' error-type='tooltip' ng-model='taxDialog.tax.name' placeholder='{{&#39;tax.form.name-placeholder&#39; | translate}}' required type='text'></wix-input>\n</td>\n<tr>\n<td>\n<span class='mandatory'>{{ 'tax.form.rate' | translate }}:</span>\n</td>\n<td>\n<wix-input class='error' data-hook='tax-rate' error-message='{{&#39;tax.form.rate_error_message&#39; | translate}}' error-type='tooltip' min='0' ng-model='taxDialog.tax.rate' placeholder='{{&#39;tax.form.rate-placeholder&#39; | translate}}' required step='any' type='number'></wix-input>\n</td>\n</tr>\n</table>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='confirm-button modal-button wix-button' type='submit'>{{'modal.action.save' | translate}}</button>\n<button class='cancel-button is-button-outline modal-button wix-button' ng-click='taxDialog.cancel()' type='button'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</form>\n</div>\n</div>\n"),a.put("modules/quotes/dialogs/void-quote-dialog.preload.html","<div class='wix-modal'>\n<div class='wix-modal--message-window wix-modal--danger' data-hook='void-quote-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='void-quote-dialog-title'>{{'void_quote_dialog.header.title' | translate}}</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='dialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content' data-hook='void-quote-dialog-content'>\n\x3c!-- body --\x3e\n{{ 'void_quote_dialog.content' | translate }}\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='modal-button wix-button wix-modal--confirm-button wix-button-danger' data-hook='void-quote-dialog-action' md-autofocus ng-click='dialog.confirm()'>{{'void_quote_dialog.action.primary' | translate}}</button>\n<button class='modal-button wix-button wix-button-danger is-button-outline cancel-button' data-hook='void-quote-dialog-cancel' ng-click='dialog.cancel()'>{{'modal.action.cancel' | translate}}</button>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/empty-experience/empty-experience.preload.html","<div class='empty-experience-container' data-hook='empty-experience'>\n<div class='image'></div>\n<div class='empty-experience-title' data-hook='empty-experience-title'>\n{{ 'new-onboarding.empty-experience.title' | translate }}\n</div>\n<div class='empty-experience-content'>\n<div class='empty-experience-content-1' data-hook='empty-experience-content-1'>\n<i class='quotes-svg-font-icons-check'></i>\n{{ 'new-onboarding.empty-experience.content-1' | translate }}\n</div>\n<div class='empty-experience-content-2' data-hook='empty-experience-content-2'>\n<i class='quotes-svg-font-icons-check'></i>\n{{ 'new-onboarding.empty-experience.content-2' | translate }}\n</div>\n<div class='empty-experience-content-stores' data-hook='empty-experience-content-stores' ng-if='$ctrl.hasStore()'>\n<i class='quotes-svg-font-icons-check'></i>\n<span wix-translate-compile='new-onboarding.empty-experience.content-stores-with-link'></span>\n</div>\n<div class='empty-experience-content-3' data-hook='empty-experience-content-3'>\n<i class='quotes-svg-font-icons-check'></i>\n{{ 'new-onboarding.empty-experience.content-3' | translate }}\n</div>\n</div>\n<a class='wix-button is-button-large add-button' data-hook='empty-experience-create-invoice-button' ng-href='{{$ctrl.createUrl}}' type='button'>\n{{ 'new-onboarding.empty-experience.create-invoice' | translate }}\n</a>\n</div>\n"),a.put("modules/quotes/first-time-dialog/first-time-dialog.preload.html","<div class='wix-modal' data-hook='first-time-dialog' md-dialog-min-height='740'>\n<div class='wix-modal--message-window wix-modal--alert'>\n<div class='wix-modal--header'>\n<div class='image'></div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' data-hook='first-time-dialog-cancel' ng-click='$ctrl.cancel()' type='button'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content'>\n\x3c!-- body --\x3e\n<div class='first-time-dialog-title' data-hook='first-time-dialog-title'>{{ 'first_time_dialog.title' | translate }}</div>\n<div class='first-time-dialog-text' data-hook='first-time-dialog-text'>{{ 'first_time_dialog.text' | translate}}</div>\n<div load-pane='$ctrl.isLoading'></div>\n<div class='business-info-form'>\n<form name='businessInfoForm' ng-submit='businessInfoForm.$valid &amp;&amp; $ctrl.confirm()' novalidate>\n<label class='mandatory' for='business-name'>{{ 'first_time_dialog.business_name' | translate }}</label>\n<wix-input class='error' data-hook='business-name' error-message='{{&#39;first_time_dialog.validation.business_name&#39; | translate}}' error-type='tooltip' id='business-name' ng-model='$ctrl.businessName' required type='text'></wix-input>\n<label class='mandatory' for='business-email'>{{ 'first_time_dialog.business_email' | translate }}</label>\n<wix-input class='error' commons-email-validator data-hook='business-email' error-message='{{&#39;first_time_dialog.validation.business_email&#39; | translate}}' error-type='tooltip' id='business-email' ng-model='$ctrl.businessEmail' required type='text'></wix-input>\n<button class='wix-button' data-hook='first-time-dialog-create-invoice' type='sumbit'>{{ 'first_time_dialog.create_invoice' | translate }}</button>\n</form>\n</div>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<div class='first-time-dialog-disclaimer' data-hook='first-time-dialog-disclaimer'>{{ 'first_time_dialog.disclaimer' | translate }}</div>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/get-paid-via-stripe-dialog/get-paid-via-stripe-dialog.preload.html","<div class='wix-modal get-paid'>\n<div class='wix-modal--message-window wix-modal--alert'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='header'>\n{{'get_paid_via_stripe.header' | translate}}\n<br>\n<div class='quotes-svg-font-icons-stripe-white'></div>\n</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' data-hook='cancel' ng-click='$ctrl.$mdDialog.cancel()'></button>\n</div>\n<div class='wix-modal--body'>\n<div class='wix-modal--content stripe-signon-list'>\n<div class='stripe-signon'>\n<div class='stripe-title' data-hook='connect-stripe-account'>\n<span>{{'get_paid_via_stripe.connect_stripe_account' | translate}}</span>\n</div>\n<div class='stripe-button'>\n<button class='wix-button' data-hook='connect-stripe-account-button' ng-click='$ctrl.gotoConnectStripe()' type='button' wix-bi-args='{name: &#39;stripe&#39;, origin:&#39;{{$ctrl.biOrigin}}&#39;}' wix-bi='PAYMENT_ACCOUNT_CONNECT'>{{ 'get_paid_via_stripe.connect_stripe_account_button' | translate}}</button>\n</div>\n</div>\n<div class='stripe-signon'>\n<div class='stripe-title' data-hook='add-stripe-account'>\n<span>{{'get_paid_via_stripe.add_stripe_account' | translate}}</span>\n</div>\n<div class='stripe-button'>\n<button class='wix-button is-button-outline' data-hook='add-stripe-account-button' ng-click='$ctrl.gotoCreateStripe()' type='button' wix-bi-args='{name: &#39;stripe&#39;, origin:&#39;{{$ctrl.biOrigin}}&#39;}' wix-bi='PAYMENT_ACCOUNT_CREATE'>{{ 'get_paid_via_stripe.add_stripe_account_button' | translate}}</button>\n</div>\n</div>\n</div>\n</div>\n<div class='notice stripe-notice' data-hook='get-help-at-stripe'>\n<a href='https://support.stripe.com/' target='_blank'>\n<div class='help-sign'>?</div><span>{{'get_paid_via_stripe.get_help' | translate}}</span></a>\n{{'get_paid_via_stripe.at_stripe' | translate}}\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/payments/payments.preload.html","<section>\n<div class='payments-section'>\n<cashier-settings configuration='$ctrl.configuration'></cashier-settings>\n</div>\n</section>\n"),a.put("modules/quotes/product-list/product-dialog/product-create.preload.html","<div class='wix-modal'>\n<div class='product wix-modal--message-window wix-modal--alert' data-hook='product-dialog' ng-class='style'>\n<div class='wix-modal--header'>\n<div class='wix-modal--title' data-hook='create-product-dialog-title'>\n{{productCtrl.isNewProduct ? 'product.create.form.title' : 'product.edit.form.title' | translate}}\n</div>\n<button class='wix-modal--close-button wix-style-svg-font-icons-close' ng-click='productCtrl.cancel()'></button>\n</div>\n<form data-hook='product-dialog-form' name='productForm' ng-submit='productForm.$valid &amp;&amp; productCtrl.save()' novalidate>\n<div class='wix-modal--body'>\n<img class='modal-icon' ng-show='iconUrl' ng-src='{{iconUrl}}'>\n<div class='wix-modal--content'>\n<table class='product-create-dialog'>\n<tr></tr>\n<td>\n<span class='mandatory'>{{ 'product.create.form.product' | translate }}:</span>\n</td>\n<td>\n<wix-input auto-focus-longer class='error' data-hook='product-name' error-message='{{&#39;product.create.form.product_error_message&#39; | translate}}' error-type='tooltip' ng-model='productCtrl.product.name' placeholder='{{&#39;product.create.form.product-placeholder&#39; | translate}}' required type='text'></wix-input>\n</td>\n<tr class='description'>\n<td>\n{{ 'product.create.form.description' | translate }}:\n</td>\n<td>\n<wix-textarea data-hook='product-description' ng-model='productCtrl.product.description' placeholder='{{&#39;product.create.form.description-placeholder&#39; | translate}}'></wix-textarea>\n</td>\n</tr>\n<tr>\n<td>\n<span data-hook='product-price-label'>\n{{ 'product.create.form.price' | translate }} ({{ productCtrl.currency | currencySymbol }}):\n</span>\n</td>\n<td>\n<wix-input class='error' data-hook='product-price' error-message='{{&#39;product.create.form.price_too_high_error_message&#39; | translate}}' error-type='tooltip' max='{{productCtrl.maximumProductPrice}}' money='{{productCtrl.currency}}' ng-model='productCtrl.product.price' placeholder='{{&#39;product.create.form.price-placeholder&#39; | translate}}' step='any' type='number'></wix-input>\n</td>\n</tr>\n</table>\n</div>\n</div>\n<div class='wix-modal--footer'>\n<button class='confirm-button modal-button wix-button' type='submit'>\n{{'modal.action.save' | translate}}\n</button>\n<button class='cancel-button is-button-outline modal-button wix-button' data-hook='cancel-button' ng-click='productCtrl.cancel()' type='button'>\n{{'modal.action.cancel' | translate}}\n</button>\n</div>\n</form>\n</div>\n</div>\n"),
a.put("modules/quotes/product-list/product-list.preload.html","<div>\n<section class='section-header' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' ng-if='products.IS_BUSINESS_MANAGER'>\n<span class='header-title pull-left' data-hook='crumbs'>\n<breadcrumbs page='products'></breadcrumbs>\n<span class='crumb'>{{ 'nav.products' | translate }}</span>\n</span>\n<a class='wix-button is-button-large add-button pull-right' data-hook='outer-product-new' ng-click='products.openProductDialog()' type='button'>{{ 'products.title.new_product' | translate }}</a>\n<a class='wix-button is-button-large is-button-outline create-quote-from-product pull-right' data-hook='create-quote' ng-click='products.createQuoteWithProducts()' ng-href='{{main.buildLink(&#39;quotes/create?wprods&amp;referrer=products&#39;)}}' ng-if='products.selectedProducts.size &amp;&amp; products.isOnboardingComplete' type='button'>{{ 'products.title.create_quote' | translate }}</a>\n</section>\n<section class='section-header' ng-if='!products.IS_BUSINESS_MANAGER'>\n<span class='header-title pull-left' data-hook='crumbs'>\n<breadcrumbs page='products'></breadcrumbs>\n<span class='crumb'>{{ 'nav.products' | translate }}</span>\n</span>\n<a class='wix-button is-button-large add-button pull-right' data-hook='outer-product-new' ng-click='products.openProductDialog()' type='button'>{{ 'products.title.new_product' | translate }}</a>\n<a class='wix-button is-button-large is-button-outline create-quote-from-product pull-right' data-hook='create-quote' ng-click='products.createQuoteWithProducts()' ng-href='{{main.buildLink(&#39;quotes/create?wprods&amp;referrer=products&#39;)}}' ng-if='products.selectedProducts.size &amp;&amp; products.isOnboardingComplete' type='button'>{{ 'products.title.create_quote' | translate }}</a>\n</section>\n<section class='section-main first-section last-section product welcome' ng-hide='products.productsList.length'>\n<div class='image'></div>\n<div class='title'>\n{{ 'product.welcome.title' | translate }}\n</div>\n<div class='description'>\n{{ 'product.welcome.description1' | translate }}\n<div class='clearfix'></div>\n{{ 'product.welcome.description2' | translate }}\n</div>\n<a class='wix-button is-button-large add-button' data-hook='inner-product-new' ng-click='products.openProductDialog()' type='button'>{{ 'products.title.new_product' | translate }}</a>\n</section>\n<section class='section-main first-section last-section product-list product-new' ng-show='products.productsList.length'>\n<table class='quotes wix-table products products-table'>\n<thead wix-experiment-if='specs.wos.businessManagerPhase4'>\n<tr>\n<th class='product-service'></th>\n<th class='description'></th>\n<th class='price'></th>\n<th class='edit'></th>\n<th class='delete'></th>\n</tr>\n</thead>\n<thead>\n<tr>\n<th class='product-service'>\n{{ 'products.list.product' | translate }}\n</th>\n<th class='description'>\n{{ 'products.list.description' | translate }}\n</th>\n<th class='price'>\n{{ 'products.list.price' | translate }}\n({{ products.settings.currency | currencySymbol }})\n<i class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;product.currency.tooltip&#39; | translate}}'></i>\n</th>\n<th class='edit'></th>\n<th class='delete'></th>\n</tr>\n</thead>\n<tbody>\n<tr class='quotes-item' data-hook='products-item' ng-repeat='product in products.productsList | orderBy: &#39;name&#39; track by product.productId'>\n<td class='product-service' ng-click='products.openProductDialog(product)'>\n<wix-checkbox data-hook='product-checkbox' ng-change='products.toggle(product)' ng-click='$event.stopPropagation()' ng-model='currentSelected'></wix-checkbox>\n<span data-hook='product-name'>{{product.name}}</span>\n</td>\n<td class='description' data-hook='product-description' ng-click='products.openProductDialog(product)'>{{ product.description }}</td>\n<td class='price' data-hook='product-price' ng-click='products.openProductDialog(product)'>{{ product.price | money : products.settings.currency }}</td>\n<td class='edit' ng-click='products.openProductDialog(product)'>\n<a data-hook='edit-product' href='' wix-tooltip='{{ &#39;products.list.actions.edit&#39; | translate }}'>\n<div class='action quotes-svg-font-icons-edit-outline'></div>\n</a>\n</td>\n<td class='delete' ng-click='products.openProductDelete(product)' wix-bi='PRODUCT_DELETE_DIALOG'>\n<a data-hook='delete-product' href='' wix-tooltip='{{ &#39;products.list.actions.delete&#39; | translate }}'>\n<div class='action delete-action wix-style-svg-font-icons-trash-can'></div>\n</a>\n</td>\n</tr>\n</tbody>\n</table>\n</section>\n</div>\n"),a.put("modules/quotes/quote-list-page/quote-list-page.desktop.preload.html","<section class='section-header' data-hook='header-section' experiment-values='{&#39;true&#39;: &#39;breadcrumbs-experiment&#39;}' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' wix-experiment-class='specs.wos.businessManagerPhase4'>\n<span class='header-title pull-left' data-hook='crumbs'>\n<breadcrumbs page='quotes' wix-experiment-if='!specs.wos.businessManagerPhase4'></breadcrumbs>\n<span class='crumb' ng-if='!quotes.IS_BUSINESS_MANAGER'>{{ 'nav.quotes' | translate }}</span>\n<span class='crumb' ng-if='quotes.IS_BUSINESS_MANAGER'>{{ 'nav.invoices' | translate }}</span>\n<span class='quote-list-count' data-hook='quote-list-count' ng-if='quotes.quotes.total'>{{ quotes.quotes.total }}</span>\n</span>\n<a class='wix-button is-button-large add-button pull-right' data-hook='create-invoice-button' ng-href='{{quotes.createUrl}}' type='button'>{{ 'quotes.action.new_quote' | translate }}</a>\n<navigation class='pull-right' ng-if='quotes.IS_BUSINESS_MANAGER'></navigation>\n</section>\n<section class='section-main first-section last-section' data-hook='quote-empty-experience-section' experiment-values='{&#39;true&#39;: &#39;breadcrumbs-experiment&#39;}' ng-show='quotes.showEmptyExperience()' wix-experiment-class='specs.wos.businessManagerPhase4'>\n<empty-experience create-url='{{quotes.createUrl}}'></empty-experience>\n</section>\n<section class='section-main first-section quote-summary-section' data-hook='quote-summary-section' experiment-values='{&#39;true&#39;: &#39;breadcrumbs-experiment&#39;}' ng-show='quotes.showList()' wix-experiment-class='specs.wos.businessManagerPhase4'>\n<quotes-summaries-filter currencies='quotes.quotes.availableCurrencies' on-change='quotes.onSummariesFilterChange(params)' selected-currency='quotes.selectedCurrency'></quotes-summaries-filter>\n<quotes-summaries currency='quotes.selectedCurrency' totals='quotes.quotes.quoteTotalsByCurrency[quotes.selectedCurrency]'></quotes-summaries>\n</section>\n<section class='section-main quote-list-section last-section' data-hook='quote-list-section' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;min-height&quot;:&quot;calc(100vh - 336px - $y + 30px)&quot;}' ng-if='!main.mobileView()' ng-show='quotes.showList()'>\n<quote-list bi-page-name='quotes.biPageName' on-item-change='quotes.onItemChange()' preview-id='quotes.preview'></quote-list>\n</section>\n<div class='safari-bottom'></div>\n<div class='quote-list-loader' data-hook='quote-list-loader' ng-hide='quotes.quotes.loadedAll()'>\n<div class='loader'></div>\n</div>\n"),a.put("modules/quotes/quote-list-page/quote-list-page.mobile.preload.html","<mobile-header app-title='Invoices'></mobile-header>\n<section class='section-main' ng-hide='quotes.listQuotes.quotes.length' ng-include='&#39;modules/quotes/quotes-empty-experience/quotes-empty-experience.preload.html&#39;'></section>\n<section class='section-main quote-summary-section' data-hook='quote-summary-section' ng-show='quotes.listQuotes.quotes.length'>\n<div class='summaries'>\n<div class='summary paid' data-hook='summary-paid'>\n<div class='image image-paid'></div>\n<div class='summary-text'>\n<div class='sum' data-hook='sum'>\n{{quotes.listQuotes.totalsByCurrency[quotes.currency].paid.sum | money : quotes.currency }}\n</div>\n<div class='description' data-hook='description'>\n{{ quotes.getDescription('paid') }}\n</div>\n</div>\n</div>\n<div class='vertical'></div>\n<div class='summary pending' data-hook='summary-pending'>\n<div class='image image-pending'></div>\n<div class='summary-text'>\n<div class='sum' data-hook='sum'>\n{{quotes.listQuotes.totalsByCurrency[quotes.currency].sent.sum | money : quotes.currency }}\n</div>\n<div class='description' data-hook='description'>\n{{ quotes.getDescription('sent') }}\n</div>\n</div>\n</div>\n<div class='vertical'></div>\n<div class='summary overdue' data-hook='summary-overdue'>\n<div class='image image-overdue'></div>\n<div class='summary-text'>\n<div class='sum' data-hook='sum'>\n{{quotes.listQuotes.totalsByCurrency[quotes.currency].overdue.sum | money : quotes.currency }}\n</div>\n<div class='description' data-hook='description'>\n{{ quotes.getDescription('overdue') }}\n</div>\n</div>\n</div>\n</div>\n</section>\n<section class='section-main quote-list-section' data-hook='quote-list-section' ng-if='quotes.mobileView()' ng-show='quotes.listQuotes.quotes.length'>\n<div class='title'>Select the invoice you want to see</div>\n<div class='quotes-item' data-hook='quotes-item' ng-class='{&#39;quotes-item-active&#39;: quotes.activeQuote === quote.quoteId}' ng-click='quotes.quotesRoute.navigateToQuotePreview(quote.quoteId)' ng-mouseenter='quotes.activeQuote = quote.quoteId' ng-repeat='quote in quotes.listQuotes.quotes track by quote.quoteId'>\n<div class='head'>\n<div class='quote-number'>{{quote.quoteNumber}}</div>\n<div class='due-date'>{{ quote.dueDate | date:'mediumDate'}}</div>\n</div>\n<div class='content'>\n<div class='customer'>{{ quote.customer.email }}</div>\n<div class='total'>{{ quote.total | money : quote.currency }}</div>\n<div class='status' ng-class='quote.status.toLowerCase()'>{{ 'quote.status.' + quote.status.toLowerCase() | translate }}</div>\n<div class='arrow-right'>&nbsp;</div>\n</div>\n</div>\n</section>\n"),a.put("modules/quotes/quote-list-page/quote-list-page.preload.html","<adaptive-view class='adaptive-view-quote-list' desktop-view='modules/quotes/quote-list-page/quote-list-page.desktop.preload.html' mobile-view='modules/quotes/quote-list-page/quote-list-page.mobile.preload.html'></adaptive-view>\n"),a.put("modules/quotes/quote-list/quote-list.preload.html","<div class='filter-search' data-hook='quotes-filter-search-section' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;top&quot;: &quot;calc($y + 287px)&quot;}'>\n<quotes-filter counts-by-status='$ctrl.quotes.countsByStatus' on-filter-change='$ctrl.onSelectedStatus(status)' selected-filter='$ctrl.currentFilter'></quotes-filter>\n<wix-search class='animated' data-hook='quote-list-search' ng-keyup='$ctrl.onSearchKeyUp($event)' ng-model='$ctrl.currentSearchText' on-clear='$ctrl.onSearchClear()' placeholder='{{ &#39;quote.search.placeholder&#39; | translate }}' skin='round-light' width='140px'></wix-search>\n</div>\n<table class='wix-table quotes quotes-table' data-hook='quote-list-table' experiment-values='{&#39;true&#39;: &#39;with-issue-date&#39;}' wix-experiment-class='specs.invoices.SortByIssueDate'>\n<thead wix-experiment-if='specs.wos.businessManagerPhase4'>\n<tr class='sort-header'>\n<th class='quote-number'></th>\n<th class='customer'></th>\n<th class='issue-date' wix-experiment-if='specs.invoices.SortByIssueDate'></th>\n<th class='due-date' wix-experiment-if='specs.invoices.SortByIssueDate'></th>\n<th class='total'></th>\n<th class='due-date' wix-experiment-if='!specs.invoices.SortByIssueDate'></th>\n<th class='viewed'></th>\n<th class='status'></th>\n<th class='settings'></th>\n</tr>\n</thead>\n<thead fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;top&quot;: &quot;calc($y + 364px)&quot;}'>\n<tr class='sort-header' data-hook='quotes-sort-section'>\n<th class='quote-number'>\n<quotes-sort data-hook='quote-number-sort' is-active='$ctrl.sortState.columnName === &#39;quoteNumber&#39;' label='{{&#39;quotes.list.quote_number&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;quoteNumber&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='customer'>\n<quotes-sort data-hook='customer-sort' is-active='$ctrl.sortState.columnName === &#39;customer&#39;' label='{{&#39;quotes.list.customer&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;customer&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='issue-date' wix-experiment-if='specs.invoices.SortByIssueDate'>\n<quotes-sort data-hook='issue-date-sort' is-active='$ctrl.sortState.columnName === &#39;issueDate&#39;' label='{{&#39;quotes.list.issue_date&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;issueDate&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='due-date' wix-experiment-if='specs.invoices.SortByIssueDate'>\n<quotes-sort data-hook='due-date-sort' is-active='$ctrl.sortState.columnName === &#39;dueDate&#39;' label='{{&#39;quotes.list.due_date&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;dueDate&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='total'>\n<quotes-sort data-hook='total-sort' is-active='$ctrl.sortState.columnName === &#39;total&#39;' label='{{&#39;quotes.list.total&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;total&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='due-date' wix-experiment-if='!specs.invoices.SortByIssueDate'>\n<quotes-sort data-hook='due-date-sort' is-active='$ctrl.sortState.columnName === &#39;dueDate&#39;' label='{{&#39;quotes.list.due_date&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;dueDate&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='viewed'></th>\n<th class='status'>\n<quotes-sort data-hook='settings-sort' is-active='$ctrl.sortState.columnName === &#39;status&#39;' label='{{&#39;quotes.list.status&#39; | translate}}' on-sort-change='$ctrl.onChangedSort(&#39;status&#39;, dir)' sort-order='$ctrl.sortState.direction'></quotes-sort>\n</th>\n<th class='settings'></th>\n</tr>\n</thead>\n<tbody ng-hide='$ctrl.showEmptyFilter()' ng-mouseleave='$ctrl.leave($event)'>\n<tr class='quotes-item' data-hook='quotes-item' ng-class='{&#39;quotes-item-active&#39;: $ctrl.activeQuote === quote.quoteId}' ng-click='$ctrl.deactivateQuote() || $ctrl.preview(quote)' ng-mouseenter='$ctrl.activeQuote = quote.quoteId' ng-repeat='quote in $ctrl.quotes.list track by quote.quoteId'>\n<td class='quote-number'>\n{{ quote.quoteNumber }}\n<input data-hook='quote-id' type='hidden' value='{{quote.quoteId}}'>\n</td>\n<td class='customer'>\n<div append-to-body='true' tooltip-enable='{{customerOverflow}}' untrusted wix-tooltip='{{quote.customer.name || quote.customer.email}}'>\n<div is-overflow='customerOverflow'>{{ quote.customer.name || quote.customer.email }}</div>\n</div>\n</td>\n<td class='issue-date' wix-experiment-if='specs.invoices.SortByIssueDate'>{{ quote.issueDate | localizeDate | date:'mediumDate'}}</td>\n<td class='due-date' wix-experiment-if='specs.invoices.SortByIssueDate'>{{ quote.dueDate | localizeDate | date:'mediumDate'}}</td>\n<td class='total'>{{ quote.total | money : quote.currency }}</td>\n<td class='due-date' wix-experiment-if='!specs.invoices.SortByIssueDate'>{{ quote.dueDate | localizeDate | date:'mediumDate'}}</td>\n<td class='viewed'>\n<span append-to-body='true' class='quotes-svg-font-icons-viewed-icon' data-hook='item-viewed' max-width='215px' ng-if='$ctrl.isQuoteViewed(quote)' tooltip-scope='{quote: quote}' tooltip-template='{{$ctrl.tooltipViewedTemplate}}' wix-tooltip></span>\n</td>\n<td class='status' ng-class='quote.status.toLowerCase()'>\n<span append-to-body='true' class='status-box' data-hook='item-status' max-width='204px' ng-class='quote.status.toLowerCase()' ng-if='$ctrl.isProcessing(quote.status)' wix-tooltip='{{ &#39;quote.status.pending_tooltip&#39; | translate }}'>{{ 'quote.status.' + quote.status.toLowerCase() | translate }}</span>\n<span append-to-body='true' class='status-box partiallypaid' data-hook='item-status' ng-if='$ctrl.isPartiallyPaid(quote.status)' tooltip-scope='{quote: quote}' tooltip-template='{{$ctrl.tooltipPartialPaymentTemplate}}' wix-tooltip>{{ 'quote.status.partiallypaid' | translate }}</span>\n<span class='status-box overdue' data-hook='item-status' ng-if='$ctrl.isOverdue(quote.status)'>{{ 'quote.status.overdue' | translate }}</span>\n<span class='status-box' data-hook='item-status' ng-class='quote.status.toLowerCase()' ng-if='!$ctrl.isOverdue(quote.status) &amp;&amp; !$ctrl.isProcessing(quote.status) &amp;&amp; !$ctrl.isPartiallyPaid(quote.status)'>{{ 'quote.status.' + quote.status.toLowerCase() | translate }}</span>\n</td>\n<td class='settings'>\n<actions-menu>\n<div class='more-actions' data-hook='quotes-item-settings'>\n<div class='quotes-svg-font-icons-more-actions'></div>\n</div>\n<actions-menu-content data-hook='quotes-actions-menu'>\n<actions-menu-item data-hook='quote-actions-{{ action }}' ng-click='$ctrl.deactivateQuote() || $ctrl[action](quote)' ng-if='$ctrl.translateActionName(action, quote)' ng-repeat='action in $ctrl.getActionsByStatus(quote)[0]'>\n<span>{{ $ctrl.translateActionName(action, quote) }}</span>\n</actions-menu-item>\n<actions-menu-separator ng-show='$ctrl.getActionsByStatus(quote)[1].length &gt; 0'></actions-menu-separator>\n<actions-menu-item data-hook='quote-actions-{{ action }}' ng-click='$ctrl.deactivateQuote() || $ctrl[action](quote)' ng-repeat='action in $ctrl.getActionsByStatus(quote)[1]'>\n<span>{{'actions.' + action | translate}}</span>\n</actions-menu-item>\n</actions-menu-content>\n</actions-menu>\n</td>\n</tr>\n</tbody>\n</table>\n<empty-filter-search ng-show='$ctrl.showEmptyFilter()' on-back-click='$ctrl.resetFilter()' search='$ctrl.currentSearch' status='$ctrl.currentFilter'></empty-filter-search>\n"),a.put("modules/quotes/quote-preview/quote-preview.preload.html","<div class='preview-wrapper'>\n<a class='close' ng-href='{{previewCtrl.quotesRoute.buildLink(&#39;quotes/list&#39;)}}'></a>\n<quote-view quote='previewCtrl.quote'></quote-view>\n</div>\n"),a.put("modules/quotes/quote/discount/discount.preload.html","<div class='discount-container' ng-class='{ &#39;wide-currency&#39;: symbol.length &gt; 1 }'>\n<wix-input class='error discount-value' data-hook='quote-discount' error-messages='{&quot;min&quot;: &quot;{{ &#39;quote.form.discount_negative_error_message&#39; | translate }}&quot;, &quot;number&quot;: &quot;{{ &#39;quote.form.discount_negative_error_message&#39; | translate }}&quot;, &quot;max&quot;: &quot;{{ &#39;quote.form.discount_error_message&#39; | translate }}&quot; }' error-type='tooltip' name='discount' ng-change='$ctrl.onChange()' ng-max='$ctrl.getMax()' ng-min='$ctrl.getMin()' ng-model='$ctrl.amount' placeholder='{{$ctrl.placeholder}}' type='number'>\n<div class='discount-switch' data-hook='switch-container'>\n<div class='percent' data-hook='percent-switch' ng-class='{ &#39;active&#39; : $ctrl.type === &#39;percentage&#39;}' ng-click='$ctrl.setPercentActive(); $parent.quoteForm.discount.$setDirty()' send-focus='.discount-container input'>\n<div class='sign'>%</div>\n</div>\n<div class='currency' data-hook='currency-switch' ng-class='{ &#39;active&#39; : $ctrl.type === &#39;fixed&#39;}' ng-click='$ctrl.setCurrencyActive()' send-focus='.discount-container input'>\n<div class='sign'>{{ symbol = ($ctrl.currency | currencySymbol) }}</div>\n</div>\n</div>\n</wix-input>\n</div>\n"),
a.put("modules/quotes/quote/quote.preload.html","<section class='section-header' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' ng-if='quote.IS_BUSINESS_MANAGER'>\n<span class='header-title'>\n<breadcrumbs ng-if='quote.isCreate' page='create'></breadcrumbs>\n<breadcrumbs ng-if='!quote.isCreate' page='edit' suffix='{{::quote.quote.quoteNumber}}'></breadcrumbs>\n<span class='crumb' ng-if='quote.isCreate'>{{ 'quote.title.new_quote' | translate }}</span>\n<span class='crumb' data-hook='quote-number-crumb' ng-if='!quote.isCreate'>{{ 'quote.title.edit_quote_prefix' | translate }} {{ ::quote.quote.quoteNumber }}</span>\n</span>\n<span class='pull-right' data-hook='quote-preview' ng-click='quote.preview()' ng-if='!quote.isCreate' wix-bi-args='{invoice_id:&#39;{{quote.quote.quoteId}}&#39;,origin:&#39;edit invoice&#39;}' wix-bi='INVOICE_PREVIEW'>\n<a class='preview-button'>\n<span class='styleguide-wix-icons-font wix-style-svg-font-icons-view'></span>\n{{ 'quote.title.preview' | translate }}\n</a>\n</span>\n</section>\n<section class='section-header quote' ng-if='!quote.IS_BUSINESS_MANAGER'>\n<span class='header-title'>\n<ul class='wix-breadcrumbs is-breadcrumbs-grey' data-hook='crumbs'>\n<li class='breadcrumb'>\n<a class='clickable-breadcrumb' ng-href='{{main.buildLink(&#39;quotes/list&#39;)}}'>{{ 'nav.quotes' | translate }}</a>\n</li>\n<li class='breadcrumb'>\n<span class='active' ng-if='quote.isCreate'>{{ 'quote.title.new_quote' | translate }}</span>\n<span class='active' ng-if='!quote.isCreate'>{{ 'quote.title.edit_quote_prefix' | translate }} {{ ::quote.quote.quoteNumber }}</span>\n</li>\n</ul>\n</span>\n<div class='quote-header'>\n<div class='header-title' ng-if='quote.isCreate'>{{ 'quote.title.new_quote' | translate }}</div>\n<div class='header-title' data-hook='quote-number-crumb' ng-if='!quote.isCreate'>{{ 'quote.title.edit_quote_prefix' | translate }} {{ ::quote.quote.quoteNumber }}</div>\n<span class='pull-right' data-hook='quote-preview' ng-click='quote.preview()' ng-if='!quote.isCreate' wix-bi-args='{invoice_id:&#39;{{quote.quote.quoteId}}&#39;,origin:&#39;edit invoice&#39;}' wix-bi='INVOICE_PREVIEW'>\n<a class='preview-button'>\n<span class='styleguide-wix-icons-font wix-style-svg-font-icons-view'></span>\n{{ 'quote.title.preview' | translate }}\n</a>\n</span>\n</div>\n</section>\n<form class='no-animate' data-hook='quote-form' name='quoteForm' ng-submit='quote.submitForm()' novalidate scroll-to-top>\n<section class='first-section section-main quote-form'>\n<h2 class='quote-number pull-right' data-hook='quote-number' ng-if='!quote.isCreate' wix-experiment-if='!specs.invoices.EditInvoiceNumber'>{{ 'quote.title.edit_quote_prefix' | translate | uppercase }} {{ quote.quote.quoteNumber }}</h2>\n<input data-hook='quote-id' type='hidden' value='{{quote.quote.quoteId}}'>\n<customer-section customer='quote.quote.customer' locked='quote.isCustomerLocked()' wix-experiment-if='!specs.invoices.EditInvoiceNumber'></customer-section>\n<div class='general-parameters' experiment-values='{&#39;true&#39;: &#39;edit-number-experiment&#39;}' wix-experiment-class='specs.invoices.EditInvoiceNumber'>\n<customer-section customer='quote.quote.customer' locked='quote.isCustomerLocked()' wix-experiment-if='specs.invoices.EditInvoiceNumber'></customer-section>\n<table experiment-values='{&#39;true&#39;: &#39;general-parameters-right&#39;}' wix-experiment-class='specs.invoices.EditInvoiceNumber'>\n<tr wix-experiment-if='specs.invoices.EditInvoiceNumber'>\n<td class='mandatory' data-hook='quote-number-label'>\n{{ 'quote.form.quote_number' | translate }}\n</td>\n<td>\n<quote-number id='quote.quote.quoteId' ng-model='quote.quote.quoteNumber' number='quote.quote.quoteNumber' on-change='quote.updateQuoteNumber(number)'></quote-number>\n</td>\n</tr>\n<tr>\n<td>\n{{ 'quote.form.issue_date' | translate }}\n</td>\n<td data-hook='quote-issue-date'>\n<div class='round' wix-experiment-if='!specs.invoices.NewCalendar'>\n<md-datepicker class='wix-datepicker' md-click-on-input='true' md-no-ink='true' ng-model='quote.quote.issueDate' type='date'></md-datepicker>\n</div>\n<wix-popover-calendar data-hook='quote-issue-date' date='quote.quote.issueDate' on-select='quote.quote.issueDate = $event.date' options='{ maxDate: quote.quote.dueDate, customClass: quote.addDayClass }' placement='right' show-control-buttons='false' wix-experiment-if='specs.invoices.NewCalendar'>\n<wix-input readonly value='{{quote.quote.issueDate | calendarDate }}'></wix-input>\n</wix-popover-calendar>\n</td>\n</tr>\n<tr>\n<td>\n{{ 'quote.form.due_date' | translate }}\n</td>\n<td data-hook='quote-due-date'>\n<div class='round' wix-experiment-if='!specs.invoices.NewCalendar'>\n<md-datepicker class='wix-datepicker' md-click-on-input='true' md-min-date='quote.quote.issueDate' md-no-ink='true' ng-model='quote.quote.dueDate' type='date'></md-datepicker>\n</div>\n<wix-popover-calendar data-hook='quote-due-date' date='quote.quote.dueDate' on-select='quote.quote.dueDate = $event.date' options='{minDate: quote.quote.issueDate, customClass: quote.addDayClass }' placement='right' show-control-buttons='false' wix-experiment-if='specs.invoices.NewCalendar'>\n<wix-input readonly value='{{quote.quote.dueDate | calendarDate }}'></wix-input>\n</wix-popover-calendar>\n</td>\n</tr>\n<tr experiment-values='{&#39;false&#39;: &#39;ng-hide&#39;, &#39;undefined&#39;: &#39;ng-hide&#39;}' wix-experiment-class='specs.crm.InvoicesFixedDiscount'>\n<td>\n{{ 'quote.form.discount' | translate }}\n</td>\n<td>\n<discount currency='quote.quote.currency' discount='quote.quote.discount' set-discount='quote.onSetDiscount(val)'></discount>\n</td>\n</tr>\n<tr wix-experiment-if='!specs.crm.InvoicesFixedDiscount'>\n<td>\n{{ 'quote.form.discount' | translate }} %\n</td>\n<td>\n<wix-input class='error' data-hook='quote-discount' error-message='{{&#39;quote.form.discount_error_message&#39; | translate}}' error-type='tooltip' max='100' min='0' ng-model='quote.quote.discountRate' type='number'></wix-input>\n</td>\n</tr>\n</table>\n</div>\n<div class='line-items'>\n<table class='no-animate'>\n<thead>\n<th class='mandatory product-input'>{{ 'quote.form.product' | translate }}</th>\n<th class='description-input'>{{ 'quote.form.description' | translate }}</th>\n<th class='price-input'>\n<span>{{ 'quote.form.price' | translate }}</span>\n<span>({{ quote.quote.currency | currencySymbol }})</span>\n<i append-to-body='true' class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;quote.price_tooltip&#39; | translate}}'></i>\n</th>\n<th class='quantity-input'>{{ 'quote.form.quantity' | translate }}</th>\n<th class='first-tax-input'>{{ 'quote.form.tax' | translate }}</th>\n<th class='second-tax-input'>{{ 'quote.form.tax' | translate }}</th>\n<th class='line-item-total'>{{ 'quote.form.line_total' | translate }}</th>\n<th></th>\n</thead>\n<tbody>\n<tr class='line-item no-animate' ng-repeat='lineItem in quote.quote.lineItems track by lineItem.lineItemId'>\n<td>\n<md-autocomplete class='no-animate' data-hook='line-item-name' error-message='{{&#39;quote.form.product_error_message&#39; | translate}}' error-type='tooltip' md-action-text='{{ &#39;quote.form.create_product&#39; | translate }}' md-action='quote.createNewProduct(lineItem)' md-autoselect='true' md-item-text='product.name' md-items='product in quote.searchProducts(lineItem.name)' md-min-length='0' md-search-text='lineItem.name' md-select-on-match='true' md-selected-item-change='quote.setCurrentProduct(lineItem, product)' ng-if='$index===0' placeholder='{{ &#39;quote.form.line_item_name.placeholder&#39; | translate }}' required='true'>\n<md-item-template>{{ product.name }}</md-item-template>\n<md-not-found>{{ 'quote.form.not_found' | translate }}</md-not-found>\n</md-autocomplete>\n<md-autocomplete class='no-animate' data-hook='line-item-name' md-action-text='{{ &#39;quote.form.create_product&#39; | translate }}' md-action='quote.createNewProduct(lineItem)' md-autoselect='true' md-item-text='product.name' md-items='product in quote.searchProducts(lineItem.name)' md-min-length='0' md-search-text='lineItem.name' md-select-on-match='true' md-selected-item-change='quote.setCurrentProduct(lineItem, product)' ng-if='$index!==0' placeholder='{{ &#39;quote.form.line_item_name.placeholder&#39; | translate }}'>\n<md-item-template>{{ product.name }}</md-item-template>\n<md-not-found>{{ 'quote.form.not_found' | translate }}</md-not-found>\n</md-autocomplete>\n</td>\n<td>\n<wix-input class='no-animate' data-hook='line-item-description' ng-model='lineItem.description' placeholder='{{ &#39;quote.form.line_item_desc.placeholder&#39; | translate }}' type='text'></wix-input>\n</td>\n<td>\n<wix-input class='no-animate' data-hook='line-item-price' money='{{quote.quote.currency}}' ng-model='lineItem.price' step='any' type='number'></wix-input>\n</td>\n<td>\n<wix-input class='no-animate' data-hook='line-item-quantity' ng-model='lineItem.quantity' step='any' type='number'></wix-input>\n</td>\n<td>\n<md-select class='line-item-tax no-animate' data-hook='line-item-firstTax' ng-model-options='{trackBy: &#39;$value.name + $value.rate&#39;}' ng-model='lineItem.taxes[0]'>\n<md-option class='no-animate' data-hook='line-item-firstTax-None' md-no-ink='true'>{{ 'quote.form.tax_none' | translate }}</md-option>\n<md-option class='no-animate' data-hook='line-item-firstTax-{{tax.name}}' md-no-ink='true' ng-repeat='tax in quote.taxesList' ng-value='tax'>{{ tax.name }}</md-option>\n<md-option class='create-tax no-animate' data-hook='create-tax-from-quote' delegate-click='md-backdrop' disabled='disabled' md-no-ink='true' ng-click='quote.createTax(lineItem, 0)' ng-value='{name: -1}'>{{ 'quote.form.create_tax' | translate }}</md-option>\n</md-select>\n</td>\n<td>\n<md-select class='line-item-tax no-animate' data-hook='line-item-secondTax' ng-model-options='{trackBy: &#39;$value.name + $value.rate&#39;}' ng-model='lineItem.taxes[1]'>\n<md-option class='no-animate' data-hook='line-item-secondTax-None' md-no-ink='true'>{{ 'quote.form.tax_none' | translate }}</md-option>\n<md-option class='no-animate' data-hook='line-item-secondTax-{{tax.name}}' md-no-ink='true' ng-repeat='tax in quote.taxesList' ng-value='tax'>{{ tax.name }}</md-option>\n<md-option class='create-tax no-animate' data-hook='create-tax-from-quote' delegate-click='md-backdrop' disabled='disabled' md-no-ink='true' ng-click='quote.createTax(lineItem, 1)' ng-value='{name: -1}'>{{ 'quote.form.create_tax' | translate }}</md-option>\n</md-select>\n</td>\n<td class='line-item-total'>\n<span data-hook='line-item-total'>{{ quote.getLineItemTotal($index) | money }}</span>\n</td>\n<td>\n<a class='line-item-remove' data-hook='line-item-remove' href='' ng-click='quote.removeLine($index)' ng-if='quote.quote.lineItems.length &gt; 1'>\n<span class='wix-style-svg-font-icons-trash-can' placement='top' wix-tooltip='{{&#39;quote.form.tooltip.delete_line&#39; | translate}}'></span>\n</a>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n<a class='add-line' data-hook='quote-add-line' ng-click='quote.addLine()'>{{ 'quote.action.add_line' | translate }}</a>\n<div class='calc'>\n<table class='pull-right'>\n<tr class='calc-pre' ng-show='quote.showSubtotal()'>\n<td class='label'>{{ 'quote.form.sub_total' | translate }}:</td>\n<td class='value' data-hook='quote-subtotal'>{{ quote.getSubtotal() | money }}</td>\n</tr>\n<tr class='calc-pre' ng-show='quote.showDiscount()' wix-experiment-if='!specs.crm.InvoicesFixedDiscount'>\n<td class='label' data-hook='discount-label'>{{ 'quote.form.discount' | translate }} ({{quote.quote.discountRate}}%):</td>\n<td class='value' data-hook='discount-amount'>-{{ quote.discountAmount() | money }}</td>\n</tr>\n<tr class='calc-pre' ng-show='quote.showDiscount()' wix-experiment-if='specs.crm.InvoicesFixedDiscount'>\n<td class='label' data-hook='discount-label' ng-if='quote.showPercentageDiscount()'>{{ 'quote.form.discount' | translate }} ({{quote.quote.discount.rate}}%):</td>\n<td class='label' data-hook='discount-label' ng-if='quote.showFixedDiscount()'>{{ 'quote.form.discount' | translate }}:</td>\n<td class='value' data-hook='discount-amount'>-{{ quote.discountAmount() | money }}</td>\n</tr>\n<tr class='calc-pre' ng-repeat='tax in quote.getTaxes()'>\n<td class='label taxes'>\n<span class='tax-name' data-hook='tax-name'>{{tax.name}}</span>\n<span>(</span><span class='tax-rate' data-hook='tax-rate'>{{tax.rate}}</span><span>%):</span>\n</td>\n<td class='value' data-hook='quote-taxes'>{{ tax.amount | money }}</td>\n</tr>\n<tr ng-show='quote.showSubtotal()'>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr>\n<td class='label'>{{ 'quote.form.quote_total' | translate }}:</td>\n<td class='value' data-hook='quote-total'>{{ quote.getTotal() | money }}</td>\n</tr>\n<tr>\n<td class='label'>{{ 'quote.form.amount_paid' | translate }}:</td>\n<td class='value' data-hook='quote-amount-paid'>{{ quote.quote.getAmountPaid() | money }}</td>\n</tr>\n<tr>\n<td colspan='2'>\n<hr class='separator'>\n</td>\n</tr>\n<tr>\n<td class='label'>{{ 'quote.form.balance' | translate }}:</td>\n<td class='value' data-hook='quote-balance'>{{ quote.getBalance() | money }}</td>\n</tr>\n</table>\n</div>\n<div class='comments clearfix'>\n<div class='notes'>\n<div>{{ 'quote.form.notes.title' | translate }}</div>\n<wix-textarea data-hook='quote-general-notes' ng-model='quote.quote.notes' placeholder='{{ &#39;quote.form.notes.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n<div class='legal'>\n<div>{{ 'quote.form.legal_terms.title' | translate }}</div>\n<wix-textarea data-hook='quote-legal-notes' ng-model='quote.quote.legalTerms' placeholder='{{ &#39;quote.form.legal_terms.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n</div>\n<div class='mandatory'>{{ 'quote.form.mandatory_field' | translate }}</div>\n</section>\n<div class='legal-note-in-quote legal-note'>\n{{ 'on-boarding.basic-info.legal' | translate }}\n</div>\n<section class='section-footer'>\n<a class='wix-button is-button-outline is-button-large' data-hook='quote-cancel' ng-href='{{main.buildLink(&#39;quotes/list&#39;)}}'>{{ 'quote.action.cancel' | translate }}</a>\n<button class='wix-button' data-hook='prevent-submit-on-enter' ng-disabled='true' style='visibility:hidden;display:none' type='submit'></button>\n<button class='wix-button is-button-large pull-right' data-hook='quote-send' ng-click='quote.setAction(quote.saveAndSend)' type='submit'>{{ 'quote.action.send' | translate }}</button>\n<button class='wix-button is-button-large pull-right' data-hook='quote-save' ng-click='quote.setAction(quote.save)' type='submit' wix-tooltip='{{&#39;quote.action.send_tooltip&#39; | translate}}'>\n{{ 'quote.action.save' | translate }}\n</button>\n</section>\n<div class='safari-bottom'></div>\n</form>\n"),a.put("modules/quotes/quotes-empty-experience/quotes-empty-experience.desktop.preload.html","<div class='quote-empty-experience welcome' data-hook='quote-empty-experience' ng-hide='quotes.listQuotes.quotes.length'>\n<div class='image'></div>\n<div class='title'>\n{{ 'quotes.welcome.title' | translate }}\n</div>\n<div class='description'>\n{{ 'quotes.welcome.description1' | translate }}\n</div>\n<div class='clearfix'>\n{{ 'quotes.welcome.description2' | translate }}\n</div>\n<a class='wix-button is-button-large add-button' data-hook='empty-experience-create-invoice-button' ng-href='{{$ctrl.createUrl}}' type='button'>{{ 'quotes.action.new_quote' | translate }}</a>\n</div>\n"),a.put("modules/quotes/quotes-empty-experience/quotes-empty-experience.mobile.preload.html","<div class='quote-empty-experience welcome' data-hook='quote-empty-experience' ng-hide='quotes.listQuotes.quotes.length'>\n<div class='head'>\n<div class='title'>\nWelcome to Wix Invoices\n</div>\n<div class='description'>\nSend, Track & get paid all in one place.\n</div>\n<div class='quote-image'></div>\n</div>\n<div class='bottom'>\n<div class='description-below-image'>\nYou don't have any existing invoices <br>\nCurrently it is only possible to manage <br>\nexisting invoices on mobile devices\n</div>\n<div class='description-lower'>\nTo create your first invoice open invoice app <br>\non your <b> wix.com desktop </b>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/quotes-empty-experience/quotes-empty-experience.preload.html","<adaptive-view class='adaptive-view-quote-empty-experience' desktop-view='modules/quotes/quotes-empty-experience/quotes-empty-experience.desktop.preload.html' mobile-view='modules/quotes/quotes-empty-experience/quotes-empty-experience.mobile.preload.html'></adaptive-view>\n"),a.put("modules/quotes/quotes-summaries/quotes-summaries-filter.preload.html","<label data-hook='date-range-label' for='quotes-summaries-filter-date-range-select'>{{ 'quotes.summaries.date-range-label' | translate }}</label>\n<md-select class='quotes-summaries-date-range-select no-animate' data-hook='date-range-select' id='quotes-summaries-filter-date-range-select' md-no-ink='true' md-on-close='$ctrl.update()' ng-model='$ctrl.dateRange'>\n<md-option class='no-animate' md-no-ink='true' value='last30Days'>{{ 'quotes.summaries.date-range-last-30-days' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='thisMonth'>{{ 'quotes.summaries.date-range-this-month' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='lastMonth'>{{ 'quotes.summaries.date-range-last-month' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='thisQuarter'>{{ 'quotes.summaries.date-range-this-quarter' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='lastQuarter'>{{ 'quotes.summaries.date-range-last-quarter' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='thisYear'>{{ 'quotes.summaries.date-range-this-year' | translate }}</md-option>\n<md-option class='no-animate' md-no-ink='true' value='lastYear'>{{ 'quotes.summaries.date-range-last-year' | translate }}</md-option>\n</md-select>\n<div ng-if='$ctrl.currencies &amp;&amp; $ctrl.currencies.length &gt; 1'>\n<label data-hook='currencies-label' for='quotes-summaries-filter-currencies-select'>{{ 'quotes.summaries.currencies-label' | translate }}</label>\n<md-select class='no-animate' data-hook='currencies-select' id='quotes-summaries-filter-currencies-select' md-no-ink='true' md-on-close='$ctrl.update()' ng-model='$ctrl.selectedCurrency'>\n<md-option class='no-animate' md-no-ink='true' ng-repeat='opt in $ctrl.currencies' ng-value='opt'>\n{{ opt }}\n</md-option>\n</md-select>\n</div>\n"),a.put("modules/quotes/quotes-summaries/quotes-summaries.preload.html","<div ng-class='{&#39;large-sum&#39; : paidTextOverflow || pendingTextOverflow || overdueTextOverflow}'>\n<div class='summary paid' data-hook='summary-paid'>\n<div class='summary-text' tooltip-enable='{{paidTextOverflow}}' wix-tooltip='{{paidDisplay}}'>\n<div class='sum' data-hook='sum' is-overflow='paidTextOverflow'>\n{{paidDisplay = ($ctrl.paid() | money : $ctrl.currency)}}\n</div>\n<div class='description' data-hook='description'>\n<div class='bullet'></div>\n{{ 'quotes.totals.paid.label' | translate }}\n</div>\n</div>\n</div>\n<div class='vertical'></div>\n<div class='summary pending' data-hook='summary-pending'>\n<div class='summary-text' tooltip-enable='{{pendingTextOverflow}}' wix-tooltip='{{pendingDisplay}}'>\n<div class='sum' data-hook='sum' is-overflow='pendingTextOverflow'>\n{{pendingDisplay = ($ctrl.sent() | money : $ctrl.currency)}}\n</div>\n<div class='description' data-hook='description'>\n<div class='bullet'></div>\n{{ 'quotes.totals.pending.label' | translate }}\n</div>\n</div>\n</div>\n<div class='vertical'></div>\n<div class='summary overdue' data-hook='summary-overdue'>\n<div class='summary-text' tooltip-enable='{{overdueTextOverflow}}' wix-tooltip='{{overdueDisplay}}'>\n<div class='sum' data-hook='sum' is-overflow='overdueTextOverflow'>\n{{overdueDisplay = ($ctrl.overdue() | money : $ctrl.currency)}}\n</div>\n<div class='description' data-hook='description'>\n<div class='bullet'></div>\n{{ 'quotes.totals.overdue.label' | translate }}\n</div>\n</div>\n</div>\n</div>\n"),a.put("modules/quotes/reports/components/report-content-header/report-content-header.preload.html","<span class='summary-report-header-label' data-hook='report-header-label'>{{$ctrl.reportTitle}}</span>\n<div class='report-content-header-details'>\n<p class='company-name-label' data-hook='report-company-name'>{{$ctrl.companyName}}</p>\n<p class='report-date'>\n<span data-hook='report-from-date'>{{$ctrl.summaryParams.begin | date : 'mediumDate'}}</span>\n<span data-hook='report-to-label'>{{'reports.to-date' | translate}}</span>\n<span data-hook='report-to-date'>{{$ctrl.summaryParams.end | date : 'mediumDate'}}</span>\n</p>\n</div>\n"),a.put("modules/quotes/reports/components/report-header/report-actions/report-actions.preload.html","<div class='buttons'>\n<button class='wix-button is-button-outline export-button' data-hook='report-export' ng-click='$ctrl.export()' ng-disabled='$ctrl.emptyExperience' wix-bi-args='{name: &#39;{{$ctrl.biName}}&#39;, basis:&#39;{{$ctrl.reportParams.revenue}}&#39;, file_type:&#39;csv&#39;}' wix-bi='EXPORT_REPORT'>\n{{ 'reports.report-export' | translate}}\n</button>\n<button class='wix-button is-button-outline' data-hook='report-print' ng-click='$ctrl.print()' ng-disabled='$ctrl.emptyExperience'>{{ 'reports.report-print' | translate}}</button>\n</div>\n"),a.put("modules/quotes/reports/components/report-header/report-header.preload.html","<section class='section-header' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' ng-if='$ctrl.IS_BUSINESS_MANAGER'>\n<span class='header-title' data-hook='crumbs'>\n<breadcrumbs page='{{$ctrl.breadcrumb}}'></breadcrumbs>\n<span class='crumb'>{{ $ctrl.reportTitle }}</span>\n</span>\n<div class='pull-right'>\n<ng-transclude></ng-transclude>\n</div>\n</section>\n<section class='section-header' ng-if='!$ctrl.IS_BUSINESS_MANAGER'>\n<ul class='wix-breadcrumbs is-breadcrumbs-grey' data-hook='crumbs'>\n<li class='breadcrumb'>\n<a class='clickable-breadcrumb' data-hook='nav-root-label' ng-href='{{$ctrl.quotesRoute.buildLink(&#39;reports&#39;)}}'>{{'nav.reports' | translate}}</a>\n</li>\n<li class='breadcrumb'>\n<span class='active' data-hook='nav-report-label'>{{ $ctrl.navLabel }}</span>\n</li>\n</ul>\n<div class='header-title' data-hook='summary-report-title'>{{ $ctrl.reportTitle }}</div>\n<div class='pull-right'>\n<ng-transclude></ng-transclude>\n</div>\n</section>\n"),a.put("modules/quotes/reports/components/summary-report-content/summary-report-content.preload.html","<section class='section-main summary-report-content' data-hook='summary-report-content' ng-if='!$ctrl.isLoading &amp;&amp; !$ctrl.emptyExperience'>\n<ng-transclude></ng-transclude>\n</section>\n<section class='section-main summary-report-empty-experience' data-hook='empty-experience' ng-if='!$ctrl.isLoading &amp;&amp; $ctrl.emptyExperience'>\n<summary-report-empty-experience description='$ctrl.emptyExperienceDescription'></summary-report-empty-experience>\n</section>\n<div class='report-loader no-animate' data-hook='summary-report-loader' ng-if='$ctrl.isLoading'></div>\n"),a.put("modules/quotes/reports/components/summary-report-params/summary-report-params.preload.html","<div class='container'>\n<div class='item'>\n<span class='item report-label' data-hook='date-label'>{{ 'reports.tax-summary.date-label' | translate }}</span>\n<wix-popover-calendar data-hook='from-date' date='$ctrl.fromDate' on-select='$ctrl.fromDate = $event.date' options='{maxDate: $ctrl.toDate}' show-control-buttons='false'>\n<wix-input date-formatter='mediumDate' ng-model='$ctrl.fromDate' readonly></wix-input>\n</wix-popover-calendar>\n<wix-popover-calendar data-hook='to-date' date='$ctrl.toDate' on-select='$ctrl.toDate = $event.date' options='{minDate: $ctrl.fromDate}' show-control-buttons='false'>\n<wix-input date-formatter='mediumDate' ng-model='$ctrl.toDate' readonly></wix-input>\n</wix-popover-calendar>\n</div>\n<div class='item revenue-type'>\n<span class='report-label' data-hook='revenue-label'>{{ 'reports.tax-summary.revenue-label' | translate }}:</span>\n<md-select data-hook='revenue-dropdown' ng-model='$ctrl.revenueBasis'>\n<md-option class='no-animate' md-no-ink='true' value='cash'>\n{{ 'reports.tax-summary.cash-basis' | translate }}\n</md-option>\n<md-option class='no-animate' md-no-ink='true' value='accrual'>\n{{ 'reports.tax-summary.accrual-basis' | translate }}\n</md-option>\n</md-select>\n<i class='quotes-svg-font-icons-info' data-hook='revenue-tooltip' max-width='238px' placement='bottom' wix-tooltip='{{ &#39;reports.summary-report.revenue-tooltip&#39; | translate }}'></i>\n</div>\n<div class='item' ng-show='$ctrl.currencies.length &gt; 1'>\n<span class='report-label' data-hook='currency-label'>{{ 'reports.tax-summary.currency-label' | translate }}:</span>\n<md-select data-hook='currency-dropdown' md-container-class='summary-report-currency-select' ng-model='$ctrl.currency'>\n<md-option class='no-animate' md-no-ink='true' ng-repeat='opt in $ctrl.currencies' ng-value='opt'>\n{{ opt }}\n</md-option>\n</md-select>\n</div>\n<button class='item wix-button' data-hook='run-button' ng-click='$ctrl.runReport()'>\n{{ 'reports.tax-summary.run-report' | translate }}\n</button>\n</div>\n"),a.put("modules/quotes/reports/reports-page/reports-page.preload.html","<section class='section-header' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' ng-if='$ctrl.IS_BUSINESS_MANAGER'>\n<span class='header-title' data-hook='title'>\n<breadcrumbs page='reports'></breadcrumbs>\n<span class='crumb'>{{'nav.reports' | translate}}</span>\n</span>\n</section>\n<section class='section-header' ng-if='!$ctrl.IS_BUSINESS_MANAGER'>\n<span class='header-title' data-hook='title'>\n<span class='crumb'>{{'nav.reports' | translate}}</span>\n</span>\n</section>\n<section class='section first-section last-section'>\n<div class='card' data-hook='tax-summary-card'>\n<div class='card-content'>\n<div class='card-title' data-hook='card-title'>{{'reports.tax-summary-card-title' | translate}}</div>\n<div class='card-text' data-hook='card-content'>{{'reports.tax-summary-card-content' | translate}}</div>\n<a class='wix-button create-report' data-hook='card-create' ng-href='{{$ctrl.quotesRoute.buildLink(&#39;reports/taxsummary&#39;)}}?referrer=create report button'>\n{{'reports.summary-card-create' | translate}}\n</a>\n</div>\n<div class='card-icon tax-summary-card'></div>\n</div>\n<div class='card' data-hook='revenue-summary-card' wix-experiment-if='!specs.invoices.hideRevenueReport'>\n<div class='card-content'>\n<div class='card-title' data-hook='card-title'>{{'reports.revenue-summary-card-title' | translate}}</div>\n<div class='card-text' data-hook='card-content'>{{'reports.revenue-summary-card-content' | translate}}</div>\n<a class='wix-button create-report' data-hook='card-create' ng-href='{{$ctrl.quotesRoute.buildLink(&#39;reports/revenuesummary&#39;)}}'>{{'reports.summary-card-create' | translate}}</a>\n</div>\n<div class='card-icon revenue-summary-card'></div>\n</div>\n</section>\n"),a.put("modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-list/accrual-revenue-list/accrual-revenue-list.preload.html","<table class='wix-table revenues' data-hook='revenue-list'>\n<thead>\n<tr class='sort-header' data-hook='revenue-header-section'>\n<th class='quote-number'>\n<quotes-sort data-hook='quote-number-sort' is-active='$ctrl.sortBy === &#39;quoteNumber&#39;' label='{{ &#39;reports.revenue-summary.quoteNumber&#39; | translate}} #' on-sort-change='$ctrl.onChangeSort(&#39;quoteNumber&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='customer'>\n<quotes-sort data-hook='customer-sort' is-active='$ctrl.sortBy === &#39;customerName&#39;' label='{{ &#39;reports.revenue-summary.customer&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;customerName&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='sent'>\n<quotes-sort data-hook='sent-sort' is-active='$ctrl.sortBy === &#39;sentDate&#39;' label='{{ &#39;reports.revenue-summary.sent&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;sentDate&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='align-right total-no-tax'>\n<quotes-sort data-hook='total-no-tax-sort' is-active='$ctrl.sortBy === &#39;total.withoutTax&#39;' label='{{ &#39;reports.revenue-summary.total-no-tax&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;total.withoutTax&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='align-right total'>\n<quotes-sort data-hook='total-sort' is-active='$ctrl.sortBy === &#39;total.withTax&#39;' label='{{ &#39;reports.revenue-summary.total-amount&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;total.withTax&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n</tr>\n</thead>\n<tfoot>\n<tr ng-repeat='(currency, total) in $ctrl.revenueSummary.totalByCurrency'>\n<td colspan='3'>\n<span class='currency-total' data-hook='revenue-total-label'>{{ 'reports.revenue-summary.total' | translate }}</span>\n<span class='currency-total' data-hook='revenue-currency-label'>{{ currency }}</span>\n</td>\n<td class='currency-total align-right total-no-tax' data-hook='revenue-without-tax'>\n{{ total.withoutTax | money: currency }}\n</td>\n<td class='currency-total align-right total' data-hook='revenue-with-tax'>\n{{ total.withTax | money: currency }}\n</td>\n</tr>\n</tfoot>\n<tbody data-hook='revenue-values-container'>\n<tr class='revenue-values' data-hook='revenue-values' ng-repeat='revenue in $ctrl.revenueSummary.revenues | orderBy : $ctrl.sortBy : $ctrl.direction === &#39;desc&#39;'>\n<td class='quote-number' data-hook='quote-number-value'>\n{{revenue.quoteNumber}}\n</td>\n<td class='customer' data-hook='customer-value'>\n{{revenue.customerName}}\n</td>\n<td class='sent' data-hook='sent-value'>\n{{revenue.sentDate | date: 'mediumDate' }}\n</td>\n<td class='align-right total-no-tax' data-hook='total-no-tax-value'>\n{{revenue.total.withoutTax | money: revenue.currency}}\n</td>\n<td class='align-right total' data-hook='total-value'>\n{{revenue.total.withTax | money: revenue.currency}}\n</td>\n</tr>\n</tbody>\n</table>\n"),
a.put("modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-list/cash-revenue-list/cash-revenue-list.preload.html","<table class='wix-table revenues' data-hook='revenue-list'>\n<thead>\n<tr class='sort-header' data-hook='revenue-header-section'>\n<th class='quote-number'>\n<quotes-sort data-hook='quote-number-sort' is-active='$ctrl.sortBy === &#39;quoteNumber&#39;' label='{{ &#39;reports.revenue-summary.quoteNumber&#39; | translate}} #' on-sort-change='$ctrl.onChangeSort(&#39;quoteNumber&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='customer'>\n<quotes-sort data-hook='customer-sort' is-active='$ctrl.sortBy === &#39;customerName&#39;' label='{{ &#39;reports.revenue-summary.customer&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;customerName&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='payment-method'>\n<quotes-sort data-hook='payment-method-sort' is-active='$ctrl.sortBy === &#39;payment.method&#39;' label='{{ &#39;reports.revenue-summary.payment-method&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;payment.method&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='payment-date'>\n<quotes-sort data-hook='payment-date-sort' is-active='$ctrl.sortBy === &#39;payment.date&#39;' label='{{ &#39;reports.revenue-summary.payment-date&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;payment.date&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='align-right total-no-tax'>\n<quotes-sort data-hook='total-no-tax-sort' is-active='$ctrl.sortBy === &#39;total.withoutTax&#39;' label='{{ &#39;reports.revenue-summary.total-paid-no-tax&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;total.withoutTax&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n<th class='align-right total'>\n<quotes-sort data-hook='total-sort' is-active='$ctrl.sortBy === &#39;total.withTax&#39;' label='{{ &#39;reports.revenue-summary.total-paid&#39; | translate}}' on-sort-change='$ctrl.onChangeSort(&#39;total.withTax&#39;, dir)' sort-order='$ctrl.direction'></quotes-sort>\n</th>\n</tr>\n</thead>\n<tfoot>\n<tr ng-repeat='(currency, total) in $ctrl.revenueSummary.totalByCurrency'>\n<td colspan='4'>\n<span class='currency-total' data-hook='revenue-total-label'>{{ 'reports.revenue-summary.total' | translate }}</span>\n<span class='currency-total' data-hook='revenue-currency-label'>{{ currency }}</span>\n</td>\n<td class='currency-total align-right total-no-tax' data-hook='revenue-without-tax'>\n{{ total.withoutTax | money: currency }}\n</td>\n<td class='currency-total align-right total' data-hook='revenue-with-tax'>\n{{ total.withTax | money: currency }}\n</td>\n</tr>\n</tfoot>\n<tbody data-hook='revenue-values-container'>\n<tr class='revenue-values' data-hook='revenue-values' ng-repeat='revenue in $ctrl.revenueSummary.revenues | orderBy : $ctrl.sortBy : $ctrl.direction === &#39;desc&#39;'>\n<td class='quote-number' data-hook='quote-number-value'>\n{{revenue.quoteNumber}}\n</td>\n<td class='customer' data-hook='customer-value'>\n{{revenue.customerName}}\n</td>\n<td class='payment-method' data-hook='payment-method-value'>\n{{  $ctrl.getPaymentMethodLabel(revenue.payment.method) }}\n</td>\n<td class='payment-date' data-hook='payment-date-value'>\n{{revenue.payment.date | date : 'mediumDate'}}\n</td>\n<td class='align-right total-no-tax' data-hook='total-no-tax-value'>\n{{revenue.total.withoutTax | money: revenue.currency}}\n</td>\n<td class='align-right total' data-hook='total-value'>\n{{revenue.total.withTax | money: revenue.currency}}\n</td>\n</tr>\n</tbody>\n</table>\n"),a.put("modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-content/revenue-summary-report-content.preload.html","<section class='report-container' data-hook='revenue-summary-content'>\n<report-content-header company-name='$ctrl.companyName' report-title='{{ &#39;reports.revenue-summary-report-title&#39; | translate }}' summary-params='$ctrl.summaryParams'></report-content-header>\n<div class='revenue-list' ng-switch='$ctrl.summaryParams.revenue'>\n<accrual-revenue-list data-hook='accrual-list' ng-switch-when='accrual' revenue-summary='$ctrl.revenueSummary'></accrual-revenue-list>\n<cash-revenue-list data-hook='cash-list' ng-switch-when='cash' revenue-summary='$ctrl.revenueSummary'></cash-revenue-list>\n</div>\n</section>\n"),a.put("modules/quotes/reports/revenue-summary-report-page/revenue-summary-report-page.preload.html","<report-header breadcrumb='revenuesummary' data-hook='revenue-summary-report-header' nav-label='{{ &#39;nav.revenuesummary&#39; | translate }}' report-title='{{ &#39;reports.revenue-summary-report-title&#39; | translate }}'>\n<report-actions bi-name='revenue' data-hook='summary-report-actions' download-path='revenue-summary' empty-experience='$ctrl.isEmptyExperience()' on-export-click='$ctrl.onExport()' report-params='$ctrl.summaryParams'></report-actions>\n</report-header>\n<section class='section-main first-section revenue-summary-report-params' data-hook='revenue-summary-report-params'>\n<summary-report-params on-run-report='$ctrl.onRunReport(params)'></summary-report-params>\n</section>\n<section class='section-main revenue-summary-content last-section'>\n<summary-report-content data-hook='revenue-summary-report-content-wrapper' empty-experience-description='{{ $ctrl.getEmptyExperienceDescription() }}' empty-experience='$ctrl.isEmptyExperience()' is-loading='$ctrl.isLoading'>\n<revenue-summary-report-content company-name='$ctrl.settings.companyName' data-hook='revenue-summary-report-content' revenue-summary='$ctrl.summary' summary-params='$ctrl.summaryParams'></revenue-summary-report-content>\n</summary-report-content>\n</section>\n"),a.put("modules/quotes/reports/tax-summary-report-page/tax-summary-report-content/tax-summary-report-content.preload.html","<section class='report-container' data-hook='tax-summary-content'>\n<report-content-header company-name='$ctrl.companyName' report-title='{{ &#39;reports.tax-summary-report-title&#39; | translate }}' summary-params='$ctrl.summaryParams'></report-content-header>\n<div class='gross-amount'>\n<span data-hook='tax-summary-gross-amount-label' ng-if='$ctrl.isRevenueCash()'>\n{{'reports.tax-summary.gross-collected' | translate}}\n</span>\n<span data-hook='tax-summary-gross-amount-label' ng-if='!$ctrl.isRevenueCash()'>\n{{'reports.tax-summary.gross-invoiced' | translate}}\n</span>\n<span>:</span>\n<span data-hook='tax-summary-gross-amount-value'>\n{{$ctrl.taxSummary.taxableTotal | money: $ctrl.summaryParams.currency}}\n</span>\n<i class='quotes-svg-font-icons-info' data-hook='gross-amount-tooltip' max-width='274px' ng-if='$ctrl.isRevenueCash()' placement='top' wix-tooltip='{{&#39;reports.tax-summary.gross-collected-tooltip&#39; | translate}}'></i>\n<i class='quotes-svg-font-icons-info' data-hook='gross-amount-tooltip' max-width='274px' ng-if='!$ctrl.isRevenueCash()' placement='top' wix-tooltip='{{&#39;reports.tax-summary.gross-invoiced-tooltip&#39; | translate}}'></i>\n</div>\n<tax-summary-user-tax currency='$ctrl.summaryParams.currency' ng-repeat='tax in $ctrl.taxSummary.taxes' tax='tax'></tax-summary-user-tax>\n<div class='disclaimer' data-hook='tax-summary-disclaimer'>\n{{'reports.tax-summary.disclaimer' | translate}}\n</div>\n</section>\n"),a.put("modules/quotes/reports/tax-summary-report-page/tax-summary-report-content/tax-summary-user-tax/tax-summary-user-tax.preload.html","<div class='tax-table-container'>\n<table class='tax-table'>\n<thead class='tax-table-header'>\n<tr>\n<th class='tax-primary-label bold text-left' data-hook='tax-summary-tax-label'>\n<div class='tax-label tax-label-name'>{{$ctrl.tax.name}}</div>\n<div class='tax-label'>({{$ctrl.tax.rate}}%)</div>\n</th>\n<th class='tax-secondary-label text-right' data-hook='tax-summary-taxable'>{{'reports.tax-summary.taxable' | translate}}</th>\n<th class='tax-secondary-label taxes text-right' data-hook='tax-summary-taxed'>{{'reports.tax-summary.taxed' | translate}}</th>\n</tr>\n</thead>\n<tbody class='tax-totals-container'>\n<tr>\n<td class='bold text-left'>\n<span data-hook='tax-summary-tax-total'>{{'reports.tax-summary.tax-total' | translate}}</span>\n<span data-hook='tax-summary-tax-currency'>{{$ctrl.currency}}</span>\n</td>\n<td class='text-right' data-hook='tax-summary-tax-taxable'>{{$ctrl.tax.taxable | money : $ctrl.currency }}</td>\n<td class='bold text-right' data-hook='tax-summary-tax-taxed'>{{$ctrl.tax.taxed | money : $ctrl.currency }}</td>\n</tr>\n</tbody>\n</table>\n</div>\n<div class='separator'></div>\n"),a.put("modules/quotes/reports/tax-summary-report-page/tax-summary-report-page.preload.html","<report-header breadcrumb='taxsummary' data-hook='tax-summary-report-header' nav-label='{{ &#39;nav.taxsummary&#39; | translate }}' report-title='{{ &#39;reports.tax-summary-report-title&#39; | translate }}'>\n<report-actions bi-name='tax' data-hook='summary-report-actions' download-path='tax-summary' empty-experience='$ctrl.isEmptyExperience()' on-export-click='$ctrl.onExport()' report-params='$ctrl.summaryParams'></report-actions>\n</report-header>\n<section class='section-main first-section tax-summary-report-params' data-hook='tax-summary-report-params'>\n<summary-report-params currencies='$ctrl.settings.currencies' on-run-report='$ctrl.onRunReport(params)' user-currency='$ctrl.settings.userCurrency'></summary-report-params>\n</section>\n<section class='section-main tax-summary-content last-section'>\n<summary-report-content data-hook='tax-summary-report-content-wrapper' empty-experience-description='{{ &#39;reports.tax-summary-report-empty-experience.description&#39; | translate }}' empty-experience='$ctrl.isEmptyExperience()' is-loading='$ctrl.isLoading'>\n<tax-summary-report-content company-name='$ctrl.settings.companyName' data-hook='tax-summary-report-content' summary-params='$ctrl.summaryParams' tax-summary='$ctrl.summary'></tax-summary-report-content>\n</summary-report-content>\n</section>\n"),a.put("modules/quotes/settings/settings.preload.html","<div>\n<section class='section-header' experiment-values='{&#39;true&#39;: &#39;breadcrumbs-experiment&#39;}' fixed-offset-parent='.content-wrapper' fixed-offset='{&quot;transform&quot;: &quot;translateY($y)&quot;}' wix-experiment-class='specs.wos.businessManagerPhase4'>\n<span class='header-title pull-left' data-hook='crumbs'>\n<breadcrumbs page='settings' wix-experiment-if='!specs.wos.businessManagerPhase4'></breadcrumbs>\n<span class='crumb' href=''>{{ 'invoices_settings.title' | translate }}</span>\n</span>\n</section>\n<div class='settings-sections' ng-controller='PriceQuotesSettingsController as priceQuotesSettings'>\n<section class='section-main first-section business-info support-wix-input' data-hook='business-info' experiment-values='{&#39;true&#39;: &#39;breadcrumbs-experiment&#39;}' wix-experiment-class='specs.wos.businessManagerPhase4'>\n<div class='business-info-header' id='business-info-header'>\n<div class='image'></div>\n<div>\n<div class='section-title'>{{ 'settings.business_info.title' | translate }}</div>\n<div class='section-subtitle'>{{ 'invoices_settings.business_info.subtitle' | translate }}</div>\n<div class='business-settings-link' data-hook='business-settings-link' wix-translate-compile='settings.business_settings.link'></div>\n</div>\n</div>\n</section>\n<section class='section-main default-notes' data-hook='price-quotes-notes' wix-experiment-if='specs.wos.DisplayPriceQuotes'>\n<div load-pane='priceQuotesSettings.isLoading'></div>\n<div class='default-notes-header' id='default-notes-header'>\n<div class='image'></div>\n<div>\n<div class='section-title'>{{ 'invoices_settings.price_quote_notes.title' | translate }}</div>\n<div class='section-subtitle'>{{ 'invoices_settings.price_quote_notes.subtitle' | translate }}</div>\n</div>\n</div>\n<div class='notes-inputs'>\n<div class='notes'>\n<div>{{ 'settings.default_notes.default_notes_field' | translate }}</div>\n<wix-textarea data-hook='price-quote-settings-notes' ng-blur='priceQuotesSettings.savePriceQuotesSettings()' ng-model='priceQuotesSettings.priceQuoteSettings.notes' placeholder='{{ &#39;quote.form.notes.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n<div class='legal'>\n<div>{{ 'settings.default_notes.default_legal_terms_field' | translate }}</div>\n<wix-textarea data-hook='price-quote-settings-legal' ng-blur='priceQuotesSettings.savePriceQuotesSettings()' ng-model='priceQuotesSettings.priceQuoteSettings.legalTerms' placeholder='{{ &#39;quote.form.legal_terms.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n</div>\n</section>\n<section class='section-main default-notes' ng-controller='DefaultNotesSettingsController as defaultNotesSettings'>\n<div load-pane='defaultNotesSettings.isLoading'></div>\n<div class='default-notes-header' id='default-notes-header'>\n<div class='image'></div>\n<div>\n<div class='section-title'>{{ 'invoices_settings.default_notes.title' | translate }}</div>\n<div class='section-subtitle'>{{ 'settings.default_notes.subtitle' | translate }}</div>\n</div>\n</div>\n<div class='notes-inputs'>\n<div class='notes'>\n<div>{{ 'settings.default_notes.default_notes_field' | translate }}</div>\n<wix-textarea data-hook='settings-notes' ng-blur='defaultNotesSettings.saveNotes()' ng-model='defaultNotesSettings.settings.defaultNotes' placeholder='{{ &#39;quote.form.notes.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n<div class='legal'>\n<div>{{ 'settings.default_notes.default_legal_terms_field' | translate }}</div>\n<wix-textarea data-hook='settings-legal' ng-blur='defaultNotesSettings.saveLegal()' ng-model='defaultNotesSettings.settings.defaultLegalTerms' placeholder='{{ &#39;quote.form.legal_terms.placeholder&#39; | translate }}'></wix-textarea>\n</div>\n</div>\n</section>\n<section class='section-main section-taxes last-section' ng-controller='TaxesListController as taxes'>\n<div class='tax-header' id='tax-header'>\n<div>\n<div class='section-title'>{{ 'invoices_settings.taxes.title' | translate }}</div>\n<div class='section-subtitle'>{{ 'invoices_settings.taxes.subtitle' | translate }}</div>\n</div>\n<a class='wix-button is-button-large add-button pull-right' ng-click='taxes.openTaxDialog()' type='button'>{{ 'settings.taxes.new_tax' | translate }}</a>\n</div>\n<div class='taxes-welcome clearfix' ng-hide='taxes.isLoading || taxes.taxesList.length'>\n<div class='taxes-welcome-inner'>\n<div class='image'></div>\n<div class='description'>\n{{ 'settings.taxes.welcome.description' | translate }}\n<br>\n{{ 'settings.taxes.welcome.description2' | translate }}\n<br>\n<a class='add-button' data-hook='inner-tax-new' ng-click='taxes.openTaxDialog()'>{{ 'settings.taxes.welcome.new_tax_button' | translate }}</a>\n</div>\n</div>\n</div>\n<div class='taxes-list' ng-show='taxes.taxesList.length'>\n<div load-pane='taxes.isLoading'></div>\n<table class='wix-table is-table-border'>\n<thead>\n<tr>\n<th class='tax-name-col'>{{ 'settings.taxes.list.name' | translate }}</th>\n<th class='tax-rate-col'>{{ 'settings.taxes.list.rate' | translate }}</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr data-hook='taxes-item' ng-repeat='tax in taxes.taxesList track by tax.taxId'>\n<td class='tax-name-col' data-hook='tax-name' ng-click='taxes.openTaxDialog(tax)'>{{ tax.name }}</td>\n<td class='tax-rate-col' data-hook='tax-rate' ng-click='taxes.openTaxDialog(tax)'>{{ tax.rate }}%</td>\n<td class='tax-actions-col'>\n<a class='tax-action tax-edit' data-hook='edit-tax' href='' ng-click='taxes.openTaxDialog(tax)'>\n<span class='quotes-svg-font-icons-edit-outline' placement='top' wix-tooltip='{{ &#39;settings.taxes.list.actions.edit&#39; | translate }}'></span>\n</a>\n<a class='tax-action tax-delete' data-hook='delete-tax' href='' ng-click='taxes.deleteTax(tax)'>\n<span class='wix-style-svg-font-icons-trash-can' placement='top' wix-tooltip='{{ &#39;settings.taxes.list.actions.delete&#39; | translate }}'></span>\n</a>\n</td>\n</tr>\n</tbody>\n</table>\n</div>\n</section>\n<section class='section-main general-settings' data-hook='general-settings' experiment-values='{&#39;true&#39;: &#39;price-quotes-experiment&#39;}' ng-controller='GeneralSettingsController as generalSettings' wix-experiment-class='specs.wos.DisplayPriceQuotes'>\n<div class='section-title' id='general-settings-header'>\n<span wix-experiment-if='specs.wos.DisplayPriceQuotes'>{{ 'settings.general_settings.title' | translate }}</span>\n<span wix-experiment-if='!specs.wos.DisplayPriceQuotes'>{{ 'invoices_settings.general_settings.title' | translate }}</span>\n</div>\n<div load-pane='generalSettings.isLoading'></div>\n<div class='company-id general-setting pull-left' data-hook='company-id'>\n<label class='field-label' for='company-id'>{{'settings.business_info.company_id' | translate}}</label>\n<span class='quotes-svg-font-icons-info' wix-tooltip='{{&#39;settings.business_info.company_id_tooltip&#39; | translate}}'></span>\n<wix-input class='field-input' data-hook='settings-company-id' id='company-id' ng-blur='$ctrl.saveCompanyId($ctrl.companyId)' ng-model='$ctrl.companyId' placeholder='{{&#39;settings.business_info.company_id_placeholder&#39; | translate}}' type='text'></wix-input>\n</div>\n<div class='currency-settings general-setting pull-left'>\n<div>\n<span wix-experiment-if='specs.wos.DisplayPriceQuotes'>{{'settings.general_settings.currency' | translate }}</span>\n<span wix-experiment-if='!specs.wos.DisplayPriceQuotes'>{{ 'invoices_settings.general_settings.currency' | translate }}</span>\n<i class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;invoices_settings.general_settings.currency_tooltip&#39; | translate}}'></i>\n</div>\n<md-select data-hook='currency-dropdown' md-on-close='generalSettings.saveCurrency()' ng-model='generalSettings.settings.currency'>\n<md-option class='no-animate' data-hook='currency-option-{{currency.name}}' md-no-ink='true' ng-repeat='currency in generalSettings.currencyList' ng-value='currency.name'>\n{{currency.displayName}} - {{currency.name}} ({{currency.symbol}})\n</md-option>\n</md-select>\n</div>\n<div class='general-setting sub-setting pull-left' data-hook='price-quotes-payment-terms' wix-experiment-if='specs.wos.DisplayPriceQuotes'>\n<div class='payment-terms'>\n<span>\n{{ 'invoices_settings.general_settings.price_quote.payment_terms.terms' | translate }}\n<i class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;invoices_settings.general_settings.price_quote.payment_terms.tooltip&#39; | translate}}'></i>\n<md-select data-hook='payment-terms-dropdown' md-on-close='priceQuotesSettings.savePriceQuotesSettings()' ng-model='priceQuotesSettings.priceQuoteSettings.paymentTerms.termType'>\n<md-option class='no-animate' md-no-ink='true' ng-repeat='term in priceQuotesSettings.paymentTermsOptions' ng-value='term.termType'>\n{{ term.key | translate }}\n</md-option>\n</md-select>\n</span>\n<span ng-if='priceQuotesSettings.withData'>\n<label class='field-label' for='payment-terms-data'>{{priceQuotesSettings.translatedData}}</label>\n<wix-input class='field-input' id='payment-term-data' ng-blur='priceQuotesSettings.savePriceQuotesSettings()' ng-model='priceQuotesSettings.priceQuoteSettings.paymentTerms.termData' type='text'></wix-input>\n</span>\n</div>\n</div>\n<form class='general-setting sub-setting pull-left' data-hook='price-quotes-initial-number' name='priceQuotesSettings.initialPriceQuoteNumberForm' wix-experiment-if='specs.wos.DisplayPriceQuotes'>\n<div data-hook='initial-price-quote-number-form'>\n{{ 'settings.general_settings.initial_price_quote_number' | translate }}\n<i class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;settings.general_settings.price_quote_numbering_tooltip&#39; | translate}}'></i>\n</div>\n<wix-input class='error' data-hook='initial-price-quote-number' error-message='{{ &#39;settings.general_settings.initial_price_quote_number_error_tooltip&#39; | translate }}' error-type='tooltip' icon='validation' id='initialPriceQuoteNumber_initialPriceQuoteNum' maxlength='{{ priceQuotesSettings.quoteNumberMaxLength }}' name='initialPriceQuoteNum' ng-blur='priceQuotesSettings.saveInitialQuoteNumber()' ng-disabled='priceQuotesSettings.disableInitialNumberInput' ng-keyup='priceQuotesSettings.validateInitialNumber($event)' ng-maxlength='{{ priceQuotesSettings.quoteNumberMaxLength }}' ng-model='priceQuotesSettings.priceQuoteSettings.initialNumber' ng-pattern='/^[0-9]{1,10}$/' required select-on-click type='tel'></wix-input>\n</form>\n<form class='general-setting sub-setting pull-left' name='initialNumberForm'>\n<div data-hook='initial-number-form'>\n{{ 'settings.general_settings.initial_number' | translate }}\n<i class='quotes-svg-font-icons-info' max-width='214px' wix-tooltip='{{&#39;settings.general_settings.numbering_tooltip&#39; | translate}}'></i>\n</div>\n<wix-input class='error' data-hook='initial-quote-number' error-message='{{ &#39;settings.general_settings.initial_number_error_tooltip&#39; | translate }}' error-type='tooltip' icon='validation' id='initialQuoteNumber_initialNum' maxlength='{{ generalSettings.quoteNumberMaxLength }}' name='initialNum' ng-blur='generalSettings.saveInitialQuoteNumber()' ng-disabled='generalSettings.disableInitialNumberInput' ng-keyup='generalSettings.validateInitialNumber($event)' ng-maxlength='{{ generalSettings.quoteNumberMaxLength }}' ng-model='generalSettings.settings.initialQuoteNumber' ng-pattern='/^[0-9]{1,10}$/' required select-on-click type='tel'></wix-input>\n</form>\n</section>\n</div>\n</div>\n"),a.put("modules/quotes/stripe-payment-method/stripe-payment-method.preload.html","<div class='payment-method stripe-method'>\n<div class='payment-method-logo'>\n<div class='stripe-logo'></div>\n</div>\n<div class='payment-method-description'>\n<ul>\n<li>{{ 'payments.stripe.description1' | translate }}</li>\n<li>{{ 'payments.stripe.description2' | translate }}</li>\n<li>{{ 'payments.stripe.description3' | translate }}</li>\n<li class='footnote-marker'>{{ 'payments.stripe.description4' | translate }}</li>\n</ul>\n</div>\n<div class='payment-method-status-container' max-width='200px' tooltip-enable='{{false |  isPermitted:&#39;maPermissionQuotesPayments&#39;: true}}' wix-tooltip='{{&#39;quotes_contributor_disable_payments&#39; | translate}}'>\n<div class='payment-method-status' data-hook='payment-method-status' wix-permission-disabled='!maPermissionPayments'>\n<div ng-if='!$ctrl.methodEnabled'>\n<div data-hook='method-action'>\n<a class='wix-button is-button-outline' data-hook='method-action-button' ng-click='$ctrl.activate()' wix-bi-args='{name:&#39;stripe&#39;, origin:&#39;{{$ctrl.biOrigin}}&#39;, type: &#39;connect&#39;}' wix-bi='PAYMENT_SELECT'>{{ 'payments.stripe.action' | translate }}</a>\n</div>\n</div>\n<div class='method-enabled' data-hook='method-action' ng-if='$ctrl.methodEnabled'>\n<div class='enabled-caption'>\n<i class='quotes-svg-font-icons-v-icon'></i>\n<span>{{ 'payments.enabled' | translate }}</span>\n</div>\n<div class='method-disable'>\n<i class='quotes-svg-font-icons-x-icon'></i>\n<span data-hook='method-disable' ng-click='$ctrl.onDeactivate()' wix-bi-args='{name:&#39;stripe&#39;, origin:&#39;{{$ctrl.biOrigin}}&#39;, type: &#39;disconnect&#39;}' wix-bi='PAYMENT_SELECT'>{{ 'payments.disable' | translate }}</span>\n</div>\n</div>\n</div>\n</div>\n</div>\n")}]);
//# sourceMappingURL=scripts.js.map